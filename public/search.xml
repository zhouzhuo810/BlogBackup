<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[小常识-Foxmail配置网易企业邮箱]]></title>
      <url>/2017/12/26/%E5%B0%8F%E5%B8%B8%E8%AF%86-Foxmail%E9%85%8D%E7%BD%AE%E7%BD%91%E6%98%93%E4%BC%81%E4%B8%9A%E9%82%AE%E7%AE%B1/</url>
      <content type="html"><![CDATA[<h2 id="Foxmail邮件配置"><a href="#Foxmail邮件配置" class="headerlink" title="Foxmail邮件配置"></a>Foxmail邮件配置</h2><h3 id="网易企业邮箱"><a href="#网易企业邮箱" class="headerlink" title="网易企业邮箱"></a>网易企业邮箱</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">POP3</div><div class="line">pop.ym.163.com  SSL 995</div><div class="line">smtp.ym.163.com SSL 465</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> 常识 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 常识 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-控件任意拖动+点击监听]]></title>
      <url>/2017/12/22/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E6%8E%A7%E4%BB%B6%E4%BB%BB%E6%84%8F%E6%8B%96%E5%8A%A8-%E7%82%B9%E5%87%BB%E7%9B%91%E5%90%AC/</url>
      <content type="html"><![CDATA[<h3 id="实现代码-ImageView为例"><a href="#实现代码-ImageView为例" class="headerlink" title="实现代码(ImageView为例)"></a>实现代码(ImageView为例)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.keqiang.highcloud.ui.widget;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"><span class="keyword">import</span> android.util.Log;</div><div class="line"><span class="keyword">import</span> android.view.MotionEvent;</div><div class="line"><span class="keyword">import</span> android.view.ViewGroup;</div><div class="line"><span class="keyword">import</span> android.widget.ImageView;</div><div class="line">  </div><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by KID on 2017/11/14.</div><div class="line"> * 随意拖动的view</div><div class="line"> */</div><div class="line"><span class="meta">@SuppressLint</span>(<span class="string">"AppCompatCustomView"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DragView</span> <span class="keyword">extends</span> <span class="title">ImageView</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> width;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> height;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> screenWidth;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> screenHeight;</div><div class="line">    <span class="keyword">private</span> Context context;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> dragEnable = <span class="keyword">true</span>;</div><div class="line">    <span class="comment">//是否拖动</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isDrag = <span class="keyword">false</span>;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDrag</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> isDrag;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDragEnable</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> dragEnable;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDragEnable</span><span class="params">(<span class="keyword">boolean</span> dragEnable)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.dragEnable = dragEnable;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DragView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        dragEnable = <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">this</span>.context = context;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class="line">        width = getMeasuredWidth();</div><div class="line">        height = getMeasuredHeight();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> downX;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> downY;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onTouchEvent(event);</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isEnabled()) &#123;</div><div class="line">            <span class="keyword">switch</span> (event.getAction()) &#123;</div><div class="line">                <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</div><div class="line">                    isDrag = <span class="keyword">false</span>;</div><div class="line">                    ViewGroup mViewGroup = (ViewGroup) getParent();</div><div class="line">                    <span class="keyword">if</span> (<span class="keyword">null</span> != mViewGroup) &#123;</div><div class="line">                        screenWidth = mViewGroup.getWidth();</div><div class="line">                        screenHeight = mViewGroup.getHeight();</div><div class="line">                    &#125;</div><div class="line">                    downX = event.getX();</div><div class="line">                    downY = event.getY();</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</div><div class="line">                    Log.e(<span class="string">"kid"</span>, <span class="string">"ACTION_MOVE"</span>);</div><div class="line">                    <span class="keyword">if</span> (dragEnable) &#123;</div><div class="line">                        <span class="keyword">final</span> <span class="keyword">float</span> xDistance = event.getX() - downX;</div><div class="line">                        <span class="keyword">final</span> <span class="keyword">float</span> yDistance = event.getY() - downY;</div><div class="line">                        <span class="keyword">int</span> l, r, t, b;</div><div class="line">                        <span class="comment">//当水平或者垂直滑动距离大于10,才算拖动事件</span></div><div class="line">                        <span class="keyword">if</span> (Math.abs(xDistance) &gt; <span class="number">10</span> || Math.abs(yDistance) &gt; <span class="number">10</span>) &#123;</div><div class="line">                            Log.e(<span class="string">"kid"</span>, <span class="string">"Drag"</span>);</div><div class="line">                            isDrag = <span class="keyword">true</span>;</div><div class="line">                            l = (<span class="keyword">int</span>) (getLeft() + xDistance);</div><div class="line">                            r = l + width;</div><div class="line">                            t = (<span class="keyword">int</span>) (getTop() + yDistance);</div><div class="line">                            b = t + height;</div><div class="line">                            <span class="comment">//不划出边界判断,此处应按照项目实际情况,因为本项目需求移动的位置是手机全屏,</span></div><div class="line">                            <span class="comment">// 所以才能这么写,如果是固定区域,要得到父控件的宽高位置后再做处理</span></div><div class="line">                            <span class="keyword">if</span> (l &lt; <span class="number">0</span>) &#123;</div><div class="line">                                l = <span class="number">0</span>;</div><div class="line">                                r = l + width;</div><div class="line">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (r &gt; screenWidth) &#123;</div><div class="line">                                r = screenWidth;</div><div class="line">                                l = r - width;</div><div class="line">                            &#125;</div><div class="line">                            <span class="keyword">if</span> (t &lt; <span class="number">0</span>) &#123;</div><div class="line">                                t = <span class="number">0</span>;</div><div class="line">                                b = t + height;</div><div class="line">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (b &gt; screenHeight) &#123;</div><div class="line">                                b = screenHeight;</div><div class="line">                                t = b - height;</div><div class="line">                            &#125;</div><div class="line"></div><div class="line">                            <span class="keyword">this</span>.layout(l, t, r, b);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> MotionEvent.ACTION_UP:</div><div class="line">                    setPressed(<span class="keyword">false</span>);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> MotionEvent.ACTION_CANCEL:</div><div class="line">                    setPressed(<span class="keyword">false</span>);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android自定义控件-DieJiaIndicator]]></title>
      <url>/2017/12/21/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-DieJiaIndicator/</url>
      <content type="html"><![CDATA[<h2 id="固定数量效果图"><a href="#固定数量效果图" class="headerlink" title="固定数量效果图"></a>固定数量效果图</h2><p><img src="../../../../images/DieJiaIndicatorDemo2.gif" alt="图2"></p>
<h2 id="动态数量效果图"><a href="#动态数量效果图" class="headerlink" title="动态数量效果图"></a>动态数量效果图</h2><p><img src="../../../../images/DieJiaIndicatorDemo.gif" alt="图1"></p>
<a id="more"></a>
<h3 id="固定数量代码实现"><a href="#固定数量代码实现" class="headerlink" title="固定数量代码实现"></a>固定数量代码实现</h3><ul>
<li><p>layout关键代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">FrameLayout</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/fl_top_tabs"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_marginTop</span>=<span class="string">"10px"</span>&gt;</div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/fl_top_tabs_childs"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/iv_error"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"85px"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/machinestate_error_selected"</span></div><div class="line">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">"width"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/iv_working"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"85px"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/machinestate_working_selected"</span></div><div class="line">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">"width"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/iv_free"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"85px"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/machinestate_free_selected"</span></div><div class="line">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">"width"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/iv_disconnect"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"85px"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/machinestate_disconnect_selected"</span></div><div class="line">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">"width"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/iv_all"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"85px"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/machinestate_all_selected"</span></div><div class="line">            <span class="attr">app:layout_auto_baseheight</span>=<span class="string">"width"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/ll_top_tabs_tv"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_marginLeft</span>=<span class="string">"40px"</span></div><div class="line">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:paddingBottom</span>=<span class="string">"15px"</span></div><div class="line">            <span class="attr">android:paddingTop</span>=<span class="string">"20px"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"所有 80"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"@color/colorWhite"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"31px"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:paddingBottom</span>=<span class="string">"15px"</span></div><div class="line">            <span class="attr">android:paddingTop</span>=<span class="string">"20px"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"失联 20"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"@color/colorWhite"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"31px"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:paddingBottom</span>=<span class="string">"15px"</span></div><div class="line">            <span class="attr">android:paddingTop</span>=<span class="string">"20px"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"空闲 20"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"@color/colorWhite"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"31px"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:paddingBottom</span>=<span class="string">"15px"</span></div><div class="line">            <span class="attr">android:paddingTop</span>=<span class="string">"20px"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"工作 20"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"@color/colorWhite"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"31px"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_marginRight</span>=<span class="string">"40px"</span></div><div class="line">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:paddingBottom</span>=<span class="string">"15px"</span></div><div class="line">            <span class="attr">android:paddingTop</span>=<span class="string">"20px"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"故障 20"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"@color/colorWhite"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"31px"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>java关键代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; llTopTabsTv.getChildCount(); i++) &#123;</div><div class="line">        View childAt = llTopTabsTv.getChildAt(i);</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> finalI = i;</div><div class="line">        childAt.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                setTopTabSelection(finalI);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setTopTabSelection</span><span class="params">(<span class="keyword">int</span> finalI)</span> </span>&#123;</div><div class="line">    <span class="keyword">switch</span> (finalI) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">            flTopTabsChilds.bringChildToFront(ivError);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivWorking);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivFree);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivDisconnect);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivAll);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">            flTopTabsChilds.bringChildToFront(ivError);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivWorking);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivFree);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivAll);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivDisconnect);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">            flTopTabsChilds.bringChildToFront(ivError);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivWorking);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivAll);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivDisconnect);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivFree);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">            flTopTabsChilds.bringChildToFront(ivError);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivAll);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivDisconnect);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivFree);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivWorking);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="number">4</span>:</div><div class="line">            flTopTabsChilds.bringChildToFront(ivAll);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivDisconnect);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivFree);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivWorking);</div><div class="line">            flTopTabsChilds.bringChildToFront(ivError);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="动态数量代码实现"><a href="#动态数量代码实现" class="headerlink" title="动态数量代码实现"></a>动态数量代码实现</h3><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> android.annotation.TargetApi;</div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.graphics.Color;</div><div class="line"><span class="keyword">import</span> android.os.Build;</div><div class="line"><span class="keyword">import</span> android.os.Parcel;</div><div class="line"><span class="keyword">import</span> android.os.Parcelable;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"><span class="keyword">import</span> android.util.Log;</div><div class="line"><span class="keyword">import</span> android.util.TypedValue;</div><div class="line"><span class="keyword">import</span> android.view.Gravity;</div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.widget.FrameLayout;</div><div class="line"><span class="keyword">import</span> android.widget.HorizontalScrollView;</div><div class="line"><span class="keyword">import</span> android.widget.ImageView;</div><div class="line"><span class="keyword">import</span> android.widget.RelativeLayout;</div><div class="line"><span class="keyword">import</span> android.widget.TextView;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> com.zhy.autolayout.utils.AutoUtils;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 叠加的Tab</div><div class="line"> * Created by admin on 2017/12/20.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DieJiaIndicator</span> <span class="keyword">extends</span> <span class="title">HorizontalScrollView</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> normalDrawableId;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> selectDrawableId;</div><div class="line">    <span class="keyword">private</span> List&lt;String&gt; items;</div><div class="line">    <span class="keyword">private</span> FrameLayout flBg;</div><div class="line">    <span class="keyword">private</span> FrameLayout flTv;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> position = <span class="number">0</span>;</div><div class="line">    <span class="keyword">private</span> List&lt;ImageView&gt; imgs;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> OnItemClickListener onItemClickListener;</div><div class="line">  </div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnItemClickListener</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">boolean</span> changed)</span></span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnItemClickListener</span><span class="params">(OnItemClickListener onItemClickListener)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.onItemClickListener = onItemClickListener;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DieJiaIndicator</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">        init(context, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DieJiaIndicator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        init(context, attrs);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DieJiaIndicator</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</div><div class="line">        init(context, attrs);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@TargetApi</span>(Build.VERSION_CODES.LOLLIPOP)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DieJiaIndicator</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr, <span class="keyword">int</span> defStyleRes)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr, defStyleRes);</div><div class="line">        init(context, attrs);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        setHorizontalScrollBarEnabled(<span class="keyword">false</span>);</div><div class="line">        imgs = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        RelativeLayout rlRoot = <span class="keyword">new</span> RelativeLayout(context, attrs);</div><div class="line">        flBg = <span class="keyword">new</span> FrameLayout(context, attrs);</div><div class="line">        flTv = <span class="keyword">new</span> FrameLayout(context, attrs);</div><div class="line">        rlRoot.addView(flBg);</div><div class="line">        rlRoot.addView(flTv);</div><div class="line">        addView(rlRoot);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItems</span><span class="params">(<span class="keyword">int</span> normalDrawableId, <span class="keyword">int</span> selectDrawableId, List&lt;String&gt; items)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.normalDrawableId = normalDrawableId;</div><div class="line">        <span class="keyword">this</span>.selectDrawableId = selectDrawableId;</div><div class="line">        <span class="keyword">this</span>.items = items;</div><div class="line">        initChildren();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initChildren</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (items != <span class="keyword">null</span> &amp;&amp; items.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">            flBg.removeAllViews();</div><div class="line">            flTv.removeAllViews();</div><div class="line">            imgs.clear();</div><div class="line">            <span class="keyword">for</span> (String item : items) &#123;</div><div class="line">                addTab(item);</div><div class="line">            &#125;</div><div class="line">            setSelection(<span class="number">0</span>);</div><div class="line">            initEvent();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initEvent</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; flTv.getChildCount(); i++) &#123;</div><div class="line">            <span class="keyword">final</span> TextView childAt = (TextView) flTv.getChildAt(i);</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> finalI = i;</div><div class="line">            childAt.setOnClickListener(<span class="keyword">new</span> OnClickListener() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">                    setSelection(finalI);</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addTab</span><span class="params">(String msg)</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> position = imgs.size();</div><div class="line">        ImageView ivBg = <span class="keyword">new</span> ImageView(getContext());</div><div class="line">        <span class="keyword">int</span> width = AutoUtils.getPercentWidthSize(<span class="number">206</span>);</div><div class="line">        <span class="keyword">int</span> height = AutoUtils.getPercentHeightSize(<span class="number">78</span>);</div><div class="line">        <span class="keyword">int</span> leftMargin = AutoUtils.getPercentWidthSize(<span class="number">170</span>);</div><div class="line">        <span class="keyword">int</span> leftPadding = AutoUtils.getPercentWidthSize(<span class="number">50</span>);</div><div class="line">        <span class="keyword">int</span> bottomPadding = AutoUtils.getPercentHeightSize(<span class="number">10</span>);</div><div class="line">  </div><div class="line">        LayoutParams lpImg = <span class="keyword">new</span> LayoutParams(width, height);</div><div class="line">        lpImg.leftMargin = leftMargin * position;</div><div class="line">        ivBg.setLayoutParams(lpImg);</div><div class="line">        ivBg.setScaleType(ImageView.ScaleType.FIT_XY);</div><div class="line">        TextView tvMsg = <span class="keyword">new</span> TextView(getContext());</div><div class="line">        tvMsg.setLayoutParams(lpImg);</div><div class="line">        tvMsg.setGravity(Gravity.BOTTOM);</div><div class="line">        tvMsg.setTextColor(Color.WHITE);</div><div class="line">        tvMsg.setPadding(leftPadding, <span class="number">0</span>, <span class="number">0</span>, bottomPadding);</div><div class="line">        tvMsg.setText(msg);</div><div class="line">        ivBg.setImageResource(normalDrawableId);</div><div class="line">        flBg.addView(ivBg);</div><div class="line">        flTv.addView(tvMsg);</div><div class="line">        imgs.add(ivBg);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSelection</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> normalTextSize = AutoUtils.getPercentWidthSize(<span class="number">31</span>);</div><div class="line">        <span class="keyword">int</span> largetTextSize = AutoUtils.getPercentWidthSize(<span class="number">36</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; flTv.getChildCount(); i++) &#123;</div><div class="line">            TextView childAt = (TextView) flTv.getChildAt(i);</div><div class="line">            childAt.setTextSize(TypedValue.COMPLEX_UNIT_PX, normalTextSize);</div><div class="line">        &#125;</div><div class="line">        TextView childAt = (TextView) flTv.getChildAt(position);</div><div class="line">        childAt.setTextSize(TypedValue.COMPLEX_UNIT_PX, largetTextSize);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i1 = <span class="number">0</span>; i1 &lt; imgs.size(); i1++) &#123;</div><div class="line">            ImageView childAt1 = imgs.get(i1);</div><div class="line">            childAt1.setImageResource(position == i1 ? selectDrawableId : normalDrawableId);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; position; j++) &#123;</div><div class="line">            flBg.bringChildToFront(imgs.get(j));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = imgs.size() - <span class="number">1</span>; j &gt; position; j--) &#123;</div><div class="line">            flBg.bringChildToFront(imgs.get(j));</div><div class="line">        &#125;</div><div class="line">        flBg.bringChildToFront(imgs.get(position));</div><div class="line">        <span class="keyword">if</span> (onItemClickListener != <span class="keyword">null</span>) &#123;</div><div class="line">            onItemClickListener.onItemClick(position, DieJiaIndicator.<span class="keyword">this</span>.position != position);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.position = position;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> Parcelable <span class="title">onSaveInstanceState</span><span class="params">()</span> </span>&#123;</div><div class="line">        Parcelable superState = <span class="keyword">super</span>.onSaveInstanceState();</div><div class="line">        SaveState saveState = <span class="keyword">new</span> SaveState(superState);</div><div class="line">        saveState.position = <span class="keyword">this</span>.position;</div><div class="line">        <span class="keyword">return</span> saveState;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestoreInstanceState</span><span class="params">(Parcelable state)</span> </span>&#123;</div><div class="line">        SaveState savedState = (SaveState) state;</div><div class="line">        <span class="keyword">super</span>.onRestoreInstanceState(savedState.getSuperState());</div><div class="line">        <span class="keyword">this</span>.position = savedState.position;</div><div class="line">        setSelection(position);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSelection</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> position;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SaveState</span> <span class="keyword">extends</span> <span class="title">BaseSavedState</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> position;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Creator&lt;SaveState&gt; CREATOR = <span class="keyword">new</span> Creator&lt;SaveState&gt;() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> SaveState <span class="title">createFromParcel</span><span class="params">(Parcel source)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SaveState(source);</div><div class="line">            &#125;</div><div class="line">  </div><div class="line">            <span class="keyword">public</span> SaveState[] newArray(<span class="keyword">int</span> size) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SaveState[size];</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">describeContents</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeToParcel</span><span class="params">(Parcel dest, <span class="keyword">int</span> flags)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>.writeToParcel(dest, flags);</div><div class="line">            dest.writeInt(<span class="keyword">this</span>.position);</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">SaveState</span><span class="params">(Parcelable superState)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(superState);</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="title">SaveState</span><span class="params">(Parcel in)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(in);</div><div class="line">            <span class="keyword">this</span>.position = in.readInt();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">indicator.setItems(R.drawable.detailinfotabtitle, </div><div class="line">R.drawable.detailinfotabtitlecheckedfull, items);</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">mViewPager.addOnPageChangeListener(<span class="keyword">new</span> ViewPager.OnPageChangeListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrolled</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">float</span> positionOffset, <span class="keyword">int</span> positionOffsetPixels)</span> </span>&#123;</div><div class="line">  </div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        indicator.setSelection(position);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrollStateChanged</span><span class="params">(<span class="keyword">int</span> state)</span> </span>&#123;</div><div class="line">  </div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">indicator.setOnItemClickListener(<span class="keyword">new</span> DieJiaIndicator.OnItemClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">boolean</span> changed)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (changed) &#123;</div><div class="line">            mViewPager.setCurrentItem(position);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android自定义控件 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-onRestoreInstanceState类型强转报错]]></title>
      <url>/2017/12/21/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-onRestoreInstanceState%E7%B1%BB%E5%9E%8B%E5%BC%BA%E8%BD%AC%E6%8A%A5%E9%94%99/</url>
      <content type="html"><![CDATA[<h2 id="问题重现"><a href="#问题重现" class="headerlink" title="问题重现"></a>问题重现</h2><h3 id="层级关系"><a href="#层级关系" class="headerlink" title="层级关系"></a>层级关系</h3><ul>
<li>ViewPager+Indicator<br> -&gt;Fragment<pre><code> -&gt;ViewPager+Indicator
-&gt;Fragment
</code></pre></li>
</ul>
<a id="more"></a>
<h3 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">java.lang.ClassCastException: android.view.AbsSavedState$1 cannot be cast to com.keqiang.highcloud.ui.widget.DieJiaIndicator$SaveState</div><div class="line">     at android.view.View.dispatchRestoreInstanceState(View.java:12799)</div><div class="line">     at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2637)</div><div class="line">     at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2643)</div><div class="line">     at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2643)</div><div class="line">     at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2643)</div><div class="line">     at android.view.View.restoreHierarchyState(View.java:12777)</div><div class="line">     at android.support.v4.app.Fragment.restoreViewState(Fragment.java:475)</div><div class="line">     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1329)</div><div class="line">     at android.support.v4.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManager.java:1528)</div><div class="line">     at android.support.v4.app.BackStackRecord.executeOps(BackStackRecord.java:753)</div><div class="line">     at android.support.v4.app.FragmentManagerImpl.executeOps(FragmentManager.java:2363)</div><div class="line">     at android.support.v4.app.FragmentManagerImpl.executeOpsTogether(FragmentManager.java:2149)</div><div class="line">     at android.support.v4.app.FragmentManagerImpl.optimizeAndExecuteOps(FragmentManager.java:2103)</div><div class="line">     at android.support.v4.app.FragmentManagerImpl.execSingleAction(FragmentManager.java:1984)</div><div class="line">     at android.support.v4.app.BackStackRecord.commitNowAllowingStateLoss(BackStackRecord.java:626)</div><div class="line">     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:143)</div><div class="line">     at android.support.v4.view.ViewPager.populate(ViewPager.java:1268)</div><div class="line">     at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:668)</div><div class="line">     at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:630)</div><div class="line">     at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:622)</div><div class="line">     at zhouzhuo810.me.zzandframe.ui.widget.zzpagerindicator.ZzPagerIndicator.setCurrentItem(ZzPagerIndicator.java:248)</div><div class="line">     at zhouzhuo810.me.zzandframe.ui.widget.zzpagerindicator.ZzPagerIndicator$3.onClick(ZzPagerIndicator.java:360)</div><div class="line">     at android.view.View.performClick(View.java:4438)</div><div class="line">     at android.view.View$PerformClick.run(View.java:18422)</div><div class="line">     at android.os.Handler.handleCallback(Handler.java:733)</div><div class="line">     at android.os.Handler.dispatchMessage(Handler.java:95)</div><div class="line">     at android.os.Looper.loop(Looper.java:136)</div><div class="line">     at android.app.ActivityThread.main(ActivityThread.java:5045)</div><div class="line">     at java.lang.reflect.Method.invokeNative(Native Method)</div><div class="line">     at java.lang.reflect.Method.invoke(Method.java:515)</div><div class="line">     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)</div><div class="line">     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)</div><div class="line">     at dalvik.system.NativeStart.main(Native Method)</div></pre></td></tr></table></figure>
<h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><ul>
<li>上层ViewPager重新创建Fragment时下层ViewPager中的Fragment恢复状态时类型强转报错。</li>
</ul>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ul>
<li>方案1：避免重新创建</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">   <span class="comment">//如果页数固定，直接设置页数；如果动态，尽可能设置到大于页数。</span></div><div class="line">viewPager.setOffscreenPageLimit(一个较大值);</div></pre></td></tr></table></figure>
<ul>
<li>方案2：寻找强转类型报错的原因(暂未找到，有人说是Id重复使用问题)</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[RxJava-无限重复定时任务]]></title>
      <url>/2017/12/12/RxJava-%E6%97%A0%E9%99%90%E9%87%8D%E5%A4%8D%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
      <content type="html"><![CDATA[<h3 id="开启任务"><a href="#开启任务" class="headerlink" title="开启任务"></a>开启任务</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getAllDatas</span><span class="params">(<span class="keyword">final</span> <span class="keyword">long</span> delay)</span> </span>&#123;</div><div class="line">  </div><div class="line">	<span class="comment">//解除上次订阅</span></div><div class="line">    <span class="keyword">if</span> (subscribe != <span class="keyword">null</span>) &#123;</div><div class="line">        subscribe.unsubscribe();</div><div class="line">        subscribe = <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    subscribe = Observable.timer(delay, TimeUnit.MILLISECONDS)</div><div class="line">            .flatMap(<span class="keyword">new</span> Func1&lt;Long, Observable&lt;GetSomeThingResult&gt;&gt;() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> Observable&lt;GetSomeThingResult&gt; <span class="title">call</span><span class="params">(Long aLong)</span> </span>&#123;</div><div class="line">                	<span class="comment">//接口调用</span></div><div class="line">                    <span class="keyword">return</span> Api.getDefaultApi().getSomeThing();</div><div class="line">                &#125;</div><div class="line">            &#125;)</div><div class="line">            .observeOn(AndroidSchedulers.mainThread())</div><div class="line">            .subscribeOn(Schedulers.io())</div><div class="line">            .subscribe(<span class="keyword">new</span> Subscriber&lt;GetSomeThingResult&gt;() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">  </div><div class="line">                &#125;</div><div class="line">  </div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">                    ToastUtils.showCustomBgToast(getString(R.string.no_net_text) + e.toString());</div><div class="line">                    getAllDatas(Constants.AUTO_REFRESH_DURATION);</div><div class="line">                &#125;</div><div class="line">  </div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(GetSomeThingResult result)</span> </span>&#123;</div><div class="line">                	<span class="comment">//... do some thing with data</span></div><div class="line">  </div><div class="line">                    getAllDatas(Constants.AUTO_REFRESH_DURATION);</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="取消任务"><a href="#取消任务" class="headerlink" title="取消任务"></a>取消任务</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onDestroy();</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        <span class="keyword">if</span> (subscribe != <span class="keyword">null</span> &amp;&amp; !subscribe.isUnsubscribed()) &#123;</div><div class="line">            subscribe.unsubscribe();</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> RxJava </category>
            
        </categories>
        
        
        <tags>
            
            <tag> RxJava </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[RxJava-模拟进度]]></title>
      <url>/2017/12/11/RxJava-%E6%A8%A1%E6%8B%9F%E8%BF%9B%E5%BA%A6/</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//0-100 每隔20ms +1</span></div><div class="line">Observable.just(<span class="number">100</span>)</div><div class="line">        .flatMap(<span class="keyword">new</span> Func1&lt;Integer, Observable&lt;Long&gt;&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> Observable&lt;Long&gt; <span class="title">call</span><span class="params">(Integer integer)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> Observable.timer(<span class="number">20</span>, TimeUnit.MILLISECONDS);</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        .compose(RxHelper.&lt;Long&gt;io_main())</div><div class="line">        .subscribe(<span class="keyword">new</span> Subscriber&lt;Long&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">  </div><div class="line">            &#125;</div><div class="line">  </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">  </div><div class="line">            &#125;</div><div class="line">  </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Long aLong)</span> </span>&#123;</div><div class="line">                pb.setProgress(aLong.intValue());</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ul>
<li>计时器</li>
<li>进度模拟</li>
<li>定时任务</li>
</ul>
]]></content>
      
        <categories>
            
            <category> RxJava </category>
            
        </categories>
        
        
        <tags>
            
            <tag> RxJava </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android常用代码-bugly集成]]></title>
      <url>/2017/12/07/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-bugly%E9%9B%86%E6%88%90/</url>
      <content type="html"><![CDATA[<h2 id="集成bugly"><a href="#集成bugly" class="headerlink" title="集成bugly"></a>集成bugly</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//bugly</div><div class="line">compile &apos;com.tencent.bugly:crashreport:latest.release&apos;</div></pre></td></tr></table></figure>
<h2 id="添加权限"><a href="#添加权限" class="headerlink" title="添加权限"></a>添加权限</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- bugly start--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_LOGS"</span> /&gt;</span></div><div class="line"><span class="comment">&lt;!--bugly end--&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Application的onCreate方法中初始化"><a href="#Application的onCreate方法中初始化" class="headerlink" title="Application的onCreate方法中初始化"></a>Application的onCreate方法中初始化</h2><h3 id="不带X5内核"><a href="#不带X5内核" class="headerlink" title="不带X5内核"></a>不带X5内核</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    CrashReport.initCrashReport(<span class="keyword">this</span>, <span class="string">"你的appID"</span>, <span class="keyword">false</span>);</div><div class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="带X5内核"><a href="#带X5内核" class="headerlink" title="带X5内核"></a>带X5内核</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*bugly+x5内核*/</span></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    CrashReport.UserStrategy strategy = <span class="keyword">new</span> CrashReport.UserStrategy(<span class="keyword">this</span>);</div><div class="line">    strategy.setCrashHandleCallback(<span class="keyword">new</span> CrashReport.CrashHandleCallback() &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> Map <span class="title">onCrashHandleStart</span><span class="params">(<span class="keyword">int</span> crashType, String errorType, String errorMessage, String errorStack)</span> </span>&#123;</div><div class="line">            LinkedHashMap map = <span class="keyword">new</span> LinkedHashMap();</div><div class="line">            String x5CrashInfo = com.tencent.smtt.sdk.WebView.getCrashExtraMessage(GFApplication.<span class="keyword">this</span>);</div><div class="line">            map.put(<span class="string">"x5crashInfo"</span>, x5CrashInfo);</div><div class="line">            <span class="keyword">return</span> map;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">byte</span>[] onCrashHandleStart2GetExtraDatas(<span class="keyword">int</span> crashType, String errorType, String errorMessage, String errorStack) &#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                <span class="keyword">return</span> <span class="string">"Extra data."</span>.getBytes(<span class="string">"UTF-8"</span>);</div><div class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    CrashReport.initCrashReport(<span class="keyword">this</span>, <span class="string">"你的appID"</span>, <span class="keyword">false</span>, strategy);</div><div class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android常用代码 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android签名打包-多渠道打包]]></title>
      <url>/2017/12/07/Android%E7%AD%BE%E5%90%8D%E6%89%93%E5%8C%85-%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85/</url>
      <content type="html"><![CDATA[<h3 id="复制libs"><a href="#复制libs" class="headerlink" title="复制libs"></a>复制libs</h3><ul>
<li>common</li>
<li>analytics</li>
</ul>
<h3 id="集成友盟-App统计功能"><a href="#集成友盟-App统计功能" class="headerlink" title="集成友盟+ App统计功能"></a>集成友盟+ App统计功能</h3><p>在Application的onCreate方法中调用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 初始化common库</div><div class="line"> * 参数1:上下文，不能为空</div><div class="line"> * 参数2:设备类型，UMConfigure.DEVICE_TYPE_PHONE为手机、UMConfigure.DEVICE_TYPE_BOX为盒子，默认为手机</div><div class="line"> * 参数3:Push推送业务的secret</div><div class="line"> */</div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    UMConfigure.init(<span class="keyword">this</span>, UMConfigure.DEVICE_TYPE_PHONE, <span class="string">"你的appID"</span>);</div><div class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="添加相应权限"><a href="#添加相应权限" class="headerlink" title="添加相应权限"></a>添加相应权限</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 必须的权限 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></div><div class="line">  </div><div class="line"><span class="comment">&lt;!-- 推荐的权限 --&gt;</span></div><div class="line"><span class="comment">&lt;!-- 添加如下权限，以便使用更多的第三方SDK和更精准的统计数据 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_COARSE_LOCATION"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_FINE_LOCATION"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CHANGE_WIFI_STATE"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></div></pre></td></tr></table></figure>
<h3 id="配置渠道"><a href="#配置渠道" class="headerlink" title="配置渠道"></a>配置渠道</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">manifest</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">application</span> ……&gt;</span></div><div class="line">        ……</div><div class="line">        <span class="comment">&lt;!--umeng start--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:value</span>=<span class="string">"你的AppID"</span> <span class="attr">android:name</span>=<span class="string">"UMENG_APPKEY"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:value</span>=<span class="string">"$&#123;UMENG_CHANNEL_VALUE&#125;"</span> <span class="attr">android:name</span>=<span class="string">"UMENG_CHANNEL"</span>/&gt;</span></div><div class="line">        <span class="comment">&lt;!--umeng end--&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span>    </div><div class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="代码混淆"><a href="#代码混淆" class="headerlink" title="代码混淆"></a>代码混淆</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keep class com.umeng.commonsdk.** &#123;*;&#125;</div></pre></td></tr></table></figure>
<h3 id="多渠道配置"><a href="#多渠道配置" class="headerlink" title="多渠道配置"></a>多渠道配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">android &#123;</div><div class="line">    productFlavors &#123;</div><div class="line">        wandoujia &#123;&#125;</div><div class="line">        yingyongbao &#123;&#125;</div><div class="line">        c360 &#123;&#125;</div><div class="line">        kq &#123;&#125;</div><div class="line">        productFlavors.all &#123; flavor -&gt;</div><div class="line">            flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    applicationVariants.all &#123; variant -&gt;</div><div class="line">        variant.outputs.each &#123; output -&gt;</div><div class="line">            def outputFile = output.outputFile</div><div class="line">            def fileName</div><div class="line">            def flavor = productFlavors.name;</div><div class="line">            if (outputFile != null &amp;&amp; outputFile.name.endsWith(&apos;.apk&apos;)) &#123;</div><div class="line">                if (variant.buildType.name.equals(&apos;release&apos;)) &#123;</div><div class="line">                    fileName = &quot;名字_$&#123;defaultConfig.versionName&#125;_$&#123;flavor&#125;.apk&quot;</div><div class="line">                &#125; else if (variant.buildType.name.equals(&apos;debug&apos;)) &#123;</div><div class="line">                    fileName = &quot;名字_$&#123;defaultConfig.versionName&#125;_debug_$&#123;flavor&#125;.apk&quot;</div><div class="line">                &#125;</div><div class="line">                output.outputFile = new File(outputFile.parent, fileName)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android签名打包 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[AndroidStudio技巧-Terminal权限问题]]></title>
      <url>/2017/11/21/AndroidStudio%E6%8A%80%E5%B7%A7-Terminal%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h3 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h3><p>macOs Sierra 10.12.6系统</p>
<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><p>Android Studio 2.3.1 Terminal</p>
<h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>执行./gradlew install命令时提示<br>gradlew: Permission Denied</p>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod +x gradlew</div></pre></td></tr></table></figure>
<p>再操作即可。</p>
]]></content>
      
        <categories>
            
            <category> Android开发工具 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-ViewPager+分组列表+指示器悬停]]></title>
      <url>/2017/11/15/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-ViewPager-%E5%88%86%E7%BB%84%E5%88%97%E8%A1%A8-%E6%8C%87%E7%A4%BA%E5%99%A8%E6%82%AC%E5%81%9C/</url>
      <content type="html"><![CDATA[<h2 id="系统自带方案"><a href="#系统自带方案" class="headerlink" title="系统自带方案"></a>系统自带方案</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span> &gt;</div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:theme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Dark.ActionBar"</span>&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.CollapsingToolbarLayout</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">app:expandedTitleMarginEnd</span>=<span class="string">"64dp"</span></div><div class="line">            <span class="attr">app:expandedTitleMarginStart</span>=<span class="string">"48dp"</span></div><div class="line">            <span class="attr">app:layout_scrollFlags</span>=<span class="string">"scroll|exitUntilCollapsed"</span>&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/main.backdrop"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"300dp"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/material_img"</span></div><div class="line">                <span class="attr">app:layout_collapseMode</span>=<span class="string">"parallax"</span> /&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"?android:attr/actionBarSize"</span></div><div class="line">                <span class="attr">app:layout_collapseMode</span>=<span class="string">"pin"</span>  /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.CollapsingToolbarLayout</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.NestedScrollView</span></span></div><div class="line">  </div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:paddingTop</span>=<span class="string">"50dp"</span></div><div class="line">        <span class="attr">app:layout_behavior</span>=<span class="string">"@string/appbar_scrolling_view_behavior"</span>&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"@string/my_txt"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"20sp"</span> /&gt;</div><div class="line">  </div><div class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.widget.NestedScrollView</span>&gt;</span></div><div class="line">  </div><div class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>此方案不利于屏幕适配，故不采用。</p>
<a id="more"></a>
<h2 id="指示器悬停"><a href="#指示器悬停" class="headerlink" title="指示器悬停"></a>指示器悬停</h2><p>参考的张鸿洋大神的Demo。<br><a href="http://blog.csdn.net/lmj623565791/article/details/43649913" target="_blank" rel="external">张鸿洋大神的Demo</a></p>
<h3 id="新建values-ids-sticky-nav-layout-xml-xml"><a href="#新建values-ids-sticky-nav-layout-xml-xml" class="headerlink" title="新建values/ids_sticky_nav_layout.xml.xml"></a>新建values/ids_sticky_nav_layout.xml.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"id_stickynavlayout_topview"</span> <span class="attr">type</span>=<span class="string">"id"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"id_stickynavlayout_viewpager"</span> <span class="attr">type</span>=<span class="string">"id"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"id_stickynavlayout_indicator"</span> <span class="attr">type</span>=<span class="string">"id"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"id_stickynavlayout_innerscrollview"</span> <span class="attr">type</span>=<span class="string">"id"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="新建StickyNavLayout"><a href="#新建StickyNavLayout" class="headerlink" title="新建StickyNavLayout"></a>新建StickyNavLayout</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.example.demo.view.widget.stickynavlayout;</div><div class="line">   </div><div class="line"><span class="keyword">import</span> android.animation.ValueAnimator;</div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.NestedScrollingParent;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.ViewCompat;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.ViewPager;</div><div class="line"><span class="keyword">import</span> android.support.v4.widget.SwipeRefreshLayout;</div><div class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"><span class="keyword">import</span> android.util.Log;</div><div class="line"><span class="keyword">import</span> android.view.VelocityTracker;</div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.view.ViewConfiguration;</div><div class="line"><span class="keyword">import</span> android.view.ViewGroup;</div><div class="line"><span class="keyword">import</span> android.view.animation.Interpolator;</div><div class="line"><span class="keyword">import</span> android.widget.LinearLayout;</div><div class="line"><span class="keyword">import</span> android.widget.OverScroller;</div><div class="line">   </div><div class="line"><span class="keyword">import</span> com.example.demo.R;</div><div class="line">   </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StickyNavLayout</span> <span class="keyword">extends</span> <span class="title">LinearLayout</span> <span class="keyword">implements</span> <span class="title">NestedScrollingParent</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"StickyNavLayout"</span>;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onStartNestedScroll</span><span class="params">(View child, View target, <span class="keyword">int</span> nestedScrollAxes)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"onStartNestedScroll"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNestedScrollAccepted</span><span class="params">(View child, View target, <span class="keyword">int</span> nestedScrollAxes)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"onNestedScrollAccepted"</span>);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStopNestedScroll</span><span class="params">(View target)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"onStopNestedScroll"</span>);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNestedScroll</span><span class="params">(View target, <span class="keyword">int</span> dxConsumed, <span class="keyword">int</span> dyConsumed, <span class="keyword">int</span> dxUnconsumed, <span class="keyword">int</span> dyUnconsumed)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"onNestedScroll"</span>);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNestedPreScroll</span><span class="params">(View target, <span class="keyword">int</span> dx, <span class="keyword">int</span> dy, <span class="keyword">int</span>[] consumed)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"onNestedPreScroll"</span>);</div><div class="line">        <span class="keyword">boolean</span> hiddenTop = dy &gt; <span class="number">0</span> &amp;&amp; getScrollY() &lt; mTopViewHeight;</div><div class="line">        <span class="keyword">boolean</span> showTop = dy &lt; <span class="number">0</span> &amp;&amp; getScrollY() &gt;= <span class="number">0</span> &amp;&amp; !ViewCompat.canScrollVertically(target, -<span class="number">1</span>);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (hiddenTop || showTop) &#123;</div><div class="line">            scrollBy(<span class="number">0</span>, dy);</div><div class="line">            consumed[<span class="number">1</span>] = dy;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> TOP_CHILD_FLING_THRESHOLD = <span class="number">3</span>;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onNestedFling</span><span class="params">(View target, <span class="keyword">float</span> velocityX, <span class="keyword">float</span> velocityY, <span class="keyword">boolean</span> consumed)</span> </span>&#123;</div><div class="line">        <span class="comment">//如果是recyclerView 根据判断第一个元素是哪个位置可以判断是否消耗</span></div><div class="line">        <span class="comment">//这里判断如果第一个元素的位置是大于TOP_CHILD_FLING_THRESHOLD的</span></div><div class="line">        <span class="comment">//认为已经被消耗，在animateScroll里不会对velocityY&lt;0时做处理</span></div><div class="line">        <span class="keyword">if</span> ((target <span class="keyword">instanceof</span> RecyclerView) &amp;&amp; velocityY &lt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">final</span> RecyclerView recyclerView = (RecyclerView) target;</div><div class="line">            <span class="keyword">final</span> View firstChild = recyclerView.getChildAt(<span class="number">0</span>);</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> childAdapterPosition = recyclerView.getChildAdapterPosition(firstChild);</div><div class="line">            consumed = childAdapterPosition &gt; TOP_CHILD_FLING_THRESHOLD;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (!consumed) &#123;</div><div class="line">            animateScroll(velocityY, computeDuration(<span class="number">0</span>), consumed);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            animateScroll(velocityY, computeDuration(velocityY), consumed);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onNestedPreFling</span><span class="params">(View target, <span class="keyword">float</span> velocityX, <span class="keyword">float</span> velocityY)</span> </span>&#123;</div><div class="line">        <span class="comment">//不做拦截 可以传递给子View</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNestedScrollAxes</span><span class="params">()</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"getNestedScrollAxes"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 根据速度计算滚动动画持续时间</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> velocityY</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">computeDuration</span><span class="params">(<span class="keyword">float</span> velocityY)</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> distance;</div><div class="line">        <span class="keyword">if</span> (velocityY &gt; <span class="number">0</span>) &#123;</div><div class="line">            distance = Math.abs(mTop.getHeight() - getScrollY());</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            distance = Math.abs(mTop.getHeight() - (mTop.getHeight() - getScrollY()));</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> duration;</div><div class="line">        velocityY = Math.abs(velocityY);</div><div class="line">        <span class="keyword">if</span> (velocityY &gt; <span class="number">0</span>) &#123;</div><div class="line">            duration = <span class="number">3</span> * Math.round(<span class="number">1000</span> * (distance / velocityY));</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">final</span> <span class="keyword">float</span> distanceRatio = (<span class="keyword">float</span>) distance / getHeight();</div><div class="line">            duration = (<span class="keyword">int</span>) ((distanceRatio + <span class="number">1</span>) * <span class="number">150</span>);</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="keyword">return</span> duration;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">animateScroll</span><span class="params">(<span class="keyword">float</span> velocityY, <span class="keyword">final</span> <span class="keyword">int</span> duration, <span class="keyword">boolean</span> consumed)</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> currentOffset = getScrollY();</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> topHeight = mTop.getHeight();</div><div class="line">        <span class="keyword">if</span> (mOffsetAnimator == <span class="keyword">null</span>) &#123;</div><div class="line">            mOffsetAnimator = <span class="keyword">new</span> ValueAnimator();</div><div class="line">            mOffsetAnimator.setInterpolator(mInterpolator);</div><div class="line">            mOffsetAnimator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</div><div class="line">                    <span class="keyword">if</span> (animation.getAnimatedValue() <span class="keyword">instanceof</span> Integer) &#123;</div><div class="line">                        scrollTo(<span class="number">0</span>, (Integer) animation.getAnimatedValue());</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            mOffsetAnimator.cancel();</div><div class="line">        &#125;</div><div class="line">        mOffsetAnimator.setDuration(Math.min(duration, <span class="number">600</span>));</div><div class="line">  </div><div class="line">        <span class="keyword">if</span> (velocityY &gt;= <span class="number">0</span>) &#123;</div><div class="line">            mOffsetAnimator.setIntValues(currentOffset, topHeight);</div><div class="line">            mOffsetAnimator.start();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">//如果子View没有消耗down事件 那么就让自身滑倒0位置</span></div><div class="line">            <span class="keyword">if</span> (!consumed) &#123;</div><div class="line">                mOffsetAnimator.setIntValues(currentOffset, <span class="number">0</span>);</div><div class="line">                mOffsetAnimator.start();</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> View mTop;</div><div class="line">    <span class="keyword">private</span> View mNav;</div><div class="line">    <span class="keyword">private</span> ViewPager mViewPager;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTopViewHeight;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> OverScroller mScroller;</div><div class="line">    <span class="keyword">private</span> VelocityTracker mVelocityTracker;</div><div class="line">    <span class="keyword">private</span> ValueAnimator mOffsetAnimator;</div><div class="line">    <span class="keyword">private</span> Interpolator mInterpolator;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTouchSlop;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mMaximumVelocity, mMinimumVelocity;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mLastY;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mDragging;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StickyNavLayout</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        setOrientation(LinearLayout.VERTICAL);</div><div class="line"></div><div class="line">        mScroller = <span class="keyword">new</span> OverScroller(context);</div><div class="line">        mTouchSlop = ViewConfiguration.get(context).getScaledTouchSlop();</div><div class="line">        mMaximumVelocity = ViewConfiguration.get(context)</div><div class="line">                .getScaledMaximumFlingVelocity();</div><div class="line">        mMinimumVelocity = ViewConfiguration.get(context)</div><div class="line">                .getScaledMinimumFlingVelocity();</div><div class="line"></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initVelocityTrackerIfNotExists</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mVelocityTracker == <span class="keyword">null</span>) &#123;</div><div class="line">            mVelocityTracker = VelocityTracker.obtain();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">recycleVelocityTracker</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mVelocityTracker != <span class="keyword">null</span>) &#123;</div><div class="line">            mVelocityTracker.recycle();</div><div class="line">            mVelocityTracker = <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line"><span class="comment">//    @Override</span></div><div class="line"><span class="comment">//    public boolean onTouchEvent(MotionEvent event)</span></div><div class="line"><span class="comment">//    &#123;</span></div><div class="line"><span class="comment">//        initVelocityTrackerIfNotExists();</span></div><div class="line"><span class="comment">//        mVelocityTracker.addMovement(event);</span></div><div class="line"><span class="comment">//        int action = event.getAction();</span></div><div class="line"><span class="comment">//        float y = event.getY();</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//        switch (action)</span></div><div class="line"><span class="comment">//        &#123;</span></div><div class="line"><span class="comment">//            case MotionEvent.ACTION_DOWN:</span></div><div class="line"><span class="comment">//                if (!mScroller.isFinished())</span></div><div class="line"><span class="comment">//                    mScroller.abortAnimation();</span></div><div class="line"><span class="comment">//                mLastY = y;</span></div><div class="line"><span class="comment">//                return true;</span></div><div class="line"><span class="comment">//            case MotionEvent.ACTION_MOVE:</span></div><div class="line"><span class="comment">//                float dy = y - mLastY;</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//                if (!mDragging &amp;&amp; Math.abs(dy) &gt; mTouchSlop)</span></div><div class="line"><span class="comment">//                &#123;</span></div><div class="line"><span class="comment">//                    mDragging = true;</span></div><div class="line"><span class="comment">//                &#125;</span></div><div class="line"><span class="comment">//                if (mDragging)</span></div><div class="line"><span class="comment">//                &#123;</span></div><div class="line"><span class="comment">//                    scrollBy(0, (int) -dy);</span></div><div class="line"><span class="comment">//                &#125;</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//                mLastY = y;</span></div><div class="line"><span class="comment">//                break;</span></div><div class="line"><span class="comment">//            case MotionEvent.ACTION_CANCEL:</span></div><div class="line"><span class="comment">//                mDragging = false;</span></div><div class="line"><span class="comment">//                recycleVelocityTracker();</span></div><div class="line"><span class="comment">//                if (!mScroller.isFinished())</span></div><div class="line"><span class="comment">//                &#123;</span></div><div class="line"><span class="comment">//                    mScroller.abortAnimation();</span></div><div class="line"><span class="comment">//                &#125;</span></div><div class="line"><span class="comment">//                break;</span></div><div class="line"><span class="comment">//            case MotionEvent.ACTION_UP:</span></div><div class="line"><span class="comment">//                mDragging = false;</span></div><div class="line"><span class="comment">//                mVelocityTracker.computeCurrentVelocity(1000, mMaximumVelocity);</span></div><div class="line"><span class="comment">//                int velocityY = (int) mVelocityTracker.getYVelocity();</span></div><div class="line"><span class="comment">//                if (Math.abs(velocityY) &gt; mMinimumVelocity)</span></div><div class="line"><span class="comment">//                &#123;</span></div><div class="line"><span class="comment">//                    fling(-velocityY);</span></div><div class="line"><span class="comment">//                &#125;</span></div><div class="line"><span class="comment">//                recycleVelocityTracker();</span></div><div class="line"><span class="comment">//                break;</span></div><div class="line"><span class="comment">//        &#125;</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//        return super.onTouchEvent(event);</span></div><div class="line"><span class="comment">//    &#125;</span></div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onFinishInflate</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onFinishInflate();</div><div class="line">        mTop = findViewById(R.id.id_stickynavlayout_topview);</div><div class="line">        mNav = findViewById(R.id.id_stickynavlayout_indicator);</div><div class="line">        View view = findViewById(R.id.id_stickynavlayout_viewpager);</div><div class="line">        <span class="keyword">if</span> (!(view <span class="keyword">instanceof</span> ViewPager)) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</div><div class="line">                    <span class="string">"id_stickynavlayout_viewpager show used by ViewPager !"</span>);</div><div class="line">        &#125;</div><div class="line">        mViewPager = (ViewPager) view;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class="line">        <span class="comment">//不限制顶部的高度</span></div><div class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class="line">        getChildAt(<span class="number">0</span>).measure(widthMeasureSpec, MeasureSpec.makeMeasureSpec(<span class="number">0</span>, MeasureSpec.UNSPECIFIED));</div><div class="line">        ViewGroup.LayoutParams params = mViewPager.getLayoutParams();</div><div class="line">        params.height = getMeasuredHeight() - mNav.getMeasuredHeight();</div><div class="line">        setMeasuredDimension(getMeasuredWidth(), mTop.getMeasuredHeight() + mNav.getMeasuredHeight() + mViewPager.getMeasuredHeight());</div><div class="line"></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSizeChanged</span><span class="params">(<span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> oldw, <span class="keyword">int</span> oldh)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onSizeChanged(w, h, oldw, oldh);</div><div class="line">        mTopViewHeight = mTop.getMeasuredHeight();</div><div class="line">        Log.e(<span class="string">"TTT"</span>, <span class="string">"height="</span> + mTopViewHeight);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fling</span><span class="params">(<span class="keyword">int</span> velocityY)</span> </span>&#123;</div><div class="line">        mScroller.fling(<span class="number">0</span>, getScrollY(), <span class="number">0</span>, velocityY, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, mTopViewHeight);</div><div class="line">        invalidate();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scrollTo</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (y &lt; <span class="number">0</span>) &#123;</div><div class="line">            y = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (y &gt; mTopViewHeight) &#123;</div><div class="line">            y = mTopViewHeight;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (y != getScrollY()) &#123;</div><div class="line">            <span class="keyword">super</span>.scrollTo(x, y);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeScroll</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mScroller.computeScrollOffset()) &#123;</div><div class="line">            scrollTo(<span class="number">0</span>, mScroller.getCurrY());</div><div class="line">            invalidate();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="布局结构"><a href="#布局结构" class="headerlink" title="布局结构"></a>布局结构</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">    </div><div class="line"><span class="tag">&lt;<span class="name">com.example.demo.view.widget.stickynavlayout.StickyNavLayout</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">    </div><div class="line">    <span class="comment">&lt;!-- top view --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@id/id_stickynavlayout_topview"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#4400ff00"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">com.youth.banner.Banner</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/banner"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"400px"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="comment">&lt;!-- 指示器 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">com.example.demo.view.widget.PagerSlidingTabStrip</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@id/id_stickynavlayout_indicator"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"@dimen/activity_title_height"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@color/white"</span></div><div class="line">        <span class="attr">zz:pstsDividerColor</span>=<span class="string">"@android:color/transparent"</span></div><div class="line">        <span class="attr">zz:pstsIndicatorColor</span>=<span class="string">"@color/colorMain"</span></div><div class="line">        <span class="attr">zz:pstsIndicatorHeight</span>=<span class="string">"3px"</span></div><div class="line">        <span class="attr">zz:pstsShouldExpand</span>=<span class="string">"false"</span></div><div class="line">        <span class="attr">zz:pstsUnderlineColor</span>=<span class="string">"@android:color/transparent"</span></div><div class="line">        <span class="attr">zz:pstsUnderlineHeight</span>=<span class="string">"6px"</span></div><div class="line">        <span class="attr">zz:zmsSelectedTabTextColor</span>=<span class="string">"@color/colorMain"</span></div><div class="line">        <span class="attr">zz:zmsSelectedTabTextSize</span>=<span class="string">"34px"</span></div><div class="line">        <span class="attr">zz:zmsTabTextColor</span>=<span class="string">"@android:color/black"</span></div><div class="line">        <span class="attr">zz:zmsTabTextSize</span>=<span class="string">"34px"</span> /&gt;</div><div class="line">    </div><div class="line">    <span class="comment">&lt;!-- ViewPager --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v4.view.ViewPager</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@id/id_stickynavlayout_viewpager"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">com.example.demo.view.widget.stickynavlayout.StickyNavLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="分组列表"><a href="#分组列表" class="headerlink" title="分组列表"></a>分组列表</h2><p>本来考虑使用ExpandableListView，但是和StickyNavLayout不兼容。</p>
<p>于是找了另一个解决方案：</p>
<p><a href="https://github.com/CymChad/BaseRecyclerViewAdapterHelper" target="_blank" rel="external">BaseRecyclerViewAdapterHelper</a></p>
<h3 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">allprojects &#123;</div><div class="line">    repositories &#123;</div><div class="line">        ...</div><div class="line">        maven &#123; url &quot;https://jitpack.io&quot; &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">        compile &apos;com.github.CymChad:BaseRecyclerViewAdapterHelper:2.9.30&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="定义分组适配器"><a href="#定义分组适配器" class="headerlink" title="定义分组适配器"></a>定义分组适配器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.keqiang.highcloud.view.adapter;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.view.ViewGroup;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseMultiItemQuickAdapter;</div><div class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseViewHolder;</div><div class="line"><span class="keyword">import</span> com.chad.library.adapter.base.entity.MultiItemEntity;</div><div class="line"><span class="keyword">import</span> com.keqiang.highcloud.R;</div><div class="line"><span class="keyword">import</span> com.keqiang.highcloud.model.http.entity.test.MachineDetailsTabEntity;</div><div class="line"><span class="keyword">import</span> com.keqiang.highcloud.utils.display.ViewUtil;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by user999 on 2016/6/7.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MachineDetailTabAdapter</span> <span class="keyword">extends</span> <span class="title">BaseMultiItemQuickAdapter</span>&lt;<span class="title">MultiItemEntity</span>, <span class="title">BaseViewHolder</span>&gt; </span>&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TYPE_GROUP = <span class="number">1</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TYPE_CHILD = <span class="number">2</span>;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Same as QuickAdapter#QuickAdapter(Context,int) but with</div><div class="line">     * some initialization data.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> data A new list is created out of this one to avoid mutable list</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MachineDetailTabAdapter</span><span class="params">(List&lt;MultiItemEntity&gt; data)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(data);</div><div class="line">        addItemType(TYPE_GROUP, R.layout.list_expand_group_item);</div><div class="line">        addItemType(TYPE_CHILD, R.layout.list_expand_child_item);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> BaseViewHolder <span class="title">createBaseViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> layoutResId)</span> </span>&#123;</div><div class="line">        BaseViewHolder root = <span class="keyword">super</span>.createBaseViewHolder(parent, layoutResId);</div><div class="line">        ViewUtil.scaleContentView((ViewGroup) root.itemView);</div><div class="line">        <span class="keyword">return</span> root;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">convert</span><span class="params">(<span class="keyword">final</span> BaseViewHolder helper, <span class="keyword">final</span> MultiItemEntity item)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (helper.getItemViewType()) &#123;</div><div class="line">            <span class="keyword">case</span> TYPE_GROUP:</div><div class="line">                <span class="keyword">final</span> MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean entity = (MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean) item;</div><div class="line">                <span class="keyword">switch</span> (entity.getIndex()) &#123;</div><div class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">                        helper.setImageResource(R.id.list_group_pic, R.drawable.mac_detail_one);</div><div class="line">                        helper.setTextColor(R.id.list_group_title, mContext.getResources().getColor(R.color.color_mac_one));</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">                        helper.setImageResource(R.id.list_group_pic, R.drawable.mac_detail_two);</div><div class="line">                        helper.setTextColor(R.id.list_group_title, mContext.getResources().getColor(R.color.color_mac_two));</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">                        helper.setImageResource(R.id.list_group_pic, R.drawable.mac_detail_three);</div><div class="line">                        helper.setTextColor(R.id.list_group_title, mContext.getResources().getColor(R.color.color_mac_three));</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">default</span>:</div><div class="line">                        helper.setImageResource(R.id.list_group_pic, R.drawable.mac_detail_last);</div><div class="line">                        helper.setTextColor(R.id.list_group_title, mContext.getResources().getColor(R.color.color_mac_other));</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                helper.setText(R.id.list_group_title, entity.getMainTitle());</div><div class="line">                helper.itemView.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                        <span class="keyword">int</span> pos = helper.getAdapterPosition();</div><div class="line">                        <span class="keyword">if</span> (entity.isExpanded()) &#123;</div><div class="line">                            collapse(pos);</div><div class="line">                        &#125; <span class="keyword">else</span> &#123;</div><div class="line">                            expand(pos);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> TYPE_CHILD:</div><div class="line">                <span class="keyword">final</span> MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean.InfoBean entity1 = (MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean.InfoBean) item;</div><div class="line">                helper.setText(R.id.list_item_machine_detail_tv_device_title, entity1.getTitle());</div><div class="line">                helper.setText(R.id.list_item_machine_detail_tv_device_value, entity1.getValue());</div><div class="line">                <span class="keyword">switch</span> (entity1.getIndex()) &#123;</div><div class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">                        helper.setImageResource(R.id.list_item_machine_detail_iv_device_point, R.drawable.mac_one_shape);</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">                        helper.setImageResource(R.id.list_item_machine_detail_iv_device_point, R.drawable.mac_two_shape);</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">                        helper.setImageResource(R.id.list_item_machine_detail_iv_device_point, R.drawable.mac_three_shape);</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">default</span>:</div><div class="line">                        helper.setImageResource(R.id.list_item_machine_detail_iv_device_point, R.drawable.mac_other_shape);</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="实体类添加分组功能"><a href="#实体类添加分组功能" class="headerlink" title="实体类添加分组功能"></a>实体类添加分组功能</h3><ul>
<li>分组对应实体类必须继承AbstractExpandableItem&lt;组员实体类&gt; 和实现接口MultiItemEntity；</li>
<li>组员对应实体类必须实现接口MultiItemEntity。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">DetailInfoBean</span> <span class="keyword">extends</span> <span class="title">AbstractExpandableItem</span>&lt;<span class="title">DetailInfoBean</span>.<span class="title">InfoBean</span>&gt; <span class="keyword">implements</span> <span class="title">MultiItemEntity</span></span>&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> index = <span class="number">0</span>;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getIndex</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> index;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIndex</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.index = index;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLevel</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemType</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> MachineDetailTabAdapter.TYPE_GROUP;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">InfoBean</span> <span class="keyword">implements</span> <span class="title">MultiItemEntity</span> </span>&#123;</div><div class="line">  </div><div class="line">        <span class="keyword">private</span> <span class="keyword">int</span> index = <span class="number">0</span>;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getIndex</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> index;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIndex</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</div><div class="line">            <span class="keyword">this</span>.index = index;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">     <span class="meta">@Override</span></div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLevel</span><span class="params">()</span> </span>&#123;</div><div class="line">         <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">     &#125;</div><div class="line">  </div><div class="line">     <span class="meta">@Override</span></div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemType</span><span class="params">()</span> </span>&#123;</div><div class="line">         <span class="keyword">return</span> MachineDetailTabAdapter.TYPE_GROUP;</div><div class="line">     &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Activity数据填充"><a href="#Activity数据填充" class="headerlink" title="Activity数据填充"></a>Activity数据填充</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> List&lt;String&gt; tabNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">  </div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; data.getTasks().size(); i++) &#123;</div><div class="line">    tabNames.add(<span class="string">"任务"</span> + (i + <span class="number">1</span>));</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">final</span> List&lt;MachineDetailFragment&gt; fragments = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tabNames.size(); i++) &#123;</div><div class="line">    fragments.add(MachineDetailFragment.newInstance(macId, tabNames.get(i), data.getTasks().get(i)));</div><div class="line">&#125;</div><div class="line">  </div><div class="line">mAdapter = <span class="keyword">new</span> FragmentPagerAdapter(getSupportFragmentManager()) &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> fragments.size();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Fragment <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> fragments.get(position);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> CharSequence <span class="title">getPageTitle</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> tabNames.get(position);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">  </div><div class="line">mViewPager.setAdapter(mAdapter);</div><div class="line">mViewPager.setCurrentItem(<span class="number">0</span>);</div><div class="line">mIndicator.setViewPager(mViewPager);</div><div class="line">mIndicator.updatePosition(<span class="number">0</span>);</div></pre></td></tr></table></figure>
<h3 id="Fragment填数据"><a href="#Fragment填数据" class="headerlink" title="Fragment填数据"></a>Fragment填数据</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">List&lt;MultiItemEntity&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">List&lt;MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean&gt; detailInfo = data.getDetailInfo();</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; detailInfo.size(); i++) &#123;</div><div class="line">    MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean entity = detailInfo.get(i);</div><div class="line">    <span class="comment">//设置GroupPosition</span></div><div class="line">    entity.setIndex(i);</div><div class="line">    <span class="comment">//这个必须加！！！，不然刷新数据会重复添加。</span></div><div class="line">    <span class="keyword">if</span> (entity.getSubItems() != <span class="keyword">null</span>) &#123;</div><div class="line">        entity.getSubItems().clear();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (entity.getInfo() != <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">for</span> (MachineDetailsTabEntity.DataBean.TasksBean.DetailInfoBean.InfoBean infoEntity : entity.getInfo()) &#123;</div><div class="line">        	<span class="comment">//设置GroupPosition</span></div><div class="line">            infoEntity.setIndex(i);</div><div class="line">            entity.addSubItem(infoEntity);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    list.add(entity);</div><div class="line">&#125;</div><div class="line">adapter.setNewData(list);</div><div class="line"><span class="comment">//为了保证能展示出来，先收起来。</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; detailInfo.size(); i++) &#123;</div><div class="line">    <span class="comment">//注意！！！，这里如果adapter添加了n个header则i+n。</span></div><div class="line">    adapter.collapse(i+<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//全部展开</span></div><div class="line">adapter.expandAll();</div></pre></td></tr></table></figure>
<h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="../../../../images/viewpager_rv_banner_demo.gif" alt="demo"></p>
<h2 id="潜在解决方案"><a href="#潜在解决方案" class="headerlink" title="潜在解决方案"></a>潜在解决方案</h2><p><a href="https://github.com/zhouzhuo810/Android-ObservableScrollView" target="_blank" rel="external">Android-ObservableScrollView</a></p>
<p>由于时间有限，还没来得及尝试此方案，后续再研究一下。</p>
]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Androidd开源控件-Glide]]></title>
      <url>/2017/11/14/Android%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-Glide/</url>
      <content type="html"><![CDATA[<h2 id="Glide-4-3-1-4-x用起来更麻烦了"><a href="#Glide-4-3-1-4-x用起来更麻烦了" class="headerlink" title="Glide 4.3.1 (4.x用起来更麻烦了)"></a>Glide 4.3.1 (4.x用起来更麻烦了)</h2><h3 id="集成"><a href="#集成" class="headerlink" title="集成"></a>集成</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">repositories &#123;</div><div class="line">  mavenCentral()</div><div class="line">  maven &#123; url &apos;https://maven.google.com&apos; &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">  compile &apos;com.github.bumptech.glide:glide:4.3.1&apos;</div><div class="line">  annotationProcessor &apos;com.github.bumptech.glide:compiler:4.3.1&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="清理缓存"><a href="#清理缓存" class="headerlink" title="清理缓存"></a>清理缓存</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Glide.get(getActivity()).clearMemory();</div><div class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">        Glide.get(getActivity()).clearDiskCache();</div><div class="line">        getActivity().runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                ToastUtils.showCustomBgToast(<span class="string">"清理成功！"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;).start();</div></pre></td></tr></table></figure>
<h3 id="圆形图片"><a href="#圆形图片" class="headerlink" title="圆形图片"></a>圆形图片</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Glide.with(mContext).load(url)</div><div class="line">.apply(<span class="keyword">new</span> RequestOptions()</div><div class="line">	.circleCrop())</div><div class="line">.into(ivPhoto);</div></pre></td></tr></table></figure>
<h3 id="默认和错误图片"><a href="#默认和错误图片" class="headerlink" title="默认和错误图片"></a>默认和错误图片</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Glide.with(mContext).load(url)</div><div class="line">.apply(<span class="keyword">new</span> RequestOptions()</div><div class="line">	.error(R.drawable.photo_me)</div><div class="line">	.placeholder(R.drawable.photo_me))</div><div class="line">.into(ivPhoto);</div></pre></td></tr></table></figure>
<h3 id="加载动画"><a href="#加载动画" class="headerlink" title="加载动画"></a>加载动画</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Glide.with(mContext).load(url)</div><div class="line">.transition(<span class="keyword">new</span> DrawableTransitionOptions().crossFade(<span class="number">300</span>))</div><div class="line">.into(ivPhoto);</div></pre></td></tr></table></figure>
<h2 id="Glide-3-8-0"><a href="#Glide-3-8-0" class="headerlink" title="Glide 3.8.0"></a>Glide 3.8.0</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">repositories &#123;</div><div class="line">  mavenCentral()</div><div class="line">  maven &#123; url &apos;https://maven.google.com&apos; &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line">dependencies &#123;</div><div class="line">  compile &apos;com.github.bumptech.glide:glide:3.8.0&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Glide.with(<span class="keyword">this</span>)</div><div class="line">.load(url)</div><div class="line">.placeholder(R.drawable.ic_default)</div><div class="line">.error(R.drawable.ic_default)</div><div class="line">.crossFade()</div><div class="line">.listener(<span class="keyword">new</span> RequestListener&lt;String, GlideDrawable&gt;() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onException</span><span class="params">(Exception e, String model, Target&lt;GlideDrawable&gt; target, <span class="keyword">boolean</span> isFirstResource)</span> </span>&#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onResourceReady</span><span class="params">(GlideDrawable resource, String model, Target&lt;GlideDrawable&gt; target, <span class="keyword">boolean</span> isFromMemoryCache, <span class="keyword">boolean</span> isFirstResource)</span> </span>&#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;)</div><div class="line">.into(iv);</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android开源控件 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android常用代码-App更新]]></title>
      <url>/2017/11/10/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-App%E6%9B%B4%E6%96%B0/</url>
      <content type="html"><![CDATA[<h2 id="APP更新逻辑"><a href="#APP更新逻辑" class="headerlink" title="APP更新逻辑"></a>APP更新逻辑</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">checkUpdate</span><span class="params">()</span> </span>&#123;</div><div class="line">    String key = SpUtil.getKey();</div><div class="line"></div><div class="line">    Api.getApi0()</div><div class="line">            .CheckUpdate(key, SystemUtil.getPackageInfo(<span class="keyword">this</span>).versionCode)</div><div class="line">            .compose(RxHelper.&lt;CheckUpdateResult&gt;io_main())</div><div class="line">            .subscribe(<span class="keyword">new</span> Subscriber&lt;CheckUpdateResult&gt;() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">  </div><div class="line">                &#125;</div><div class="line">  </div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line"></div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(CheckUpdateResult checkUpdateResult)</span> </span>&#123;</div><div class="line">                    <span class="keyword">if</span> (checkUpdateResult.getCode() == <span class="number">1</span>) &#123;</div><div class="line">                        CheckUpdateResult.DataEntity data = checkUpdateResult.getData();</div><div class="line">                        showUpdate(data);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showUpdate</span><span class="params">(<span class="keyword">final</span> CheckUpdateResult.DataEntity data)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (data != <span class="keyword">null</span>) &#123;</div><div class="line">        showTwoBtnDialog(<span class="string">"更新"</span>, <span class="string">"v"</span> + data.getVersionName() + <span class="string">"\n"</span> + data.getUpdateInfo(), <span class="keyword">false</span>, <span class="keyword">new</span> IBaseActivity.OnTwoBtnClick() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOk</span><span class="params">()</span> </span>&#123;</div><div class="line">                <span class="keyword">final</span> TextView[] tv = <span class="keyword">new</span> TextView[<span class="number">1</span>];</div><div class="line">                <span class="keyword">final</span> ProgressBar[] pb = <span class="keyword">new</span> ProgressBar[<span class="number">1</span>];</div><div class="line">                showUpdateDialog(<span class="string">"更新"</span>, <span class="string">"即将开始下载..."</span>, <span class="keyword">false</span>, <span class="keyword">new</span> IBaseActivity.OnOneBtnClickListener() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProgress</span><span class="params">(TextView textView, ProgressBar progressBar)</span> </span>&#123;</div><div class="line">                        tv[<span class="number">0</span>] = textView;</div><div class="line">                        pb[<span class="number">0</span>] = progressBar;</div><div class="line">                    &#125;</div><div class="line">  </div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOK</span><span class="params">()</span> </span>&#123;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                String url = Constants.API + File.separator + data.getUrl();</div><div class="line">                <span class="keyword">final</span> String name = <span class="string">"HighNetFix_"</span> + data.getVersionName() + <span class="string">"_"</span> + data.getVersionCode() + <span class="string">".apk"</span>;</div><div class="line">                OkGo.&lt;File&gt;get(url)</div><div class="line">                        .tag(<span class="keyword">this</span>)</div><div class="line">                        .execute(<span class="keyword">new</span> FileCallback(Constants.APK_DOWNLOAD_PATH, name) &#123;</div><div class="line">                            <span class="meta">@Override</span></div><div class="line">                            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(Response&lt;File&gt; response)</span> </span>&#123;</div><div class="line">                                hideUpdateDialog();</div><div class="line">                                ApkUtils.installApk(HomePageActivity.<span class="keyword">this</span>, BuildConfig.APPLICATION_ID, Constants.APK_DOWNLOAD_PATH, name);</div><div class="line">                            &#125;</div><div class="line">  </div><div class="line">                            <span class="meta">@Override</span></div><div class="line">                            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Response&lt;File&gt; response)</span> </span>&#123;</div><div class="line">                                hideUpdateDialog();</div><div class="line">                                ToastUtils.showCustomBgToast(<span class="string">"下载失败，请检查您的网络设置。"</span>);</div><div class="line">                            &#125;</div><div class="line">  </div><div class="line">                            <span class="meta">@Override</span></div><div class="line">                            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">downloadProgress</span><span class="params">(Progress progress)</span> </span>&#123;</div><div class="line">                                <span class="keyword">long</span> currentSize = progress.currentSize;</div><div class="line">                                <span class="keyword">long</span> totalSize = progress.totalSize;</div><div class="line">                                <span class="keyword">int</span> pro = (<span class="keyword">int</span>) (currentSize * <span class="number">100.0</span> / totalSize + <span class="number">0.5f</span>);</div><div class="line">                                tv[<span class="number">0</span>].setText(<span class="string">"已下载："</span> + pro + <span class="string">"%"</span>);</div><div class="line">                                pb[<span class="number">0</span>].setProgress(pro);</div><div class="line">                            &#125;</div><div class="line">                        &#125;);</div><div class="line">            &#125;</div><div class="line">  </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancel</span><span class="params">()</span> </span>&#123;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Android常用代码 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-Mac系统升级导致svn失效问题]]></title>
      <url>/2017/11/08/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-Mac%E7%B3%BB%E7%BB%9F%E5%8D%87%E7%BA%A7%E5%AF%BC%E8%87%B4svn%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>Mac系统升级或Xcode系统升级后，打开Android Studio的老项目，svn没法使用了。</p>
<p>且打开终端，输入svn upgrade会出现如下问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Agreeing to the Xcode/iOS license requires admin privileges, please re-run as root via sudo.</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="升级之后权限问题"><a href="#升级之后权限问题" class="headerlink" title="升级之后权限问题"></a>升级之后权限问题</h3><h4 id="方式1（推荐）"><a href="#方式1（推荐）" class="headerlink" title="方式1（推荐）"></a>方式1（推荐）</h4><p>打开XCode，同意协议。</p>
<h4 id="方式2"><a href="#方式2" class="headerlink" title="方式2"></a>方式2</h4><p>1、打开终端，输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo xcodebuild -license</div></pre></td></tr></table></figure></p>
<p>2、终端提示敲回车键（enter）打开许可协议，照做</p>
<p>3、终端提示 按下  “space” 键阅读许可协议，按“q” 不阅读</p>
<p>4、最终，终端会出现三个选项，agree 、print、cancel，不用想，能不是agree 吗！输入agree，然后enter</p>
<h3 id="还原svn"><a href="#还原svn" class="headerlink" title="还原svn"></a>还原svn</h3><p>1、终端，切换到项目根目录</p>
<p>2、输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">svn upgrade</div></pre></td></tr></table></figure></p>
<p>3、问题解决。</p>
]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[AndroidStudio技巧-mac上导入导出SVN项目]]></title>
      <url>/2017/11/07/AndroidStudio%E6%8A%80%E5%B7%A7-mac%E5%AF%BC%E5%85%A5SVN%E9%A1%B9%E7%9B%AE/</url>
      <content type="html"><![CDATA[<h3 id="Android-Studio-gt-SVN"><a href="#Android-Studio-gt-SVN" class="headerlink" title="Android Studio -&gt; SVN"></a>Android Studio -&gt; SVN</h3><ul>
<li>1.打开项目</li>
<li>2.Preferences -&gt; Version Control -&gt; Ignored Files<br>（1）app/build<br>（2）build<br>（3）*.iml</li>
<li>3.VCS -&gt; import into version control -&gt; import into subversion</li>
<li>4.Submit</li>
</ul>
<h3 id="SVN-gt-Android-Studio"><a href="#SVN-gt-Android-Studio" class="headerlink" title="SVN -&gt; Android Studio"></a>SVN -&gt; Android Studio</h3><ul>
<li>1.Check out project from version control</li>
<li>2.选择Subversion</li>
<li>3.选中项目文件夹根目录</li>
<li>4.选择保存路径(非中文路径，新建一个项目文件夹)</li>
<li>5.等待完成(如果打开会报错,大多是找不到gradle,别急)。</li>
<li>6.复制其他项目的local.properties文件到项目文件夹。</li>
<li>7.open a new Android Studio project打开项目</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Android开发工具 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-ViewPager禁止左右滑动]]></title>
      <url>/2017/10/31/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-ViewPager%E7%A6%81%E6%AD%A2%E5%B7%A6%E5%8F%B3%E6%BB%91%E5%8A%A8/</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.ViewPager;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"><span class="keyword">import</span> android.view.MotionEvent;</div><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by zhouzhuo810 on 2017/10/31.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NoScrollViewPager</span> <span class="keyword">extends</span> <span class="title">ViewPager</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NoScrollViewPager</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NoScrollViewPager</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Java工具类-二维码生成和解析]]></title>
      <url>/2017/10/20/JavaEE-%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%94%9F%E6%88%90%E5%92%8C%E8%A7%A3%E6%9E%90/</url>
      <content type="html"><![CDATA[<h2 id="zxing生成和解析二维码"><a href="#zxing生成和解析二维码" class="headerlink" title="zxing生成和解析二维码"></a>zxing生成和解析二维码</h2><h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.google.zxing/core --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.zxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.google.zxing/javase --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.zxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javase<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> com.google.zxing.*;</div><div class="line"><span class="keyword">import</span> com.google.zxing.client.j2se.BufferedImageLuminanceSource;</div><div class="line"><span class="keyword">import</span> com.google.zxing.client.j2se.MatrixToImageWriter;</div><div class="line"><span class="keyword">import</span> com.google.zxing.common.BitMatrix;</div><div class="line"><span class="keyword">import</span> com.google.zxing.common.HybridBinarizer;</div><div class="line"><span class="keyword">import</span> com.google.zxing.qrcode.QRCodeWriter;</div><div class="line"><span class="keyword">import</span> com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</div><div class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.nio.file.Path;</div><div class="line"><span class="keyword">import</span> java.util.HashMap;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 二维码解析工具类</div><div class="line"> * Created by zz on 2017/10/20.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QrCodeUtils</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 生成二维码Bitmap</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> widthPix     宽</div><div class="line">     * <span class="doctag">@param</span> heightPix    高</div><div class="line">     * <span class="doctag">@param</span> content      二维码内容</div><div class="line">     * <span class="doctag">@param</span> fileSavePath 保存路径</div><div class="line">     * <span class="doctag">@return</span> 是否成功</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">encodeQrCode</span><span class="params">(<span class="keyword">int</span> widthPix, <span class="keyword">int</span> heightPix, String content, String fileSavePath)</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            <span class="keyword">if</span> (content == <span class="keyword">null</span> || <span class="string">""</span>.equals(content)) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//配置参数</span></div><div class="line">            Map&lt;EncodeHintType, Object&gt; hints = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">            hints.put(EncodeHintType.CHARACTER_SET, <span class="string">"utf-8"</span>);</div><div class="line">            <span class="comment">//容错级别</span></div><div class="line">            hints.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.H);</div><div class="line">            <span class="comment">//设置空白边距的宽度</span></div><div class="line">            hints.put(EncodeHintType.MARGIN, <span class="number">6</span>); <span class="comment">//default is 4</span></div><div class="line">            <span class="comment">// 图像数据转换，使用了矩阵转换</span></div><div class="line">            BitMatrix bitMatrix = <span class="keyword">new</span> QRCodeWriter().encode(content, BarcodeFormat.QR_CODE, widthPix, heightPix, hints);</div><div class="line">            Path file = <span class="keyword">new</span> File(fileSavePath).toPath();</div><div class="line">            MatrixToImageWriter.writeToPath(bitMatrix, <span class="string">"png"</span>, file);</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">            <span class="comment">//必须使用compress方法将bitmap保存到文件中再进行读取。直接返回的bitmap是没有任何压缩的，内存消耗巨大！</span></div><div class="line">        &#125; <span class="keyword">catch</span> (WriterException | IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 解析二维码</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> filePath 二维码路径</div><div class="line">     * <span class="doctag">@return</span> 二维码内容</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">decodeQrCode</span><span class="params">(String filePath)</span> </span>&#123;</div><div class="line">        BufferedImage image;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            image = ImageIO.read(<span class="keyword">new</span> File(filePath));</div><div class="line">            LuminanceSource source = <span class="keyword">new</span> BufferedImageLuminanceSource(image);</div><div class="line">            Binarizer binarizer = <span class="keyword">new</span> HybridBinarizer(source);</div><div class="line">            BinaryBitmap binaryBitmap = <span class="keyword">new</span> BinaryBitmap(binarizer);</div><div class="line">            Map&lt;DecodeHintType, Object&gt; hints = <span class="keyword">new</span> HashMap&lt;DecodeHintType, Object&gt;();</div><div class="line">            hints.put(DecodeHintType.CHARACTER_SET, <span class="string">"UTF-8"</span>);</div><div class="line">            Result result = <span class="keyword">new</span> MultiFormatReader().decode(binaryBitmap, hints);<span class="comment">// 对图像进行解码</span></div><div class="line">            <span class="keyword">return</span> result.getText();</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException | NotFoundException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Java工具类 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android常用代码-XML解析]]></title>
      <url>/2017/10/18/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-XML%E8%A7%A3%E6%9E%90/</url>
      <content type="html"><![CDATA[<h2 id="常见XML解析方法"><a href="#常见XML解析方法" class="headerlink" title="常见XML解析方法"></a>常见XML解析方法</h2><ul>
<li>SAX</li>
<li>DOM</li>
<li>PULL</li>
<li>Dom4j</li>
</ul>
<h2 id="推荐Dom4j"><a href="#推荐Dom4j" class="headerlink" title="推荐Dom4j"></a>推荐Dom4j</h2><h3 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h3><ul>
<li>jar百度云下载地址</li>
</ul>
<p><a href="https://pan.baidu.com/s/1i3hduPf" target="_blank" rel="external">https://pan.baidu.com/s/1i3hduPf</a></p>
<h3 id="用法简介"><a href="#用法简介" class="headerlink" title="用法简介"></a>用法简介</h3><p>3个概念：元素，属性，值。</p>
<a id="more"></a>
<h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">SAXReader saxReader = <span class="keyword">new</span> SAXReader();</div><div class="line">Document document = saxReader.read(file);</div><div class="line"><span class="comment">//获取根节点</span></div><div class="line">Element root = document.getRootElement();</div></pre></td></tr></table></figure>
<h4 id="元素"><a href="#元素" class="headerlink" title="元素"></a>元素</h4><ul>
<li>获取所有子元素</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">List&lt;Element&gt; elements = root.elements();</div></pre></td></tr></table></figure>
<ul>
<li>获取某一个名为username子元素</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Element element = root.element(<span class="string">"username"</span>);</div></pre></td></tr></table></figure>
<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><ul>
<li>获取元素的某个属性的值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String firstName = root.attributeValue(<span class="string">"firstName"</span>);</div></pre></td></tr></table></figure>
<h4 id="值"><a href="#值" class="headerlink" title="值"></a>值</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//获取username元素的值</span></div><div class="line">	String username = root.elementText(<span class="string">"username"</span>);</div></pre></td></tr></table></figure>
<p>也可以这么写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String username = root.element(<span class="string">"username"</span>).getText();</div></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>Dom4j性能非常好，灵活性高，易使用.</p>
]]></content>
      
        <categories>
            
            <category> Android常用代码 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android常用代码-微信QQ分享文件]]></title>
      <url>/2017/10/17/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%BE%AE%E4%BF%A1QQ%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E5%AD%97/</url>
      <content type="html"><![CDATA[<p>不使用SDK实现QQ和微信文件与文字的分享。</p>
<h3 id="QQ分享文件"><a href="#QQ分享文件" class="headerlink" title="QQ分享文件"></a>QQ分享文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">private void shareFileToQQ(File file) throws Exception&#123;</div><div class="line">    Intent share = new Intent(Intent.ACTION_SEND);</div><div class="line">    ComponentName component = new ComponentName(&quot;com.tencent.mobileqq&quot;, &quot;com.tencent.mobileqq.activity.JumpActivity&quot;);</div><div class="line">    share.setComponent(component);</div><div class="line">    Uri uri = null;</div><div class="line">    if (Build.VERSION.SDK_INT &gt; 23) &#123;</div><div class="line">        uri = FileProvider.getUriForFile(getActivity(),</div><div class="line">                BuildConfig.APPLICATION_ID + &quot;.provider&quot;,</div><div class="line">                file);</div><div class="line">    &#125; else &#123;</div><div class="line">        uri = Uri.fromFile(file);</div><div class="line">    &#125;</div><div class="line">    share.putExtra(Intent.EXTRA_STREAM, uri);</div><div class="line">    share.setType(&quot;*/*&quot;);</div><div class="line">    startActivity(Intent.createChooser(share, &quot;发送&quot;));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="QQ分享文字"><a href="#QQ分享文字" class="headerlink" title="QQ分享文字"></a>QQ分享文字</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 分享文字给QQ好友</div><div class="line"> * <span class="doctag">@param</span> context</div><div class="line"> * <span class="doctag">@param</span> content</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shareQQ</span><span class="params">(Context context, String content)</span> </span>&#123;</div><div class="line">    Intent sendIntent = <span class="keyword">new</span> Intent();</div><div class="line">    sendIntent.setAction(Intent.ACTION_SEND);</div><div class="line">    sendIntent.putExtra(Intent.EXTRA_TEXT, content);</div><div class="line">    sendIntent.setType(<span class="string">"text/plain"</span>);</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        sendIntent.setClassName(<span class="string">"com.tencent.mobileqq"</span>, <span class="string">"com.tencent.mobileqq.activity.JumpActivity"</span>);</div><div class="line">        Intent chooserIntent = Intent.createChooser(sendIntent, <span class="string">"选择分享途径"</span>);</div><div class="line">        <span class="keyword">if</span> (chooserIntent == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        context.startActivity(sendIntent);</div><div class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">        context.startActivity(sendIntent);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="微信分享文件"><a href="#微信分享文件" class="headerlink" title="微信分享文件"></a>微信分享文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">shareFileToWx</span><span class="params">(String title, File file)</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">    Intent intent = <span class="keyword">new</span> Intent();</div><div class="line">    ComponentName comp = <span class="keyword">new</span> ComponentName(<span class="string">"com.tencent.mm"</span>, <span class="string">"com.tencent.mm.ui.tools.ShareImgUI"</span>);</div><div class="line">    intent.setComponent(comp);</div><div class="line">    Uri uri = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt; <span class="number">23</span>) &#123;</div><div class="line">        uri = FileProvider.getUriForFile(getActivity(),</div><div class="line">                BuildConfig.APPLICATION_ID + <span class="string">".provider"</span>,</div><div class="line">                file);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        uri = Uri.fromFile(file);</div><div class="line">    &#125;</div><div class="line">    intent.setAction(<span class="string">"android.intent.action.SEND"</span>);</div><div class="line">    intent.setType(<span class="string">"file/*"</span>);</div><div class="line">    intent.putExtra(Intent.EXTRA_TEXT, title);</div><div class="line">    intent.putExtra(Intent.EXTRA_STREAM, uri);</div><div class="line">    startActivity(intent);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="微信分享文字"><a href="#微信分享文字" class="headerlink" title="微信分享文字"></a>微信分享文字</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 分享文字给微信好友</div><div class="line"> * <span class="doctag">@param</span> content</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">shareToFriend</span><span class="params">(Context context, String content)</span> </span>&#123;</div><div class="line">    Intent intent = <span class="keyword">new</span> Intent();</div><div class="line">    intent.setAction(Intent.ACTION_SEND);</div><div class="line">    intent.setType(<span class="string">"text/plain"</span>);</div><div class="line">    intent.putExtra(Intent.EXTRA_TEXT, content);</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        intent.setClassName(<span class="string">"com.tencent.mm"</span>, <span class="string">"com.tencent.mm.ui.tools.ShareImgUI"</span>);</div><div class="line">        Intent chooserIntent = Intent.createChooser(intent, <span class="string">"选择分享途径"</span>);</div><div class="line">        <span class="keyword">if</span> (chooserIntent == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        context.startActivity(intent);</div><div class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">        context.startActivity(intent);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul>
<li>问题1(个别手机上会报错，如’小米 REDMI NOTE 3’)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">android.content.ActivityNotFoundException</div></pre></td></tr></table></figure>
<p>Unable to find explicit activity class {com.tencent.mm/com.tencent.mm.ui.tools.ShareImgUI}; have you declared this activity in your AndroidManifest.xml?<br>解决方式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">"com.tencent.mm.ui.tools.ShareImgUI"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">"com.tencent.mobileqq.activity.JumpActivity"</span>/&gt;</span></div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android常用代码 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android常用代码-微信支付宝支付]]></title>
      <url>/2017/10/17/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98/</url>
      <content type="html"><![CDATA[<p>记录一下支付功能简单实现逻辑。</p>
<h2 id="微信支付"><a href="#微信支付" class="headerlink" title="微信支付"></a>微信支付</h2><h3 id="注册一个入口Activity"><a href="#注册一个入口Activity" class="headerlink" title="注册一个入口Activity"></a>注册一个入口Activity</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;!--weixin pay--&gt;</div><div class="line">&lt;activity</div><div class="line">    android:name=&quot;.wxapi.WXPayEntryActivity&quot;</div><div class="line">    android:exported=&quot;true&quot;</div><div class="line">    android:launchMode=&quot;singleTop&quot; /&gt;</div><div class="line">&lt;!--weixin pay--&gt;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="可自定义界面"><a href="#可自定义界面" class="headerlink" title="可自定义界面"></a>可自定义界面</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.keqiang.highcloud.wxapi;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> android.content.Intent;</div><div class="line"><span class="keyword">import</span> android.os.Bundle;</div><div class="line"><span class="keyword">import</span> android.widget.TextView;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> com.keqiang.highcloud.Constants;</div><div class="line"><span class="keyword">import</span> com.keqiang.highcloud.R;</div><div class="line"><span class="keyword">import</span> com.keqiang.highcloud.view.activity.BaseActivity;</div><div class="line"><span class="keyword">import</span> com.keqiang.highcloud.view.activity.shop.ShopMyOrderActivity;</div><div class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.constants.ConstantsAPI;</div><div class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.modelbase.BaseReq;</div><div class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.modelbase.BaseResp;</div><div class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.IWXAPI;</div><div class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.IWXAPIEventHandler;</div><div class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.WXAPIFactory;</div><div class="line">  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WXPayEntryActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> <span class="keyword">implements</span> <span class="title">IWXAPIEventHandler</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MicroMsg.SDKSample.WXPayEntryActivity"</span>;</div><div class="line">    <span class="keyword">private</span> IWXAPI api;</div><div class="line">    <span class="keyword">private</span> TextView tvResult;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">  </div><div class="line">        api = WXAPIFactory.createWXAPI(<span class="keyword">this</span>, Constants.APP_ID);</div><div class="line">        api.handleIntent(getIntent(), <span class="keyword">this</span>);</div><div class="line"><span class="comment">//        finish();</span></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLayoutId</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> R.layout.pay_result;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</div><div class="line">        tvResult = (TextView) findViewById(R.id.tv_result);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initEvent</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveState</span><span class="params">(Bundle bundle)</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">restoreState</span><span class="params">(Bundle bundle)</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDefaultBackClose</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onNewIntent</span><span class="params">(Intent intent)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onNewIntent(intent);</div><div class="line">        setIntent(intent);</div><div class="line">        api.handleIntent(intent, <span class="keyword">this</span>);</div><div class="line"><span class="comment">//        finish();</span></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReq</span><span class="params">(BaseReq req)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResp</span><span class="params">(BaseResp resp)</span> </span>&#123;</div><div class="line">  </div><div class="line">        <span class="keyword">if</span> (resp.getType() == ConstantsAPI.COMMAND_PAY_BY_WX) &#123;</div><div class="line">            <span class="keyword">if</span> (resp.errCode == <span class="number">0</span>) &#123;</div><div class="line">                tvResult.setText(<span class="string">"微信支付完成！"</span>);</div><div class="line">                Intent intent = <span class="keyword">new</span> Intent(WXPayEntryActivity.<span class="keyword">this</span>, ShopMyOrderActivity.class);</div><div class="line">                startActWithIntent(intent);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                tvResult.setText(resp.errStr);</div><div class="line">            &#125;</div><div class="line">            finish();</div><div class="line">  </div><div class="line"><span class="comment">/*            AlertDialog.Builder builder = new AlertDialog.Builder(this);</span></div><div class="line">            builder.setTitle(R.string.app_tip);</div><div class="line">            builder.setMessage(getString(R.string.pay_result_callback_msg, String.valueOf(resp.errCode)));</div><div class="line">            builder.show();*/</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="为保证支付前已将app注册到微信"><a href="#为保证支付前已将app注册到微信" class="headerlink" title="为保证支付前已将app注册到微信"></a>为保证支付前已将app注册到微信</h3><ul>
<li>注册一个广播</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- wx pay start--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">receiver</span></span></div><div class="line">    <span class="attr">android:name</span>=<span class="string">".other.receiver.AppRegister"</span></div><div class="line">    <span class="attr">android:permission</span>=<span class="string">"com.tencent.mm.plugin.permission.SEND"</span> &gt;</div><div class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"com.tencent.mm.plugin.openapi.Intent.ACTION_REFRESH_WXAPP"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--wx pay end--&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>在Application中发送广播</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*注册APP到微信*/</span></div><div class="line">Intent intent = <span class="keyword">new</span> Intent();</div><div class="line">intent.setAction(<span class="string">"com.tencent.mm.plugin.openapi.Intent.ACTION_REFRESH_WXAPP"</span>);</div><div class="line">sendBroadcast(intent);</div></pre></td></tr></table></figure>
<h2 id="支付宝支付"><a href="#支付宝支付" class="headerlink" title="支付宝支付"></a>支付宝支付</h2><h3 id="网页登陆支付"><a href="#网页登陆支付" class="headerlink" title="网页登陆支付"></a>网页登陆支付</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- alipay sdk begin --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">activity</span></span></div><div class="line">    <span class="attr">android:name</span>=<span class="string">"com.alipay.sdk.app.H5PayActivity"</span></div><div class="line">    <span class="attr">android:configChanges</span>=<span class="string">"orientation|keyboardHidden|navigation|screenSize"</span></div><div class="line">    <span class="attr">android:exported</span>=<span class="string">"false"</span></div><div class="line">    <span class="attr">android:screenOrientation</span>=<span class="string">"behind"</span></div><div class="line">    <span class="attr">android:windowSoftInputMode</span>=<span class="string">"adjustResize|stateHidden"</span>/&gt;</div><div class="line"><span class="tag">&lt;<span class="name">activity</span></span></div><div class="line">    <span class="attr">android:name</span>=<span class="string">"com.alipay.sdk.app.H5AuthActivity"</span></div><div class="line">    <span class="attr">android:configChanges</span>=<span class="string">"orientation|keyboardHidden|navigation"</span></div><div class="line">    <span class="attr">android:exported</span>=<span class="string">"false"</span></div><div class="line">    <span class="attr">android:screenOrientation</span>=<span class="string">"behind"</span></div><div class="line">    <span class="attr">android:windowSoftInputMode</span>=<span class="string">"adjustResize|stateHidden"</span>/&gt;</div><div class="line"><span class="comment">&lt;!-- alipay sdk end --&gt;</span></div></pre></td></tr></table></figure>
<h2 id="支付界面"><a href="#支付界面" class="headerlink" title="支付界面"></a>支付界面</h2><h3 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/root"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">com.example.view.widget.ZzTitleBar</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/title_bar"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"@dimen/activity_title_height"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@color/colorMain"</span></div><div class="line">        <span class="attr">app:leftImg</span>=<span class="string">"@drawable/iv_back"</span></div><div class="line">        <span class="attr">app:leftText</span>=<span class="string">"@string/back_text"</span></div><div class="line">        <span class="attr">app:showLeftLayout</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">app:showRightLayout</span>=<span class="string">"false"</span></div><div class="line">        <span class="attr">app:textColorAll</span>=<span class="string">"@color/color_white"</span></div><div class="line">        <span class="attr">app:textSizeAll</span>=<span class="string">"@dimen/activity_title_text_size"</span></div><div class="line">        <span class="attr">app:titleText</span>=<span class="string">"支付订单"</span> /&gt;</div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"88px"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#fff"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"支付剩余时间"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#666"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"24px"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_marginTop</span>=<span class="string">"4px"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/tv_minute_shi"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"@drawable/zhifu_top_kuang"</span></div><div class="line">                <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">"0"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"20px"</span> /&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/tv_minute_ge"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"10px"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"@drawable/zhifu_top_kuang"</span></div><div class="line">                <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">"0"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"20px"</span> /&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"5px"</span></div><div class="line">                <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">":"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#333"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"20px"</span> /&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/tv_second_shi"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"5px"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"@drawable/zhifu_top_kuang"</span></div><div class="line">                <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">"0"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"20px"</span> /&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/tv_second_ge"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"10px"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"@drawable/zhifu_top_kuang"</span></div><div class="line">                <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">"0"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"20px"</span> /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">View</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"1px"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#f1f1f1"</span> /&gt;</div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"112px"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#fff"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"260px"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/tv_product_name"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"80px"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">"畅享管"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#333"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"24px"</span> /&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"80px"</span></div><div class="line">                <span class="attr">android:layout_marginTop</span>=<span class="string">"4px"</span></div><div class="line">                <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line">  </div><div class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:text</span>=<span class="string">"数量："</span></div><div class="line">                    <span class="attr">android:textColor</span>=<span class="string">"#999"</span></div><div class="line">                    <span class="attr">android:textSize</span>=<span class="string">"18px"</span> /&gt;</div><div class="line">  </div><div class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                    <span class="attr">android:id</span>=<span class="string">"@+id/tv_number"</span></div><div class="line">                    <span class="attr">android:layout_width</span>=<span class="string">"100px"</span></div><div class="line">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:background</span>=<span class="string">"@drawable/order_round_bg_shape"</span></div><div class="line">                    <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">                    <span class="attr">android:paddingBottom</span>=<span class="string">"2px"</span></div><div class="line">                    <span class="attr">android:paddingLeft</span>=<span class="string">"15px"</span></div><div class="line">                    <span class="attr">android:paddingRight</span>=<span class="string">"15px"</span></div><div class="line">                    <span class="attr">android:paddingTop</span>=<span class="string">"2px"</span></div><div class="line">                    <span class="attr">android:text</span>=<span class="string">"1"</span></div><div class="line">                    <span class="attr">android:textColor</span>=<span class="string">"#ff6631"</span></div><div class="line">                    <span class="attr">android:textSize</span>=<span class="string">"18px"</span> /&gt;</div><div class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"80px"</span></div><div class="line">                <span class="attr">android:layout_marginTop</span>=<span class="string">"4px"</span></div><div class="line">                <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line">  </div><div class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:text</span>=<span class="string">"型号："</span></div><div class="line">                    <span class="attr">android:textColor</span>=<span class="string">"#999"</span></div><div class="line">                    <span class="attr">android:textSize</span>=<span class="string">"18px"</span> /&gt;</div><div class="line">  </div><div class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                    <span class="attr">android:id</span>=<span class="string">"@+id/tv_type"</span></div><div class="line">                    <span class="attr">android:layout_width</span>=<span class="string">"100px"</span></div><div class="line">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:background</span>=<span class="string">"@drawable/order_round_bg_shape"</span></div><div class="line">                    <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">                    <span class="attr">android:paddingBottom</span>=<span class="string">"2px"</span></div><div class="line">                    <span class="attr">android:paddingLeft</span>=<span class="string">"15px"</span></div><div class="line">                    <span class="attr">android:paddingRight</span>=<span class="string">"15px"</span></div><div class="line">                    <span class="attr">android:paddingTop</span>=<span class="string">"2px"</span></div><div class="line">                    <span class="attr">android:text</span>=<span class="string">""</span></div><div class="line">                    <span class="attr">android:textColor</span>=<span class="string">"#ff6631"</span></div><div class="line">                    <span class="attr">android:textSize</span>=<span class="string">"18px"</span> /&gt;</div><div class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">View</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"1px"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_marginBottom</span>=<span class="string">"4px"</span></div><div class="line">            <span class="attr">android:layout_marginLeft</span>=<span class="string">"20px"</span></div><div class="line">            <span class="attr">android:layout_marginTop</span>=<span class="string">"4px"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"#f1f1f1"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_marginLeft</span>=<span class="string">"40px"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"bottom"</span></div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">"¥"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#f74e37"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"20px"</span> /&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/tv_count"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">""</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#f74e37"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"60px"</span> /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_marginTop</span>=<span class="string">"30px"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#fff"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/ll_alipay"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"120px"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/setting_item_bg_selector"</span></div><div class="line">            <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"60px"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"60px"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"34px"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/alipay_logo"</span> /&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"34px"</span></div><div class="line">                <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">                <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">  </div><div class="line">                <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">                    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">                    <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line">  </div><div class="line">                    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                        <span class="attr">android:text</span>=<span class="string">"支付宝"</span></div><div class="line">                        <span class="attr">android:textColor</span>=<span class="string">"#333"</span></div><div class="line">                        <span class="attr">android:textSize</span>=<span class="string">"30px"</span> /&gt;</div><div class="line">  </div><div class="line">                    <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                        <span class="attr">android:layout_width</span>=<span class="string">"60px"</span></div><div class="line">                        <span class="attr">android:layout_height</span>=<span class="string">"26px"</span></div><div class="line">                        <span class="attr">android:layout_marginLeft</span>=<span class="string">"20px"</span></div><div class="line">                        <span class="attr">android:src</span>=<span class="string">"@drawable/pay_type_recomend"</span> /&gt;</div><div class="line">                <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:layout_marginTop</span>=<span class="string">"10px"</span></div><div class="line">                    <span class="attr">android:text</span>=<span class="string">"亿万用户的选择 , 更快更安全"</span></div><div class="line">                    <span class="attr">android:textColor</span>=<span class="string">"#999"</span></div><div class="line">                    <span class="attr">android:textSize</span>=<span class="string">"20px"</span> /&gt;</div><div class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/cb_alipay"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"34px"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"34px"</span></div><div class="line">                <span class="attr">android:layout_marginRight</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"@drawable/dingdan_btn_xuanzhe_selector"</span></div><div class="line">                <span class="attr">android:button</span>=<span class="string">"@null"</span></div><div class="line">                <span class="attr">android:checked</span>=<span class="string">"true"</span></div><div class="line">                <span class="attr">android:clickable</span>=<span class="string">"false"</span></div><div class="line">                <span class="attr">android:enabled</span>=<span class="string">"false"</span> /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">View</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"1px"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"#f1f1f1"</span> /&gt;</div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/ll_wxpay"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"120px"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/setting_item_bg_selector"</span></div><div class="line">            <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"60px"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"60px"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"34px"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/weixin_logo"</span> /&gt;</div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"34px"</span></div><div class="line">                <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">                <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">  </div><div class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:text</span>=<span class="string">"微信"</span></div><div class="line">                    <span class="attr">android:textColor</span>=<span class="string">"#333"</span></div><div class="line">                    <span class="attr">android:textSize</span>=<span class="string">"30px"</span> /&gt;</div><div class="line">  </div><div class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:layout_marginTop</span>=<span class="string">"10px"</span></div><div class="line">                    <span class="attr">android:text</span>=<span class="string">"数亿用户都在用 , 安全可托付"</span></div><div class="line">                    <span class="attr">android:textColor</span>=<span class="string">"#999"</span></div><div class="line">                    <span class="attr">android:textSize</span>=<span class="string">"20px"</span> /&gt;</div><div class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/cb_weixin_pay"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"34px"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"34px"</span></div><div class="line">                <span class="attr">android:layout_marginRight</span>=<span class="string">"30px"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"@drawable/dingdan_btn_xuanzhe_selector"</span></div><div class="line">                <span class="attr">android:button</span>=<span class="string">"@null"</span></div><div class="line">                <span class="attr">android:checked</span>=<span class="string">"false"</span></div><div class="line">                <span class="attr">android:clickable</span>=<span class="string">"false"</span></div><div class="line">                <span class="attr">android:enabled</span>=<span class="string">"false"</span> /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/tv_pay"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"110px"</span></div><div class="line">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"30px"</span></div><div class="line">        <span class="attr">android:layout_marginRight</span>=<span class="string">"30px"</span></div><div class="line">        <span class="attr">android:layout_marginTop</span>=<span class="string">"140px"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@drawable/btn_main_selector"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"确认付款"</span></div><div class="line">        <span class="attr">android:textColor</span>=<span class="string">"@color/color_white"</span></div><div class="line">        <span class="attr">android:textSize</span>=<span class="string">"36px"</span> /&gt;</div><div class="line">  </div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.keqiang.highcloud.view.activity.setting;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</div><div class="line"><span class="keyword">import</span> android.app.AlertDialog;</div><div class="line"><span class="keyword">import</span> android.content.DialogInterface;</div><div class="line"><span class="keyword">import</span> android.content.Intent;</div><div class="line"><span class="keyword">import</span> android.os.Bundle;</div><div class="line"><span class="keyword">import</span> android.os.Handler;</div><div class="line"><span class="keyword">import</span> android.os.Message;</div><div class="line"><span class="keyword">import</span> android.text.TextUtils;</div><div class="line"><span class="keyword">import</span> android.util.Log;</div><div class="line"><span class="keyword">import</span> android.view.LayoutInflater;</div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.view.ViewGroup;</div><div class="line"><span class="keyword">import</span> android.widget.CheckBox;</div><div class="line"><span class="keyword">import</span> android.widget.LinearLayout;</div><div class="line"><span class="keyword">import</span> android.widget.TextView;</div><div class="line"><span class="keyword">import</span> android.widget.Toast;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> com.alipay.sdk.app.EnvUtils;</div><div class="line"><span class="keyword">import</span> com.alipay.sdk.app.PayTask;</div><div class="line"><span class="keyword">import</span> com.ta.utdid2.android.utils.PhoneInfoUtils;</div><div class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.modelpay.PayReq;</div><div class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.IWXAPI;</div><div class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.WXAPIFactory;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> org.apache.http.conn.util.InetAddressUtils;</div><div class="line"><span class="keyword">import</span> org.json.JSONObject;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</div><div class="line"><span class="keyword">import</span> java.net.InetAddress;</div><div class="line"><span class="keyword">import</span> java.net.NetworkInterface;</div><div class="line"><span class="keyword">import</span> java.net.URLEncoder;</div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.Enumeration;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"><span class="keyword">import</span> java.util.Timer;</div><div class="line"><span class="keyword">import</span> java.util.TimerTask;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> rx.Subscriber;</div><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 支付宝或微信支付</div><div class="line"> * Created by zz on 2017/4/7.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PayActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> TextView tvCount;</div><div class="line">    <span class="keyword">private</span> ZzTitleBar titleBar;</div><div class="line">    <span class="keyword">private</span> TextView tvPay;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SDK_PAY_FLAG = <span class="number">1</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SDK_AUTH_FLAG = <span class="number">2</span>;</div><div class="line">    <span class="keyword">private</span> LinearLayout llAlipay;</div><div class="line">    <span class="keyword">private</span> LinearLayout llWxPay;</div><div class="line">    <span class="keyword">private</span> CheckBox cbAlipay;</div><div class="line">    <span class="keyword">private</span> CheckBox cbWxpay;</div><div class="line">  </div><div class="line">    <span class="comment">//微信支付部分</span></div><div class="line">    <span class="keyword">private</span> IWXAPI api;</div><div class="line">    <span class="keyword">private</span> TextView tvMinteShi;</div><div class="line">    <span class="keyword">private</span> TextView tvMinuteGe;</div><div class="line">    <span class="keyword">private</span> TextView tvSecondShi;</div><div class="line">    <span class="keyword">private</span> TextView tvSecondGe;</div><div class="line">    <span class="keyword">private</span> String time;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> Handler handler = <span class="keyword">new</span> Handler();</div><div class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                    countTime(time);</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">private</span> String orderId;</div><div class="line">    <span class="keyword">private</span> TextView tvProductName;</div><div class="line">    <span class="keyword">private</span> TextView tvNumber;</div><div class="line">    <span class="keyword">private</span> TextView tvType;</div><div class="line">    <span class="keyword">private</span> String orderNo;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLayoutId</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> R.layout.activity_alipay;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@SuppressLint</span>(<span class="string">"HandlerLeak"</span>)</div><div class="line">    <span class="keyword">private</span> Handler mHandler = <span class="keyword">new</span> Handler() &#123;</div><div class="line">        <span class="meta">@SuppressWarnings</span>(<span class="string">"unused"</span>)</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">            <span class="keyword">switch</span> (msg.what) &#123;</div><div class="line">                <span class="keyword">case</span> SDK_PAY_FLAG: &#123;</div><div class="line">                    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</div><div class="line">                    PayResult payResult = <span class="keyword">new</span> PayResult((Map&lt;String, String&gt;) msg.obj);</div><div class="line">                    <span class="comment">/**</span></div><div class="line">                     对于支付结果，请商户依赖服务端的异步通知结果。同步通知结果，仅作为支付结束的通知。</div><div class="line">                     */</div><div class="line">                    String resultInfo = payResult.getResult();<span class="comment">// 同步返回需要验证的信息</span></div><div class="line">                    String resultStatus = payResult.getResultStatus();</div><div class="line">                    <span class="comment">// 判断resultStatus 为9000则代表支付成功</span></div><div class="line">                    <span class="keyword">if</span> (TextUtils.equals(resultStatus, <span class="string">"9000"</span>)) &#123;</div><div class="line">                        <span class="comment">// 该笔订单是否真实支付成功，需要依赖服务端的异步通知。</span></div><div class="line">                        ToastUtils.showCustomBgToast(<span class="string">"支付成功！"</span>);</div><div class="line">                        Intent intent = <span class="keyword">new</span> Intent(PayActivity.<span class="keyword">this</span>, ShopMyOrderActivity.class);</div><div class="line">                        startActWithIntent(intent);</div><div class="line">                        closeAct();</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        <span class="comment">// 该笔订单真实的支付结果，需要依赖服务端的异步通知。</span></div><div class="line">                        <span class="keyword">switch</span> (resultStatus) &#123;</div><div class="line">                            <span class="keyword">case</span> <span class="string">"6001"</span>:</div><div class="line">                                ToastUtils.showCustomBgToast(<span class="string">"已取消支付操作"</span>);</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                            <span class="keyword">default</span>:</div><div class="line">                                ToastUtils.showCustomBgToast(<span class="string">"支付失败，错误代码："</span>+resultStatus);</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">default</span>:</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</div><div class="line">        titleBar = (ZzTitleBar) findViewById(R.id.title_bar);</div><div class="line">        tvCount = (TextView) findViewById(R.id.tv_count);</div><div class="line">        tvPay = (TextView) findViewById(R.id.tv_pay);</div><div class="line"> </div><div class="line">        tvType = (TextView) findViewById(R.id.tv_type);</div><div class="line"> </div><div class="line">        tvProductName = (TextView) findViewById(R.id.tv_product_name);</div><div class="line">        tvNumber = (TextView) findViewById(R.id.tv_number);</div><div class="line">  </div><div class="line">        llAlipay = (LinearLayout) findViewById(R.id.ll_alipay);</div><div class="line">        llWxPay = (LinearLayout) findViewById(R.id.ll_wxpay);</div><div class="line">   </div><div class="line">        cbAlipay = (CheckBox) findViewById(R.id.cb_alipay);</div><div class="line">        cbWxpay = (CheckBox) findViewById(R.id.cb_weixin_pay);</div><div class="line">  </div><div class="line">        tvMinteShi = (TextView) findViewById(R.id.tv_minute_shi);</div><div class="line">        tvMinuteGe = (TextView) findViewById(R.id.tv_minute_ge);</div><div class="line">        tvSecondShi = (TextView) findViewById(R.id.tv_second_shi);</div><div class="line">        tvSecondGe = (TextView) findViewById(R.id.tv_second_ge);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</div><div class="line">  </div><div class="line">        <span class="comment">//微信api</span></div><div class="line">        api = WXAPIFactory.createWXAPI(<span class="keyword">this</span>, Constants.APP_ID, <span class="keyword">false</span>);</div><div class="line">  </div><div class="line">        orderId = getIntent().getStringExtra(<span class="string">"orderId"</span>);</div><div class="line">        orderNo = getIntent().getStringExtra(<span class="string">"orderNo"</span>);</div><div class="line">        String productName = getIntent().getStringExtra(<span class="string">"productName"</span>);</div><div class="line">        String total = getIntent().getStringExtra(<span class="string">"total"</span>);</div><div class="line">        String number = getIntent().getStringExtra(<span class="string">"number"</span>);</div><div class="line">        String model = getIntent().getStringExtra(<span class="string">"model"</span>);</div><div class="line">  </div><div class="line">        tvType.setText(model);</div><div class="line">        tvProductName.setText(productName);</div><div class="line">        tvNumber.setText(number);</div><div class="line">        tvCount.setText(total);</div><div class="line">  </div><div class="line">        String createTime = getIntent().getStringExtra(<span class="string">"createTime"</span>);</div><div class="line">        time = DateUtil.getTimeAddMinute(createTime, <span class="number">16</span>);</div><div class="line">        <span class="keyword">if</span> (time == <span class="keyword">null</span>) &#123;</div><div class="line">            ToastUtils.showCustomBgToast(<span class="string">"订单超时或已取消"</span>);</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        handler.postDelayed(runnable, <span class="number">1000</span>);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">countTime</span><span class="params">(String time)</span> </span>&#123;</div><div class="line">        String curTime = DateUtil.getYearMonthDayHourMinuteSecond();</div><div class="line">        <span class="keyword">long</span> seconds = DateUtil.getSecondDuration(curTime, time);</div><div class="line">        <span class="keyword">if</span> (seconds &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">long</span> m = seconds / <span class="number">60</span>;</div><div class="line">            <span class="keyword">if</span> (m &lt; <span class="number">10</span>) &#123;</div><div class="line">                tvMinteShi.setText(<span class="string">"0"</span>);</div><div class="line">                tvMinuteGe.setText(<span class="string">""</span> + m);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                tvMinteShi.setText(<span class="string">""</span> + (m / <span class="number">10</span>));</div><div class="line">                tvMinuteGe.setText(<span class="string">""</span> + (m % <span class="number">10</span>));</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">long</span> s = seconds % <span class="number">60</span>;</div><div class="line">            <span class="keyword">if</span> (s &lt; <span class="number">10</span>) &#123;</div><div class="line">                tvSecondShi.setText(<span class="string">"0"</span>);</div><div class="line">                tvSecondGe.setText(<span class="string">""</span> + s);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                tvSecondShi.setText(<span class="string">""</span> + (s / <span class="number">10</span>));</div><div class="line">                tvSecondGe.setText(<span class="string">""</span> + (s % <span class="number">10</span>));</div><div class="line">            &#125;</div><div class="line">            handler.postDelayed(runnable, <span class="number">1000</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            handler.removeCallbacks(runnable);</div><div class="line">            ToastUtils.showCustomBgToast(<span class="string">"订单超时"</span>);</div><div class="line">            closeAct();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initEvent</span><span class="params">()</span> </span>&#123;</div><div class="line">        titleBar.setOnTitleBarClickListener(<span class="keyword">new</span> ZzTitleBar.OnTitleBarClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLeftClick</span><span class="params">()</span> </span>&#123;</div><div class="line">                closeAct();</div><div class="line">            &#125;</div><div class="line">  </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRightClick</span><span class="params">()</span> </span>&#123;</div><div class="line">  </div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">  </div><div class="line">        tvPay.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                <span class="keyword">if</span> (cbAlipay.isChecked()) &#123;</div><div class="line">                    payV2();</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    payVX();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">  </div><div class="line">        llAlipay.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                cbAlipay.setChecked(<span class="keyword">true</span>);</div><div class="line">                cbWxpay.setChecked(<span class="keyword">false</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">  </div><div class="line">        llWxPay.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                cbWxpay.setChecked(<span class="keyword">true</span>);</div><div class="line">                cbAlipay.setChecked(<span class="keyword">false</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">payVX</span><span class="params">()</span> </span>&#123;</div><div class="line">  </div><div class="line">        Api.getRegisterApi(HCApplication.getContext())</div><div class="line">                .vxPay(HCSharedUtil.getPhoneNumber(<span class="keyword">this</span>), orderId)</div><div class="line">                .compose(RxHelper.&lt;VxPayResult&gt;io_main())</div><div class="line">                .subscribe(<span class="keyword">new</span> Subscriber&lt;VxPayResult&gt;() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">  </div><div class="line">                    &#125;</div><div class="line">  </div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">                        ToastUtils.showCustomBgToast(getString(R.string.no_net_text) + e.toString());</div><div class="line">                    &#125;</div><div class="line">  </div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(VxPayResult vxPayResult)</span> </span>&#123;</div><div class="line">                        <span class="keyword">if</span> (vxPayResult.getCode().equals(<span class="string">"1"</span>)) &#123;</div><div class="line">                            PayReq req = <span class="keyword">new</span> PayReq();</div><div class="line">                            req.appId = vxPayResult.getData().getAppid();</div><div class="line">                            req.partnerId = vxPayResult.getData().getMch_id();</div><div class="line">                            req.prepayId = vxPayResult.getData().getPrepay_id();</div><div class="line">                            req.nonceStr = vxPayResult.getData().getOld_nonce_str();</div><div class="line">                            req.packageValue = <span class="string">"Sign=WXPay"</span>;</div><div class="line">                            req.sign = vxPayResult.getData().getOld_sign();</div><div class="line">                            req.timeStamp = vxPayResult.getData().getTimestamp();</div><div class="line">                            api.sendReq(req);</div><div class="line">                            closeAct();</div><div class="line">                        &#125; <span class="keyword">else</span> &#123;</div><div class="line">                            ToastUtils.showCustomBgToast(vxPayResult.getMsg());</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 支付宝支付业务</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">payV2</span><span class="params">()</span> </span>&#123;</div><div class="line">  </div><div class="line">        Api.getRegisterApi(HCApplication.getContext())</div><div class="line">                .aliPay(HCSharedUtil.getPhoneNumber(<span class="keyword">this</span>), orderId)</div><div class="line">                .compose(RxHelper.&lt;AliPayResult&gt;io_main())</div><div class="line">                .subscribe(<span class="keyword">new</span> Subscriber&lt;AliPayResult&gt;() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">  </div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">                        ToastUtils.showCustomBgToast(getString(R.string.no_net_text) + e.toString());</div><div class="line">                    &#125;</div><div class="line">  </div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(AliPayResult aliPayResult)</span> </span>&#123;</div><div class="line">                        <span class="keyword">if</span> (aliPayResult.getCode().equals(<span class="string">"1"</span>)) &#123;</div><div class="line">                            <span class="keyword">final</span> String orderInfo = aliPayResult.getOrderInfo();</div><div class="line">  </div><div class="line">                            Runnable payRunnable = <span class="keyword">new</span> Runnable() &#123;</div><div class="line">                                <span class="meta">@Override</span></div><div class="line">                                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                                    PayTask alipay = <span class="keyword">new</span> PayTask(PayActivity.<span class="keyword">this</span>);</div><div class="line">                                    Map&lt;String, String&gt; result = alipay.payV2(orderInfo, <span class="keyword">true</span>);</div><div class="line">  </div><div class="line">                                    Message msg = <span class="keyword">new</span> Message();</div><div class="line">                                    msg.what = SDK_PAY_FLAG;</div><div class="line">                                    msg.obj = result;</div><div class="line">                                    mHandler.sendMessage(msg);</div><div class="line">                                &#125;</div><div class="line">                            &#125;;</div><div class="line">  </div><div class="line">                            Thread payThread = <span class="keyword">new</span> Thread(payRunnable);</div><div class="line">                            payThread.start();</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">  </div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveState</span><span class="params">(Bundle bundle)</span> </span>&#123;</div><div class="line">  </div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">restoreState</span><span class="params">(Bundle bundle)</span> </span>&#123;</div><div class="line">  </div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDefaultBackClose</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125; </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onDestroy();</div><div class="line">        handler.removeCallbacks(runnable);</div><div class="line">        handler.removeCallbacksAndMessages(<span class="keyword">null</span>);</div><div class="line">        handler = <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h2><ul>
<li>支付宝支付后台需要<em>支付宝公钥</em>和<em>app私钥</em>。</li>
<li>支付宝支付App公私钥加密格式：Java和非Java。</li>
<li>微信商户平台需要设置API密钥。</li>
<li>微信支付后台需要二次签名。</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Android常用代码 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Git常见问题-Android Studio重新分享项目到Github提示项目已存在]]></title>
      <url>/2017/10/16/Git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-Android-Studio%E9%87%8D%E6%96%B0%E5%88%86%E4%BA%AB%E9%A1%B9%E7%9B%AE%E5%88%B0Github%E6%8F%90%E7%A4%BA%E9%A1%B9%E7%9B%AE%E5%B7%B2%E5%AD%98%E5%9C%A8/</url>
      <content type="html"><![CDATA[<ul>
<li>打开Git Bash</li>
<li>cd ${项目跟目录}</li>
<li>git remote rm origin</li>
<li>git remote add origin git@github.com:${用户名}/${项目名}</li>
<li>vi .git/config</li>
<li>删除[remote “origin”]那一行<br>(vi操作方法，输入i进入输入模式，删除该行之后，按下Esc，输入”:wq”保存并退出)</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Git常见问题 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Git </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android开源控件-常用控件地址]]></title>
      <url>/2017/10/12/Android%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6%E5%9C%B0%E5%9D%80/</url>
      <content type="html"><![CDATA[<h2 id="图片加载"><a href="#图片加载" class="headerlink" title="图片加载"></a>图片加载</h2><h3 id="Glide"><a href="#Glide" class="headerlink" title="Glide"></a>Glide</h3><p><a href="https://github.com/bumptech/glide" target="_blank" rel="external">https://github.com/bumptech/glide</a></p>
<h2 id="网络框架"><a href="#网络框架" class="headerlink" title="网络框架"></a>网络框架</h2><h3 id="Okhttp"><a href="#Okhttp" class="headerlink" title="Okhttp"></a>Okhttp</h3><p><a href="https://github.com/square/okhttp" target="_blank" rel="external">https://github.com/square/okhttp</a></p>
<h3 id="Retrofit"><a href="#Retrofit" class="headerlink" title="Retrofit"></a>Retrofit</h3><p><a href="https://github.com/square/retrofit" target="_blank" rel="external">https://github.com/square/retrofit</a></p>
<h3 id="Okhttp-OkGo"><a href="#Okhttp-OkGo" class="headerlink" title="Okhttp-OkGo"></a>Okhttp-OkGo</h3><p><a href="https://github.com/jeasonlzy/okhttp-OkGo" target="_blank" rel="external">https://github.com/jeasonlzy/okhttp-OkGo</a></p>
<h3 id="NoHttp"><a href="#NoHttp" class="headerlink" title="NoHttp"></a>NoHttp</h3><p><a href="https://github.com/yanzhenjie/NoHttp" target="_blank" rel="external">https://github.com/yanzhenjie/NoHttp</a></p>
<a id="more"></a>
<h2 id="线程调度"><a href="#线程调度" class="headerlink" title="线程调度"></a>线程调度</h2><h3 id="RxJava"><a href="#RxJava" class="headerlink" title="RxJava"></a>RxJava</h3><p><a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="external">https://github.com/ReactiveX/RxJava</a></p>
<h3 id="RxAndroid"><a href="#RxAndroid" class="headerlink" title="RxAndroid"></a>RxAndroid</h3><p><a href="https://github.com/ReactiveX/RxAndroid" target="_blank" rel="external">https://github.com/ReactiveX/RxAndroid</a></p>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="GreenDao"><a href="#GreenDao" class="headerlink" title="GreenDao"></a>GreenDao</h3><p><a href="https://github.com/greenrobot/greenDAO" target="_blank" rel="external">https://github.com/greenrobot/greenDAO</a></p>
<h3 id="Realm-Java"><a href="#Realm-Java" class="headerlink" title="Realm-Java"></a>Realm-Java</h3><p><a href="https://github.com/realm/realm-java" target="_blank" rel="external">https://github.com/realm/realm-java</a></p>
<h3 id="xUtils3"><a href="#xUtils3" class="headerlink" title="xUtils3"></a>xUtils3</h3><p><a href="https://github.com/wyouflf/xUtils3" target="_blank" rel="external">https://github.com/wyouflf/xUtils3</a></p>
<h2 id="系统特性"><a href="#系统特性" class="headerlink" title="系统特性"></a>系统特性</h2><h3 id="6-0动态权限"><a href="#6-0动态权限" class="headerlink" title="6.0动态权限"></a>6.0动态权限</h3><h4 id="AndPermission"><a href="#AndPermission" class="headerlink" title="AndPermission"></a>AndPermission</h4><p><a href="https://github.com/yanzhenjie/AndPermission" target="_blank" rel="external">https://github.com/yanzhenjie/AndPermission</a></p>
<h4 id="RxPermissions"><a href="#RxPermissions" class="headerlink" title="RxPermissions"></a>RxPermissions</h4><p><a href="https://github.com/tbruyelle/RxPermissions" target="_blank" rel="external">https://github.com/tbruyelle/RxPermissions</a></p>
<h2 id="UI控件"><a href="#UI控件" class="headerlink" title="UI控件"></a>UI控件</h2><h3 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h3><h4 id="Banner"><a href="#Banner" class="headerlink" title="Banner"></a>Banner</h4><p><a href="https://github.com/youth5201314/banner" target="_blank" rel="external">https://github.com/youth5201314/banner</a></p>
<h3 id="下拉刷新上拉加载"><a href="#下拉刷新上拉加载" class="headerlink" title="下拉刷新上拉加载"></a>下拉刷新上拉加载</h3><h4 id="SmartRefreshLayout"><a href="#SmartRefreshLayout" class="headerlink" title="SmartRefreshLayout"></a>SmartRefreshLayout</h4><p><a href="https://github.com/scwang90/SmartRefreshLayout" target="_blank" rel="external">https://github.com/scwang90/SmartRefreshLayout</a></p>
<h3 id="图表"><a href="#图表" class="headerlink" title="图表"></a>图表</h3><h4 id="MPAndroidChart"><a href="#MPAndroidChart" class="headerlink" title="MPAndroidChart"></a>MPAndroidChart</h4><p><a href="https://github.com/PhilJay/MPAndroidChart" target="_blank" rel="external">https://github.com/PhilJay/MPAndroidChart</a></p>
<h4 id="Hellocharts-android"><a href="#Hellocharts-android" class="headerlink" title="Hellocharts-android"></a>Hellocharts-android</h4><p><a href="https://github.com/lecho/hellocharts-android" target="_blank" rel="external">https://github.com/lecho/hellocharts-android</a></p>
<h3 id="多功能列表"><a href="#多功能列表" class="headerlink" title="多功能列表"></a>多功能列表</h3><h4 id="SwipeRecyclerView"><a href="#SwipeRecyclerView" class="headerlink" title="SwipeRecyclerView"></a>SwipeRecyclerView</h4><p><a href="https://github.com/yanzhenjie/SwipeRecyclerView" target="_blank" rel="external">https://github.com/yanzhenjie/SwipeRecyclerView</a></p>
<h4 id="BaseRecyclerViewAdapterHelper"><a href="#BaseRecyclerViewAdapterHelper" class="headerlink" title="BaseRecyclerViewAdapterHelper"></a>BaseRecyclerViewAdapterHelper</h4><p><a href="https://github.com/CymChad/BaseRecyclerViewAdapterHelper" target="_blank" rel="external">https://github.com/CymChad/BaseRecyclerViewAdapterHelper</a></p>
]]></content>
      
        <categories>
            
            <category> Android开源控件 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android常用代码-多图测试数据集合]]></title>
      <url>/2017/10/12/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%A4%9A%E5%9B%BE%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E9%9B%86%E5%90%88/</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; data = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">data.add(<span class="string">"http://p1.so.qhmsg.com/dmfd/326_204_/t01ad675c2d6620f626.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p4.so.qhmsg.com/dmfd/326_204_/t01e7b8da6f7881d669.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p2.so.qhimgs1.com/dmfd/326_204_/t016b83625d3693e592.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p0.so.qhimgs1.com/dmfd/326_204_/t019a8f0f4789b91170.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p1.so.qhimgs1.com/dmfd/326_204_/t01da7b6be4c2e7485d.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p4.so.qhimgs1.com/dmfd/326_204_/t016122ec45c5fdc5fa.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p0.so.qhmsg.com/dmfd/326_204_/t015ba6df95da81c21f.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p0.so.qhimgs1.com/dmfd/326_204_/t012c852c8f981d6a00.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p4.so.qhimgs1.com/dmfd/326_204_/t01bc3afb43b885f79a.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p2.so.qhmsg.com/dmfd/326_204_/t016f319fe697b397a7.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p4.so.qhmsg.com/dmfd/326_204_/t01260296831eb4e1c9.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p2.so.qhimgs1.com/dmfd/326_204_/t01f70e3d434b658072.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p1.so.qhimgs1.com/dmfd/326_204_/t01ff382f9ac4ff3b41.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p3.so.qhimgs1.com/dmfd/326_204_/t0136c51e038b8eb443.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p4.so.qhimgs1.com/dmfd/326_204_/t01510b700b852c19ea.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p2.so.qhmsg.com/dmfd/326_204_/t01ee2021295046db97.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p2.so.qhimgs1.com/dmfd/326_204_/t011827d91512e21f1e.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p4.so.qhimgs1.com/dmfd/326_204_/t01e0d10a1d9c967b6a.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p5.so.qhimgs1.com/dmfd/326_204_/t014dee2f747c97027b.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p0.so.qhmsg.com/dmfd/326_204_/t015937ffe391b99cbf.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p2.so.qhimgs1.com/dmfd/326_204_/t01c8781008ac43b8b2.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p0.so.qhimgs1.com/dmfd/326_204_/t0157cf838838b73380.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p2.so.qhimgs1.com/dmfd/326_204_/t01486d9595e7e72a7e.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p1.so.qhmsg.com/dmfd/326_204_/t016ddb799a12726bc6.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p4.so.qhimgs1.com/dmfd/326_204_/t01cbfab89caa120e9a.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p0.so.qhmsg.com/dmfd/326_204_/t01fd0af7e89abd4615.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p2.so.qhimgs1.com/dmfd/326_204_/t0155c730d796084202.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p0.so.qhmsg.com/dmfd/326_204_/t01007ed5e564c9c99f.jpg"</span>);</div><div class="line">data.add(<span class="string">"http://p1.so.qhimgs1.com/dmfd/326_204_/t0127d36bd652e5f6ed.jpg"</span>);</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android常用代码 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android常用代码-切换主题]]></title>
      <url>/2017/10/12/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98/</url>
      <content type="html"><![CDATA[<h3 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setThemeColor</span><span class="params">(<span class="keyword">int</span> colorPrimary, <span class="keyword">int</span> colorPrimaryDark)</span> </span>&#123;</div><div class="line">    mToolbar.setBackgroundResource(colorPrimary);</div><div class="line">    mToolbar.setTitleTextColor(ContextCompat.getColor(<span class="keyword">this</span>, android.R.color.white));</div><div class="line">    mToolbar.setNavigationIcon(R.drawable.ic_arrow_back_white_24dp);</div><div class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">21</span>) &#123;</div><div class="line">        getWindow().setStatusBarColor(ContextCompat.getColor(<span class="keyword">this</span>, colorPrimaryDark));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">23</span>) &#123;</div><div class="line">        Window window = getWindow();</div><div class="line">        <span class="keyword">int</span> systemUiVisibility = window.getDecorView().getSystemUiVisibility();</div><div class="line">        systemUiVisibility &amp;= ~View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;</div><div class="line">        window.getDecorView().setSystemUiVisibility(systemUiVisibility);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">setThemeColor(R.color.colorPrimary, R.color.colorPrimaryDark);</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android常用代码 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-ViewPager+PhotoView问题]]></title>
      <url>/2017/10/11/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-ViewPager-PhotoView%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h2 id="版本说明"><a href="#版本说明" class="headerlink" title="版本说明"></a>版本说明</h2><p>PhotoView版本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//photoView</div><div class="line">compile &apos;com.mcxiaoke.photoview:library:1.2.3&apos;</div></pre></td></tr></table></figure>
<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><ul>
<li>ViewPager+PhotoView缩放操作时报错</li>
<li>ViewPager+PhotoView左右滑动图片加载错位</li>
<li>指定显示第几张图片</li>
</ul>
<a id="more"></a>
<h2 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a>解决方式</h2><h3 id="重写ViewPager的onInterceptTouchEvent方法"><a href="#重写ViewPager的onInterceptTouchEvent方法" class="headerlink" title="重写ViewPager的onInterceptTouchEvent方法"></a>重写ViewPager的onInterceptTouchEvent方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.onInterceptTouchEvent(ev);</div><div class="line">	&#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</div><div class="line">		e.printStackTrace();</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="定义Adapter"><a href="#定义Adapter" class="headerlink" title="定义Adapter"></a>定义Adapter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MultiImagePageAdapter</span> <span class="keyword">extends</span> <span class="title">PagerAdapter</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> PhotoViewAttacher.OnViewTapListener onViewTapListener;</div><div class="line">  </div><div class="line">    <span class="comment">//设置点击任意一张图片结束预览</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnViewTapListener</span><span class="params">(PhotoViewAttacher.OnViewTapListener onViewTapListener)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.onViewTapListener = onViewTapListener;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> DisplayImageOptions options;</div><div class="line">    <span class="keyword">private</span> List&lt;String&gt; imgs;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MultiImagePageAdapter</span><span class="params">(List&lt;String&gt; imgs)</span> </span>&#123;</div><div class="line">        options = <span class="keyword">new</span> DisplayImageOptions.Builder()</div><div class="line">                .showImageOnLoading(R.drawable.product_default)</div><div class="line">                .showImageForEmptyUri(R.drawable.product_default)</div><div class="line">                .showImageOnFail(R.drawable.product_default)</div><div class="line">                .bitmapConfig(Bitmap.Config.ARGB_8888)</div><div class="line">                .imageScaleType(ImageScaleType.EXACTLY)</div><div class="line">                .cacheInMemory(<span class="keyword">true</span>)</div><div class="line">                .cacheOnDisk(<span class="keyword">true</span>)</div><div class="line">                .build();</div><div class="line">        <span class="keyword">this</span>.imgs = imgs;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> imgs == <span class="keyword">null</span> ? <span class="number">0</span> : imgs.size();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isViewFromObject</span><span class="params">(View view, Object object)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> view == object;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">instantiateItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        PhotoView photoView = <span class="keyword">new</span> PhotoView(container.getContext());</div><div class="line">        <span class="comment">//关键</span></div><div class="line">        container.addView(photoView, ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);</div><div class="line">        photoView.setScaleType(ImageView.ScaleType.FIT_CENTER);</div><div class="line">        photoView.setOnViewTapListener(onViewTapListener);</div><div class="line">        <span class="comment">//网络加载</span></div><div class="line">        HCApplication.getImageLoader().displayImage(imgs.get(position), photoView, options);</div><div class="line">        <span class="keyword">return</span> photoView;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position, Object object)</span> </span>&#123;</div><div class="line">    	<span class="comment">//别忘了</span></div><div class="line">        container.removeView((View) object);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">com.keqiang.highcloud.view.widget.HackyViewPager</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/view_pager"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line">  </div><div class="line"><span class="tag">&lt;/<span class="name">com.keqiang.highcloud.view.widget.HackyViewPager</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; imgs = getIntent().getStringArrayListExtra(<span class="string">"imgs"</span>);</div><div class="line"><span class="keyword">int</span> position = getIntent().getIntExtra(<span class="string">"position"</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">if</span> (imgs != <span class="keyword">null</span> &amp;&amp; imgs.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">    MultiImagePageAdapter adapter = <span class="keyword">new</span> MultiImagePageAdapter(imgs);</div><div class="line">    adapter.setOnViewTapListener(<span class="keyword">new</span> PhotoViewAttacher.OnViewTapListener() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewTap</span><span class="params">(View view, <span class="keyword">float</span> x, <span class="keyword">float</span> y)</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">21</span>) &#123;</div><div class="line">                onBackPressed();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                closeAct();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    viewPager.setAdapter(adapter);</div><div class="line">    viewPager.setCurrentItem(position);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Intent intent = <span class="keyword">new</span> Intent(activity, MultiImagePreviewActivity.class);</div><div class="line"><span class="comment">//传入图片和位置信息</span></div><div class="line">intent.putExtra(<span class="string">"imgs"</span>, imgs);</div><div class="line">intent.putExtra(<span class="string">"position"</span>, position);</div><div class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">21</span>) &#123;</div><div class="line">    ActivityOptionsCompat options = ActivityOptionsCompat.makeSceneTransitionAnimation(activity,</div><div class="line">            banner, getString(R.string.transition_product_img));</div><div class="line">    ActivityCompat.startActivity(activity, intent, options.toBundle());</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    startActWithIntent(intent);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Activity实例"><a href="#Activity实例" class="headerlink" title="Activity实例"></a>Activity实例</h3><ul>
<li>布局</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/root"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:background</span>=<span class="string">"@color/colorBlack"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">com.keqiang.highcloud.view.widget.HackyViewPager</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/view_pager"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line">  </div><div class="line">    <span class="tag">&lt;/<span class="name">com.keqiang.highcloud.view.widget.HackyViewPager</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> android.graphics.Bitmap;</div><div class="line"><span class="keyword">import</span> android.os.Build;</div><div class="line"><span class="keyword">import</span> android.os.Bundle;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.PagerAdapter;</div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.view.ViewGroup;</div><div class="line"><span class="keyword">import</span> android.widget.ImageView;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> com.nostra13.universalimageloader.core.DisplayImageOptions;</div><div class="line"><span class="keyword">import</span> com.nostra13.universalimageloader.core.assist.ImageScaleType;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> uk.co.senab.photoview.PhotoView;</div><div class="line"><span class="keyword">import</span> uk.co.senab.photoview.PhotoViewAttacher;</div><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by zhouzhuo810 on 2017/10/11.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MultiImagePreviewActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> HackyViewPager viewPager;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLayoutId</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> R.layout.activity_multi_img_preview;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</div><div class="line">        viewPager = (HackyViewPager) findViewById(R.id.view_pager);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</div><div class="line">  </div><div class="line">        List&lt;String&gt; imgs = getIntent().getStringArrayListExtra(<span class="string">"imgs"</span>);</div><div class="line">        <span class="keyword">int</span> position = getIntent().getIntExtra(<span class="string">"position"</span>, <span class="number">0</span>);</div><div class="line">        <span class="keyword">if</span> (imgs != <span class="keyword">null</span> &amp;&amp; imgs.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">            MultiImagePageAdapter adapter = <span class="keyword">new</span> MultiImagePageAdapter(imgs);</div><div class="line">            adapter.setOnViewTapListener(<span class="keyword">new</span> PhotoViewAttacher.OnViewTapListener() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewTap</span><span class="params">(View view, <span class="keyword">float</span> x, <span class="keyword">float</span> y)</span> </span>&#123;</div><div class="line">                    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">21</span>) &#123;</div><div class="line">                        onBackPressed();</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        closeAct();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">            viewPager.setAdapter(adapter);</div><div class="line">            viewPager.setCurrentItem(position);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MultiImagePageAdapter</span> <span class="keyword">extends</span> <span class="title">PagerAdapter</span> </span>&#123;</div><div class="line">  </div><div class="line">        <span class="keyword">private</span> PhotoViewAttacher.OnViewTapListener onViewTapListener;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnViewTapListener</span><span class="params">(PhotoViewAttacher.OnViewTapListener onViewTapListener)</span> </span>&#123;</div><div class="line">            <span class="keyword">this</span>.onViewTapListener = onViewTapListener;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="keyword">private</span> <span class="keyword">final</span> DisplayImageOptions options;</div><div class="line">        <span class="keyword">private</span> List&lt;String&gt; imgs;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MultiImagePageAdapter</span><span class="params">(List&lt;String&gt; imgs)</span> </span>&#123;</div><div class="line">            options = <span class="keyword">new</span> DisplayImageOptions.Builder()</div><div class="line">                    .showImageOnLoading(R.drawable.product_default)</div><div class="line">                    .showImageForEmptyUri(R.drawable.product_default)</div><div class="line">                    .showImageOnFail(R.drawable.product_default)</div><div class="line">                    .bitmapConfig(Bitmap.Config.ARGB_8888)</div><div class="line">                    .imageScaleType(ImageScaleType.EXACTLY)</div><div class="line">                    .cacheInMemory(<span class="keyword">true</span>)</div><div class="line">                    .cacheOnDisk(<span class="keyword">true</span>)</div><div class="line">                    .build();</div><div class="line">            <span class="keyword">this</span>.imgs = imgs;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> imgs == <span class="keyword">null</span> ? <span class="number">0</span> : imgs.size();</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isViewFromObject</span><span class="params">(View view, Object object)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> view == object;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> Object <span class="title">instantiateItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">            PhotoView photoView = <span class="keyword">new</span> PhotoView(container.getContext());</div><div class="line">            container.addView(photoView, ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);</div><div class="line">            photoView.setScaleType(ImageView.ScaleType.FIT_CENTER);</div><div class="line">            photoView.setOnViewTapListener(onViewTapListener);</div><div class="line">            HCApplication.getImageLoader().displayImage(imgs.get(position), photoView, options);</div><div class="line">            <span class="keyword">return</span> photoView;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position, Object object)</span> </span>&#123;</div><div class="line">            container.removeView((View) object);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initEvent</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveState</span><span class="params">(Bundle bundle)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">restoreState</span><span class="params">(Bundle bundle)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDefaultBackClose</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaEE-Tomcat使用服务开机自启动]]></title>
      <url>/2017/10/04/JavaEE-Tomcat%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8/</url>
      <content type="html"><![CDATA[<h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><ul>
<li>JDK和Tomcat同为32位或同为64位。</li>
<li>配置JDK环境变量。</li>
<li>配置Tomcat环境变量。</li>
</ul>
<a id="more"></a>
<h2 id="设置服务"><a href="#设置服务" class="headerlink" title="设置服务"></a>设置服务</h2><ul>
<li>打开cmd</li>
<li>切换到tomcat bin目录</li>
<li>运行下列命令</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service.bat install Tomcat</div></pre></td></tr></table></figure>
<h2 id="卸载服务"><a href="#卸载服务" class="headerlink" title="卸载服务"></a>卸载服务</h2><ul>
<li>打开cmd</li>
<li>切换到tomcat bin目录</li>
<li>运行下列命令</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service.bat uninstall Tomcat</div></pre></td></tr></table></figure>
<h2 id="设置服务开机自启动"><a href="#设置服务开机自启动" class="headerlink" title="设置服务开机自启动"></a>设置服务开机自启动</h2><ul>
<li>打开服务管理</li>
<li>设置为自动，应用。</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Tomcat </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-根据资源名称获取资源Id]]></title>
      <url>/2017/10/04/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E6%A0%B9%E6%8D%AE%E8%B5%84%E6%BA%90%E5%90%8D%E7%A7%B0%E8%8E%B7%E5%8F%96%E8%B5%84%E6%BA%90Id/</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Resources resources = context.getResources();</div><div class="line"><span class="keyword">int</span> id= getResources().getIdentifier(<span class="string">"图标名称(不带后缀)"</span>, <span class="string">"drawable"</span>, <span class="string">"包名"</span>);</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ul>
<li>用数字图片表示剩余天数</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setLeftDays</span><span class="params">(<span class="keyword">int</span> days)</span> </span>&#123;</div><div class="line">    String dayStr = Integer.toString(days);</div><div class="line">    llLeftDays.removeAllViews();</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=dayStr.length()-<span class="number">1</span>; i&gt;<span class="number">0</span>; i--) &#123;</div><div class="line">        <span class="keyword">int</span> d = (<span class="keyword">int</span>) (days / (Math.pow(<span class="number">10</span>, i)));</div><div class="line">        <span class="keyword">int</span> s = d%<span class="number">10</span>;</div><div class="line">        ImageView iv = <span class="keyword">new</span> ImageView(context);</div><div class="line">        iv.setImageResource(getResources().getIdentifier(<span class="string">"image_number"</span>+s, <span class="string">"drawable"</span>, <span class="string">"me.zhouzhuo810.test"</span>));</div><div class="line">        iv.setLayoutParams(<span class="keyword">new</span> LinearLayout.LayoutParams(ViewUtil.scaleTextValue(context, <span class="number">52</span>)</div><div class="line">                ,ViewUtil.scaleTextValue(context, <span class="number">64</span>)));</div><div class="line">        llLeftDays.addView(iv);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> l = days%<span class="number">10</span>;</div><div class="line">    ImageView iv = <span class="keyword">new</span> ImageView(context);</div><div class="line">    iv.setImageResource(getResources().getIdentifier(<span class="string">"image_number"</span>+l, <span class="string">"drawable"</span>, <span class="string">"me.zhouzhuo810.test"</span>));</div><div class="line">    iv.setLayoutParams(<span class="keyword">new</span> LinearLayout.LayoutParams(ViewUtil.scaleTextValue(context, <span class="number">52</span>)</div><div class="line">            ,ViewUtil.scaleTextValue(context, <span class="number">64</span>)));</div><div class="line">    llLeftDays.addView(iv);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="工具封装"><a href="#工具封装" class="headerlink" title="工具封装"></a>工具封装</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 资源文件工具类</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourcesUtils</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String RES_ID = <span class="string">"id"</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String RES_STRING = <span class="string">"string"</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String RES_DRABLE = <span class="string">"drable"</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String RES_LAYOUT = <span class="string">"layout"</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String RES_STYLE = <span class="string">"style"</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String RES_COLOR = <span class="string">"color"</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String RES_DIMEN = <span class="string">"dimen"</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String RES_ANIM = <span class="string">"anim"</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String RES_MENU = <span class="string">"menu"</span>;</div><div class="line">	</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取资源文件的id</div><div class="line">	 * <span class="doctag">@param</span> context</div><div class="line">	 * <span class="doctag">@param</span> resName</div><div class="line">	 * <span class="doctag">@return</span></div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">(Context context,String resName)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> getResId(context,resName,RES_ID);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取资源文件string的id</div><div class="line">	 * <span class="doctag">@param</span> context</div><div class="line">	 * <span class="doctag">@param</span> resName</div><div class="line">	 * <span class="doctag">@return</span></div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getStringId</span><span class="params">(Context context,String resName)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> getResId(context,resName,RES_STRING);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取资源文件drable的id</div><div class="line">	 * <span class="doctag">@param</span> context</div><div class="line">	 * <span class="doctag">@param</span> resName</div><div class="line">	 * <span class="doctag">@return</span></div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getDrableId</span><span class="params">(Context context,String resName)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> getResId(context,resName,RES_DRABLE);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取资源文件layout的id</div><div class="line">	 * <span class="doctag">@param</span> context</div><div class="line">	 * <span class="doctag">@param</span> resName</div><div class="line">	 * <span class="doctag">@return</span></div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getLayoutId</span><span class="params">(Context context,String resName)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> getResId(context,resName,RES_LAYOUT);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取资源文件style的id</div><div class="line">	 * <span class="doctag">@param</span> context</div><div class="line">	 * <span class="doctag">@param</span> resName</div><div class="line">	 * <span class="doctag">@return</span></div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getStyleId</span><span class="params">(Context context,String resName)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> getResId(context,resName,RES_STYLE);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取资源文件color的id</div><div class="line">	 * <span class="doctag">@param</span> context</div><div class="line">	 * <span class="doctag">@param</span> resName</div><div class="line">	 * <span class="doctag">@return</span></div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getColorId</span><span class="params">(Context context,String resName)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> getResId(context,resName,RES_COLOR);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取资源文件dimen的id</div><div class="line">	 * <span class="doctag">@param</span> context</div><div class="line">	 * <span class="doctag">@param</span> resName</div><div class="line">	 * <span class="doctag">@return</span></div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getDimenId</span><span class="params">(Context context,String resName)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> getResId(context,resName,RES_DIMEN);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取资源文件ainm的id</div><div class="line">	 * <span class="doctag">@param</span> context</div><div class="line">	 * <span class="doctag">@param</span> resName</div><div class="line">	 * <span class="doctag">@return</span></div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getAnimId</span><span class="params">(Context context,String resName)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> getResId(context,resName,RES_ANIM);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取资源文件menu的id</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getMenuId</span><span class="params">(Context context,String resName)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> getResId(context,resName,RES_MENU);</div><div class="line">	&#125;</div><div class="line">	 </div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取资源文件ID</div><div class="line">	 * <span class="doctag">@param</span> context</div><div class="line">	 * <span class="doctag">@param</span> resName</div><div class="line">	 * <span class="doctag">@param</span> defType</div><div class="line">	 * <span class="doctag">@return</span></div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getResId</span><span class="params">(Context context,String resName,String defType)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> context.getResources().getIdentifier(resName, defType, context.getPackageName());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
    </entry>
    
    <entry>
      <title><![CDATA[Android支付宝支付-返回签名错误问题]]></title>
      <url>/2017/09/30/Android%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98-%E8%BF%94%E5%9B%9E%E7%AD%BE%E5%90%8D%E9%94%99%E8%AF%AF%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="首先，检查服务端公钥是否为支付宝公钥。（不是App公钥）。"><a href="#首先，检查服务端公钥是否为支付宝公钥。（不是App公钥）。" class="headerlink" title="首先，检查服务端公钥是否为支付宝公钥。（不是App公钥）。"></a>首先，检查服务端公钥是否为支付宝公钥。（不是App公钥）。</h3><h3 id="其次，检查服务端APP私钥是否和支付宝平台的APP公钥匹配-推荐RSA2-；"><a href="#其次，检查服务端APP私钥是否和支付宝平台的APP公钥匹配-推荐RSA2-；" class="headerlink" title="其次，检查服务端APP私钥是否和支付宝平台的APP公钥匹配(推荐RSA2)；"></a>其次，检查服务端APP私钥是否和支付宝平台的APP公钥匹配(推荐RSA2)；</h3><h3 id="最后，沙箱环境是否注释。"><a href="#最后，沙箱环境是否注释。" class="headerlink" title="最后，沙箱环境是否注释。"></a>最后，沙箱环境是否注释。</h3>]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android微信支付返回-1问题解决]]></title>
      <url>/2017/09/30/Android%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E8%BF%94%E5%9B%9E-1%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      <content type="html"><![CDATA[<h2 id="整体流程回顾"><a href="#整体流程回顾" class="headerlink" title="整体流程回顾"></a>整体流程回顾</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">  </div><div class="line">商户系统和微信支付系统主要交互说明：</div><div class="line">  </div><div class="line">步骤1：用户在商户APP中选择商品，提交订单，选择微信支付。</div><div class="line">  </div><div class="line">步骤2：商户后台收到用户支付单，调用微信支付统一下单接口。参见【统一下单API】。</div><div class="line">  </div><div class="line">步骤3：统一下单接口返回正常的prepay_id，再按签名规范重新生成签名后，将数据传输给APP。参与签名的字段名为appid，partnerid，prepayid，noncestr，timestamp，package。注意：package的值格式为Sign=WXPay </div><div class="line">  </div><div class="line">步骤4：商户APP调起微信支付。api参见本章节【app端开发步骤说明】</div><div class="line">  </div><div class="line">步骤5：商户后台接收支付通知。api参见【支付结果通知API】</div><div class="line">  </div><div class="line">步骤6：商户后台查询支付结果。，api参见【查询订单API】</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h2><h3 id="首先，检查微信平台的APP-ID是否正确；"><a href="#首先，检查微信平台的APP-ID是否正确；" class="headerlink" title="首先，检查微信平台的APP ID是否正确；"></a>首先，检查微信平台的APP ID是否正确；</h3><h3 id="其次，检查微信商户平台的API密钥-随机32位即可-是否设置且正确使用；"><a href="#其次，检查微信商户平台的API密钥-随机32位即可-是否设置且正确使用；" class="headerlink" title="其次，检查微信商户平台的API密钥(随机32位即可)是否设置且正确使用；"></a>其次，检查微信商户平台的API密钥(随机32位即可)是否设置且正确使用；</h3><p><a href="https://suijimimashengcheng.51240.com/" target="_blank" rel="external">随机字符串生成地址</a></p>
<h3 id="然后，检查微信平台的包名和签名-注意字母小写-是否配置并正确；"><a href="#然后，检查微信平台的包名和签名-注意字母小写-是否配置并正确；" class="headerlink" title="然后，检查微信平台的包名和签名(注意字母小写)是否配置并正确；"></a>然后，检查微信平台的包名和签名(注意字母小写)是否配置并正确；</h3><h3 id="再然后，检查服务端是否二次签名；并且二次签名是否正确；"><a href="#再然后，检查服务端是否二次签名；并且二次签名是否正确；" class="headerlink" title="再然后，检查服务端是否二次签名；并且二次签名是否正确；"></a>再然后，检查服务端是否二次签名；并且二次签名是否正确；</h3><h3 id="最后，检查返回的时间戳是不是使用二次签名的时间戳；"><a href="#最后，检查返回的时间戳是不是使用二次签名的时间戳；" class="headerlink" title="最后，检查返回的时间戳是不是使用二次签名的时间戳；"></a>最后，检查返回的时间戳是不是使用二次签名的时间戳；</h3><h3 id="返回的随机字符串是不是二次签名时的随机字符串。"><a href="#返回的随机字符串是不是二次签名时的随机字符串。" class="headerlink" title="返回的随机字符串是不是二次签名时的随机字符串。"></a>返回的随机字符串是不是二次签名时的随机字符串。</h3>]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android常用demo-微信支付]]></title>
      <url>/2017/09/13/Android%E5%B8%B8%E7%94%A8demo-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/</url>
      <content type="html"><![CDATA[<h2 id="微信支付"><a href="#微信支付" class="headerlink" title="微信支付"></a>微信支付</h2><p><a href="http://pan.baidu.com/s/1hszQj0w" target="_blank" rel="external">百度云下载</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">提取码： 79nk</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Android常用demo </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaEE-文件存储]]></title>
      <url>/2017/09/07/JavaEE-%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8/</url>
      <content type="html"><![CDATA[<h2 id="文件存储工具整理"><a href="#文件存储工具整理" class="headerlink" title="文件存储工具整理"></a>文件存储工具整理</h2><ul>
<li>随机名字存储</li>
<li>指定文件名存储</li>
<li>字节存储</li>
</ul>
<a id="more"></a>
<h3 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestContextHolder;</div><div class="line"><span class="keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.OutputStream;</div><div class="line"><span class="keyword">import</span> java.nio.charset.Charset;</div><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by admin on 2017/7/22.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileUtils</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">saveFileToPathWithRandomName</span><span class="params">(String content, String path)</span></span></div><div class="line">            <span class="keyword">throws</span> IOException &#123;</div><div class="line">        <span class="comment">// 创建目录</span></div><div class="line">        File dir = <span class="keyword">new</span> File(path);</div><div class="line">        <span class="keyword">if</span> (!dir.exists()) &#123;</div><div class="line">            dir.mkdirs();</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// 读取文件流并保持在指定路径</span></div><div class="line">        String filename = System.currentTimeMillis() + <span class="string">".txt"</span>;</div><div class="line">        String mPath = path + File.separator</div><div class="line">                + filename;</div><div class="line">        System.out.println(path);</div><div class="line">        OutputStream outputStream = <span class="keyword">new</span> FileOutputStream(mPath);</div><div class="line">        <span class="keyword">byte</span>[] buffer = content.getBytes(Charset.forName(<span class="string">"utf-8"</span>));</div><div class="line">        outputStream.write(buffer);</div><div class="line">        outputStream.flush();</div><div class="line">        outputStream.close();</div><div class="line">        <span class="keyword">return</span> filename;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">saveFileToPathWithName</span><span class="params">(String content, String path, String filename)</span></span></div><div class="line">            <span class="keyword">throws</span> IOException &#123;</div><div class="line">        <span class="comment">// 创建目录</span></div><div class="line">        File dir = <span class="keyword">new</span> File(path);</div><div class="line">        <span class="keyword">if</span> (!dir.exists()) &#123;</div><div class="line">            dir.mkdirs();</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// 读取文件流并保持在指定路径</span></div><div class="line">        String mPath = path + File.separator</div><div class="line">                + filename;</div><div class="line">        System.out.println(path);</div><div class="line">        OutputStream outputStream = <span class="keyword">new</span> FileOutputStream(mPath);</div><div class="line">        <span class="keyword">byte</span>[] buffer = content.getBytes(Charset.forName(<span class="string">"utf-8"</span>));</div><div class="line">        outputStream.write(buffer);</div><div class="line">        outputStream.flush();</div><div class="line">        outputStream.close();</div><div class="line">        <span class="keyword">return</span> filename;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">deleteFiles</span><span class="params">(String dir)</span> </span>&#123;</div><div class="line">        File file = <span class="keyword">new</span> File(dir);</div><div class="line">        <span class="keyword">if</span> (!file.exists()) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (file.isDirectory()) &#123;</div><div class="line">            File[] files = file.listFiles();</div><div class="line">            <span class="keyword">if</span> (files != <span class="keyword">null</span> &amp;&amp; files.length &gt; <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">for</span> (File file1 : files) &#123;</div><div class="line">                    file1.delete();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">saveFile</span><span class="params">(<span class="keyword">byte</span>[] data, String dirName, String fileName)</span> </span>&#123;</div><div class="line">        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();</div><div class="line">        String realPath = request.getRealPath(<span class="string">""</span>);</div><div class="line">        String newpath = realPath + File.separator + dirName;</div><div class="line">        File file = <span class="keyword">new</span> File(newpath);</div><div class="line">        <span class="keyword">if</span> (!file.exists()) &#123;</div><div class="line">            file.mkdirs();</div><div class="line">        &#125;</div><div class="line">        String filePath = newpath + File.separator + fileName;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(filePath), <span class="keyword">false</span>);</div><div class="line">            fos.write(data);</div><div class="line">            fos.flush();</div><div class="line">            fos.close();</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> filePath;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Java工具类 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaEE-文件压缩与解压]]></title>
      <url>/2017/09/07/JavaEE-%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/</url>
      <content type="html"><![CDATA[<h2 id="文件压缩与解压工具整理"><a href="#文件压缩与解压工具整理" class="headerlink" title="文件压缩与解压工具整理"></a>文件压缩与解压工具整理</h2><ul>
<li>文件或文件夹压缩</li>
<li>文件解压</li>
</ul>
<a id="more"></a>
<h3 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.zip.ZipEntry;</div><div class="line"><span class="keyword">import</span> java.util.zip.ZipOutputStream;</div><div class="line">  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZipUtils</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ZipUtils</span><span class="params">()</span></span>&#123;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doCompress</span><span class="params">(String srcFile, String zipFile)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">        doCompress(<span class="keyword">new</span> File(srcFile), <span class="keyword">new</span> File(zipFile));</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 文件压缩</div><div class="line">     * <span class="doctag">@param</span> srcFile 目录或者单个文件</div><div class="line">     * <span class="doctag">@param</span> zipFile 压缩后的ZIP文件</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doCompress</span><span class="params">(File srcFile, File zipFile)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">        ZipOutputStream out = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            out = <span class="keyword">new</span> ZipOutputStream(<span class="keyword">new</span> FileOutputStream(zipFile));</div><div class="line">            doCompress(srcFile, out);</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            <span class="keyword">throw</span> e;</div><div class="line">        &#125; <span class="keyword">finally</span> &#123;</div><div class="line">            out.close();<span class="comment">//记得关闭资源</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doCompress</span><span class="params">(String filelName, ZipOutputStream out)</span> <span class="keyword">throws</span> IOException</span>&#123;</div><div class="line">        doCompress(<span class="keyword">new</span> File(filelName), out);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doCompress</span><span class="params">(File file, ZipOutputStream out)</span> <span class="keyword">throws</span> IOException</span>&#123;</div><div class="line">        doCompress(file, out, <span class="string">""</span>);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doCompress</span><span class="params">(File inFile, ZipOutputStream out, String dir)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">        <span class="keyword">if</span> ( inFile.isDirectory() ) &#123;</div><div class="line">            File[] files = inFile.listFiles();</div><div class="line">            <span class="keyword">if</span> (files!=<span class="keyword">null</span> &amp;&amp; files.length&gt;<span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">for</span> (File file : files) &#123;</div><div class="line">                    String name = inFile.getName();</div><div class="line">                    <span class="keyword">if</span> (!<span class="string">""</span>.equals(dir)) &#123;</div><div class="line">                        name = dir + <span class="string">"/"</span> + name;</div><div class="line">                    &#125;</div><div class="line">                    ZipUtils.doCompress(file, out, name);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            ZipUtils.doZip(inFile, out, dir);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doZip</span><span class="params">(File inFile, ZipOutputStream out, String dir)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">        String entryName = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">if</span> (!<span class="string">""</span>.equals(dir)) &#123;</div><div class="line">            entryName = dir + <span class="string">"/"</span> + inFile.getName();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            entryName = inFile.getName();</div><div class="line">        &#125;</div><div class="line">        ZipEntry entry = <span class="keyword">new</span> ZipEntry(entryName);</div><div class="line">        out.putNextEntry(entry);</div><div class="line"></div><div class="line">        <span class="keyword">int</span> len = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(inFile);</div><div class="line">        <span class="keyword">while</span> ((len = fis.read(buffer)) &gt; <span class="number">0</span>) &#123;</div><div class="line">            out.write(buffer, <span class="number">0</span>, len);</div><div class="line">            out.flush();</div><div class="line">        &#125;</div><div class="line">        out.closeEntry();</div><div class="line">        fis.close();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">        doCompress(<span class="string">"D:/java/"</span>, <span class="string">"D:/java.zip"</span>);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Java工具类 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaEE-SpingMVC之log4j日志配置]]></title>
      <url>/2017/08/23/JavaEE-SpingMVC%E4%B9%8Blog4j%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<h3 id="web-xml-添加配置"><a href="#web-xml-添加配置" class="headerlink" title="web.xml 添加配置"></a>web.xml 添加配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- Spring的log4j监听器 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>webAppRootKey<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>webapp.root1<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:log4j.properties<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jRefreshInterval<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>6000<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.util.Log4jConfigListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="resources中添加log4j-properties"><a href="#resources中添加log4j-properties" class="headerlink" title="resources中添加log4j.properties"></a>resources中添加log4j.properties</h3><ul>
<li>注意：webAppRootKey的值和${webapp.root1}的内容相对相。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">### 设置###</div><div class="line">log4j.rootLogger = debug,stdout,D,E</div><div class="line">### 输出信息到控制抬 ###</div><div class="line">#log4j.appender.stdout = org.apache.log4j.ConsoleAppender</div><div class="line">#log4j.appender.stdout.Target = System.out</div><div class="line">#log4j.appender.stdout.layout = org.apache.log4j.PatternLayout</div><div class="line">#log4j.appender.stdout.layout.ConversionPattern = [%-5p] %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; method:%l%n%m%n</div><div class="line">### 输出DEBUG 级别以上的日志到=E://logs/error.log ###</div><div class="line">log4j.appender.D = org.apache.log4j.DailyRollingFileAppender</div><div class="line">log4j.appender.D.File = $&#123;webapp.root1&#125;/WEB-INF/logs/log.log</div><div class="line">log4j.appender.D.Append = true</div><div class="line">log4j.appender.D.Threshold = INFO</div><div class="line">log4j.appender.D.layout = org.apache.log4j.PatternLayout</div><div class="line">log4j.appender.D.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125; [%X&#123;ip&#125;] [ %t:%r ] - [ %p ]  %m%n</div><div class="line">### 输出ERROR 级别以上的日志到=E://logs/error.log ###</div><div class="line">log4j.appender.E = org.apache.log4j.DailyRollingFileAppender</div><div class="line">log4j.appender.E.File =$&#123;webapp.root1&#125;/WEB-INF/logs/error.log</div><div class="line">log4j.appender.E.Append = true</div><div class="line">log4j.appender.E.Threshold = ERROR</div><div class="line">log4j.appender.E.layout = org.apache.log4j.PatternLayout</div><div class="line">log4j.appender.E.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125; [%X&#123;ip&#125;] [ %t:%r ] - [ %p ]  %m%n</div><div class="line">#log4j.rootLogger=INFO,CONSOLE,DAILY_ALL</div><div class="line">#console log</div><div class="line">#log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender</div><div class="line">#log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout</div><div class="line">#log4j.appender.CONSOLE.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; [%t] %-5p %c - %m%n</div><div class="line">##all log</div><div class="line">#log4j.appender.DAILY_ALL=org.apache.log4j.DailyRollingFileAppender</div><div class="line">#log4j.appender.DAILY_ALL.layout=org.apache.log4j.PatternLayout</div><div class="line">#log4j.appender.DAILY_ALL.layout.ConversionPattern=&quot;%p %d&#123;yyyy-MM-dd HH:mm:ss&#125; %-50.50c(%L) - %m%n</div><div class="line">##$&#123;webapp.root&#125; == the path of your tomcat path</div><div class="line">#log4j.appender.DAILY_ALL.File=$&#123;webapp.root&#125;/WEB-INF/logs/app.log</div><div class="line">## General Apache libraries</div><div class="line">#log4j.logger.org.apache=WARN</div><div class="line">## Spring</div><div class="line">#log4j.logger.org.springframework=WARN</div><div class="line"># email</div><div class="line">log4j.logger.com.alexgaoyh.util.email=INFO, email</div><div class="line">log4j.appender.email=org.apache.log4j.DailyRollingFileAppender</div><div class="line">log4j.appender.email.layout=org.apache.log4j.PatternLayout</div><div class="line">log4j.appender.email.layout.ConversionPattern=&quot;%p %d&#123;yyyy-MM-dd HH:mm:ss&#125; %-50.50c(%L) - %m%n</div><div class="line">log4j.appender.email.File=$&#123;webapp.root1&#125;/WEB-INF/logs/email/email.log</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> SpringMVC </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-串口通讯]]></title>
      <url>/2017/08/23/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF/</url>
      <content type="html"><![CDATA[<p><a href="https://github.com/mik3y/usb-serial-for-android" target="_blank" rel="external">usb-serial-for-android</a></p>
<p>在这个项目的基础上我将串口通信的功能封装了起来，用起来更加简单了。</p>
<p>Github传送门：<a href="https://github.com/zhouzhuo810/OkUSB" target="_blank" rel="external">OkUSB</a></p>
<h1 id="OkUSB"><a href="#OkUSB" class="headerlink" title="OkUSB"></a>OkUSB</h1><p>一个简洁的Android串口通信框架。</p>
<h2 id="功能简介"><a href="#功能简介" class="headerlink" title="功能简介"></a>功能简介</h2><ul>
<li>支持设置波特率</li>
<li>支持设置数据位</li>
<li>支持设置停止位</li>
<li>支持设置校验位</li>
<li>支持DTS和RTS</li>
<li>支持串口连接状态监听</li>
</ul>
<a id="more"></a>
<p>##　用法简介</p>
<h3 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">allprojects &#123;</div><div class="line">    repositories &#123;</div><div class="line">        ...</div><div class="line">        maven &#123; url &apos;https://jitpack.io&apos; &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">        compile &apos;com.github.zhouzhuo810:OkUSB:1.0.0&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="具体用法"><a href="#具体用法" class="headerlink" title="具体用法"></a>具体用法</h3><p>1.在AndroidManifest.xml中添加如下特性：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">"android.hardware.usb.host"</span> /&gt;</span></div></pre></td></tr></table></figure>
<p>在需要连接串口的Activity中添加：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.hardware.usb.action.USB_DEVICE_ATTACHED"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></div><div class="line">    <span class="attr">android:name</span>=<span class="string">"android.hardware.usb.action.USB_DEVICE_ATTACHED"</span></div><div class="line">    <span class="attr">android:resource</span>=<span class="string">"@xml/device_filter"</span> /&gt;</div></pre></td></tr></table></figure>
<p>2.在res文件夹创建xml文件夹，新建device_filter.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 要进行通信的USB设备的供应商ID（VID）和产品识别码（PID）--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">usb-device</span> <span class="attr">vendor-id</span>=<span class="string">"0403"</span> <span class="attr">product-id</span>=<span class="string">"6001"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure>
<p>3.前面都是准备工作，这里才真正使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">  </div><div class="line"><span class="comment">//初始化</span></div><div class="line">usb = <span class="keyword">new</span> USB.USBBuilder(<span class="keyword">this</span>)</div><div class="line">        .setBaudRate(<span class="number">115200</span>)  <span class="comment">//波特率</span></div><div class="line">        .setDataBits(<span class="number">8</span>)       <span class="comment">//数据位</span></div><div class="line">        .setStopBits(UsbSerialPort.STOPBITS_1) <span class="comment">//停止位</span></div><div class="line">        .setParity(UsbSerialPort.PARITY_NONE)  <span class="comment">//校验位</span></div><div class="line">        .setMaxReadBytes(<span class="number">20</span>)   <span class="comment">//接受数据最大长度</span></div><div class="line">        .setReadDuration(<span class="number">500</span>)  <span class="comment">//读数据间隔时间</span></div><div class="line">        .setDTR(<span class="keyword">false</span>)    <span class="comment">//DTR enable</span></div><div class="line">        .setRTS(<span class="keyword">false</span>)    <span class="comment">//RTS enable</span></div><div class="line">        .build();</div><div class="line">  </div><div class="line"><span class="comment">//实现监听连接状态和数据收发。</span></div><div class="line">usb.setOnUsbChangeListener(<span class="keyword">new</span> USB.OnUsbChangeListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUsbConnect</span><span class="params">()</span> </span>&#123;</div><div class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"conencted"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUsbDisconnect</span><span class="params">()</span> </span>&#123;</div><div class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"disconencted"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDataReceive</span><span class="params">(<span class="keyword">byte</span>[] data)</span> </span>&#123;</div><div class="line">        tvResult.setText(<span class="keyword">new</span> String(data, Charset.forName(<span class="string">"GB2312"</span>)));</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUsbConnectFailed</span><span class="params">()</span> </span>&#123;</div><div class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"connect fail"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPermissionGranted</span><span class="params">()</span> </span>&#123;</div><div class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"permission ok"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPermissionRefused</span><span class="params">()</span> </span>&#123;</div><div class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"permission fail"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDriverNotSupport</span><span class="params">()</span> </span>&#123;</div><div class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"no driver"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onWriteDataFailed</span><span class="params">(String error)</span> </span>&#123;</div><div class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"write fail"</span> + error, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onWriteSuccess</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</div><div class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"write ok "</span> + num, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>4.发送数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (usb != <span class="keyword">null</span>) &#123;</div><div class="line">    usb.destroy();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>5.如果是Activity，可以在onDestroy中调用如下代码关闭串口。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">if</span> (usb != <span class="keyword">null</span>) &#123;</div><div class="line">    usb.destroy();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaEE-SpringMVC之获取项目根目录]]></title>
      <url>/2017/08/23/JavaEE-SpringMVC%E4%B9%8B%E8%8E%B7%E5%8F%96%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95/</url>
      <content type="html"><![CDATA[<h3 id="代码很少，但是很有用"><a href="#代码很少，但是很有用" class="headerlink" title="代码很少，但是很有用"></a>代码很少，但是很有用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();</div><div class="line">String realPath = request.getRealPath(<span class="string">""</span>);</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> SpringMVC </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android常用代码-复制与粘贴]]></title>
      <url>/2017/08/23/Android%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81-%E5%A4%8D%E5%88%B6%E4%B8%8E%E7%B2%98%E8%B4%B4/</url>
      <content type="html"><![CDATA[<h3 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ClipboardManager cm = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</div><div class="line">cm.setPrimaryClip(ClipData.newPlainText(label, text));</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="工具类封装"><a href="#工具类封装" class="headerlink" title="工具类封装"></a>工具类封装</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> android.content.ClipData;</div><div class="line"><span class="keyword">import</span> android.content.ClipboardManager;</div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.Intent;</div><div class="line"><span class="keyword">import</span> android.net.Uri;</div><div class="line"><span class="keyword">import</span> android.support.annotation.RequiresApi;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Android 复制粘贴工具</div><div class="line"> * Created by zhouzhuo810 on 2017/8/12.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyUtils</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyUrl</span><span class="params">(Context context,CharSequence label, String url)</span> </span>&#123;</div><div class="line">        ClipboardManager cm = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</div><div class="line">        cm.setPrimaryClip(ClipData.newRawUri(label, Uri.parse(url)));</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyUri</span><span class="params">(Context context,CharSequence label, Uri uri)</span> </span>&#123;</div><div class="line">        ClipboardManager cm = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</div><div class="line">        cm.setPrimaryClip(ClipData.newRawUri(label, uri));</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@RequiresApi</span>(value = <span class="number">16</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyHtml</span><span class="params">(Context context,CharSequence label, String text, String html)</span> </span>&#123;</div><div class="line">        ClipboardManager cm = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</div><div class="line">        cm.setPrimaryClip(ClipData.newHtmlText(label,text, html));</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyPlainText</span><span class="params">(Context context, CharSequence label, String text)</span> </span>&#123;</div><div class="line">        ClipboardManager cm = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</div><div class="line">        cm.setPrimaryClip(ClipData.newPlainText(label, text));</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyIntent</span><span class="params">(Context context,CharSequence label, Intent intent)</span> </span>&#123;</div><div class="line">        ClipboardManager cm = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</div><div class="line">        cm.setPrimaryClip(ClipData.newIntent(label, intent));</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> CharSequence <span class="title">getCopyPlainText</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        ClipboardManager cm = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</div><div class="line">        <span class="keyword">return</span> cm.getPrimaryClip().getItemAt(<span class="number">0</span>).getText();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Intent <span class="title">getCopyIntent</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        ClipboardManager cm = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</div><div class="line">        <span class="keyword">return</span> cm.getPrimaryClip().getItemAt(<span class="number">0</span>).getIntent();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@RequiresApi</span>(value = <span class="number">16</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> CharSequence <span class="title">getCopyHtmlText</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        ClipboardManager cm = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</div><div class="line">        <span class="keyword">return</span> cm.getPrimaryClip().getItemAt(<span class="number">0</span>).getHtmlText();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Uri <span class="title">getCopyUri</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        ClipboardManager cm = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);</div><div class="line">        <span class="keyword">return</span> cm.getPrimaryClip().getItemAt(<span class="number">0</span>).getUri();</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android常用代码 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaEE-使用itext生成PDF总结]]></title>
      <url>/2017/08/18/JavaEE-%E4%BD%BF%E7%94%A8itext%E7%94%9F%E6%88%90PDF%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<h3 id="添加pom依赖"><a href="#添加pom依赖" class="headerlink" title="添加pom依赖"></a>添加pom依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- pdf start--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itextpdf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>itextpdf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.5.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itextpdf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>itext-asian<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- pdf end --&gt;</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h2><h3 id="添加普通文字-不换行"><a href="#添加普通文字-不换行" class="headerlink" title="添加普通文字(不换行)"></a>添加普通文字(不换行)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addText</span><span class="params">(Document document, String text, Font font)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (font == <span class="keyword">null</span>) &#123;</div><div class="line">        Chunk chunk = <span class="keyword">new</span> Chunk(text == <span class="keyword">null</span> ? <span class="string">""</span> : text);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            document.add(chunk);</div><div class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        font.setSize(<span class="number">12f</span>);</div><div class="line">        font.setStyle(Font.NORMAL);</div><div class="line">        Chunk chunk = <span class="keyword">new</span> Chunk(text == <span class="keyword">null</span> ? <span class="string">""</span> : text, font);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            document.add(chunk);</div><div class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="添加普通文字-换行"><a href="#添加普通文字-换行" class="headerlink" title="添加普通文字(换行)"></a>添加普通文字(换行)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addTextLine</span><span class="params">(Document document, String text, Font font)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (font == <span class="keyword">null</span>) &#123;</div><div class="line">        Chunk chunk = <span class="keyword">new</span> Chunk((text == <span class="keyword">null</span> ? <span class="string">""</span> : text) + <span class="string">"\n"</span>);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            document.add(chunk);</div><div class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        font.setSize(<span class="number">12f</span>);</div><div class="line">        font.setStyle(Font.NORMAL);</div><div class="line">        Chunk chunk = <span class="keyword">new</span> Chunk((text == <span class="keyword">null</span> ? <span class="string">""</span> : text) + <span class="string">"\n"</span>, font);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            document.add(chunk);</div><div class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="添加下划线文字-带超链接"><a href="#添加下划线文字-带超链接" class="headerlink" title="添加下划线文字(带超链接)"></a>添加下划线文字(带超链接)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 添加下划线(带超链接)</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> document Document对象</div><div class="line"> * <span class="doctag">@param</span> text     链接文字</div><div class="line"> * <span class="doctag">@param</span> fontPath 字体路径</div><div class="line"> * <span class="doctag">@throws</span> IOException       异常</div><div class="line"> * <span class="doctag">@throws</span> DocumentException 异常</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addUnderLineText</span><span class="params">(Document document, String text, String fontPath)</span> <span class="keyword">throws</span> IOException, DocumentException </span>&#123;</div><div class="line">    Font font = <span class="keyword">new</span> Font(BaseFont.createFont(fontPath + <span class="string">"Arial.ttf"</span>, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED), <span class="number">12f</span>, Font.UNDERLINE);</div><div class="line">    font.setColor(BaseColor.BLUE);</div><div class="line">    Anchor anchor = <span class="keyword">new</span> Anchor(text, font);</div><div class="line">    anchor.setReference(text);</div><div class="line">    anchor.setName(text);</div><div class="line">    document.add(anchor);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="添加表格"><a href="#添加表格" class="headerlink" title="添加表格"></a>添加表格</h3><ul>
<li>方法封装</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 添加表格</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> document     Document对象</div><div class="line"> * <span class="doctag">@param</span> tableTitle   表格标题</div><div class="line"> * <span class="doctag">@param</span> titles       标题</div><div class="line"> * <span class="doctag">@param</span> widthRatio   标题宽的比例</div><div class="line"> * <span class="doctag">@param</span> values       内容</div><div class="line"> * <span class="doctag">@param</span> titleBgColor 标题行背景颜色</div><div class="line"> * <span class="doctag">@param</span> font         字体</div><div class="line"> * <span class="doctag">@throws</span> DocumentException 异常</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">private</span> List&lt;PdfPRow&gt; <span class="title">addTable</span><span class="params">(Document document, String tableTitle, String[] titles, <span class="keyword">float</span>[] widthRatio, String[][] values, BaseColor titleBgColor, Font font)</span> <span class="keyword">throws</span> DocumentException </span>&#123;</div><div class="line">    <span class="comment">//添加表格标题</span></div><div class="line">    font.setSize(<span class="number">14f</span>);</div><div class="line">    font.setStyle(Font.BOLD);</div><div class="line">    Chunk paragraph = <span class="keyword">new</span> Chunk(tableTitle == <span class="keyword">null</span> ? <span class="string">""</span> : tableTitle, font);</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        document.add(paragraph);</div><div class="line">    &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line">    font.setSize(<span class="number">12f</span>);</div><div class="line">    font.setStyle(Font.NORMAL);</div><div class="line">    <span class="comment">//添加表格</span></div><div class="line">    PdfPTable inter = <span class="keyword">new</span> PdfPTable(titles.length);</div><div class="line">    inter.setWidthPercentage(<span class="number">100</span>); <span class="comment">// 宽度100%填充</span></div><div class="line">    inter.setSpacingBefore(<span class="number">1f</span>); <span class="comment">// 前间距</span></div><div class="line">    inter.setSpacingAfter(<span class="number">1f</span>); <span class="comment">// 后间距</span></div><div class="line">    List&lt;PdfPRow&gt; listRow = inter.getRows(); <span class="comment">//行</span></div><div class="line">    <span class="comment">//设置列宽比例</span></div><div class="line">    inter.setWidths(widthRatio);</div><div class="line">    <span class="comment">//标题</span></div><div class="line">    PdfPCell cells[] = <span class="keyword">new</span> PdfPCell[titles.length];</div><div class="line">    PdfPRow titleRow = <span class="keyword">new</span> PdfPRow(cells);</div><div class="line">    <span class="comment">//单元格</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; titles.length; i++) &#123;</div><div class="line">        cells[i] = <span class="keyword">new</span> PdfPCell(<span class="keyword">new</span> Paragraph(titles[i], font));</div><div class="line">        cells[i].setBackgroundColor(titleBgColor == <span class="keyword">null</span> ? BaseColor.LIGHT_GRAY : titleBgColor);</div><div class="line">        cells[i].setPaddingTop(<span class="number">6f</span>);</div><div class="line">        cells[i].setPaddingBottom(<span class="number">6f</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//把第一行添加到集合</span></div><div class="line">    listRow.add(titleRow);</div><div class="line">    <span class="keyword">for</span> (String[] value : values) &#123;</div><div class="line">        PdfPCell childCells[] = <span class="keyword">new</span> PdfPCell[value.length];</div><div class="line">        PdfPRow row = <span class="keyword">new</span> PdfPRow(childCells);</div><div class="line">        <span class="comment">//添加列</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; value.length; i++) &#123;</div><div class="line">            childCells[i] = <span class="keyword">new</span> PdfPCell(<span class="keyword">new</span> Paragraph(value[i], font));<span class="comment">//单元格内容</span></div><div class="line">            childCells[i].setPaddingTop(<span class="number">4f</span>);</div><div class="line">            childCells[i].setPaddingBottom(<span class="number">4f</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//添加行</span></div><div class="line">        listRow.add(row);</div><div class="line">    &#125;</div><div class="line">    document.add(inter);</div><div class="line">    <span class="keyword">return</span> listRow;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>用法示例</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pdfAddRequestHeaders</span><span class="params">(Document document, String projectId, String id, Font font)</span> <span class="keyword">throws</span> DocumentException </span>&#123;</div><div class="line">    List&lt;RequestHeaderEntity&gt; globals = mRequestHeaderService.getGlobalRequestHeaders(projectId);</div><div class="line">    List&lt;RequestHeaderEntity&gt; args = mRequestHeaderService.getBaseDao().executeCriteria(ResponseArgUtils.getArgByInterfaceId(id));</div><div class="line">  </div><div class="line">    <span class="keyword">if</span> (globals != <span class="keyword">null</span> &amp;&amp; globals.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="comment">//设置列宽</span></div><div class="line">        <span class="keyword">float</span>[] columnWidths = &#123;<span class="number">3f</span>, <span class="number">2f</span>, <span class="number">5f</span>&#125;;</div><div class="line">        String[][] values = <span class="keyword">new</span> String[args.size()][<span class="number">3</span>];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; args.size(); i++) &#123;</div><div class="line">            RequestHeaderEntity entity = args.get(i);</div><div class="line">            values[i][<span class="number">0</span>] = entity.getName();</div><div class="line">            values[i][<span class="number">1</span>] = entity.getValue() == <span class="keyword">null</span> ? <span class="string">""</span> : entity.getValue();</div><div class="line">            values[i][<span class="number">2</span>] = entity.getNote() == <span class="keyword">null</span> ? <span class="string">""</span> : entity.getNote();</div><div class="line">        &#125;</div><div class="line">        addTable(document, <span class="string">"全局请求头"</span>, <span class="keyword">new</span> String[]&#123;<span class="string">"名称"</span>, <span class="string">"默认值"</span>, <span class="string">"说明"</span>&#125;, columnWidths, values, <span class="keyword">null</span>, font);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="keyword">if</span> (args != <span class="keyword">null</span> &amp;&amp; args.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="comment">//设置列宽</span></div><div class="line">        <span class="keyword">float</span>[] columnWidths = &#123;<span class="number">3f</span>, <span class="number">2f</span>, <span class="number">5f</span>&#125;;</div><div class="line">        String[][] values = <span class="keyword">new</span> String[args.size()][<span class="number">3</span>];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; args.size(); i++) &#123;</div><div class="line">            RequestHeaderEntity entity = args.get(i);</div><div class="line">            values[i][<span class="number">0</span>] = entity.getName();</div><div class="line">            values[i][<span class="number">1</span>] = entity.getValue() == <span class="keyword">null</span> ? <span class="string">""</span> : entity.getValue();</div><div class="line">            values[i][<span class="number">2</span>] = entity.getNote() == <span class="keyword">null</span> ? <span class="string">""</span> : entity.getNote();</div><div class="line">        &#125;</div><div class="line">        addTable(document, <span class="string">"其他请求头"</span>, <span class="keyword">new</span> String[]&#123;<span class="string">"名称"</span>, <span class="string">"默认值"</span>, <span class="string">"说明"</span>&#125;, columnWidths, values, <span class="keyword">null</span>, font);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="难点"><a href="#难点" class="headerlink" title="难点"></a>难点</h2><h3 id="添加页码"><a href="#添加页码" class="headerlink" title="添加页码"></a>添加页码</h3><ul>
<li>使用</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">PdfWriter pdfWriter = PdfWriter.getInstance(document, <span class="keyword">new</span> FileOutputStream(filePath));</div><div class="line">PdfReportM1HeaderFooter footer = <span class="keyword">new</span> PdfReportM1HeaderFooter();</div><div class="line">pdfWriter.setPageEvent(footer);</div><div class="line"><span class="comment">//打开文档</span></div><div class="line">document.open();</div><div class="line"><span class="comment">//... ...</span></div></pre></td></tr></table></figure>
<ul>
<li>工具类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Project Name:report</div><div class="line"> * File Name:PdfReportM1HeaderFooter.java</div><div class="line"> * Package Name:com.riambsoft.report.pdf</div><div class="line"> * Date:2013-9-16上午08:59:00</div><div class="line"> * Copyright (c) 2013, riambsoft All Rights Reserved.</div><div class="line"> */</div><div class="line">  </div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> com.itextpdf.text.Document;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.DocumentException;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.Element;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.Font;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.PageSize;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.Phrase;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.Rectangle;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.BaseFont;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.ColumnText;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.PdfContentByte;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.PdfPageEventHelper;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.PdfTemplate;</div><div class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.PdfWriter;</div><div class="line">  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PdfReportM1HeaderFooter</span> <span class="keyword">extends</span> <span class="title">PdfPageEventHelper</span> </span>&#123;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 页眉</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> String header = <span class="string">""</span>;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 文档字体大小，页脚页眉最好和文本大小一致</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span> presentFontSize = <span class="number">12</span>;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 文档页面大小，最好前面传入，否则默认为A4纸张</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> Rectangle pageSize = PageSize.A4;</div><div class="line">  </div><div class="line">    <span class="comment">// 模板</span></div><div class="line">    <span class="keyword">public</span> PdfTemplate total;</div><div class="line">  </div><div class="line">    <span class="comment">// 基础字体对象</span></div><div class="line">    <span class="keyword">public</span> BaseFont bf = <span class="keyword">null</span>;</div><div class="line">  </div><div class="line">    <span class="comment">// 利用基础字体生成的字体对象，一般用于生成中文文字</span></div><div class="line">    <span class="keyword">public</span> Font fontDetail = <span class="keyword">null</span>;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     *</div><div class="line">     * Creates a new instance of PdfReportM1HeaderFooter 无参构造方法.</div><div class="line">     *</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PdfReportM1HeaderFooter</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     *</div><div class="line">     * Creates a new instance of PdfReportM1HeaderFooter 构造方法.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> yeMei</div><div class="line">     *            页眉字符串</div><div class="line">     * <span class="doctag">@param</span> presentFontSize</div><div class="line">     *            数据体字体大小</div><div class="line">     * <span class="doctag">@param</span> pageSize</div><div class="line">     *            页面文档大小，A4，A5，A6横转翻转等Rectangle对象</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PdfReportM1HeaderFooter</span><span class="params">(String yeMei, <span class="keyword">int</span> presentFontSize, Rectangle pageSize)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.header = yeMei;</div><div class="line">        <span class="keyword">this</span>.presentFontSize = presentFontSize;</div><div class="line">        <span class="keyword">this</span>.pageSize = pageSize;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHeader</span><span class="params">(String header)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.header = header;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPresentFontSize</span><span class="params">(<span class="keyword">int</span> presentFontSize)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.presentFontSize = presentFontSize;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     *</div><div class="line">     * TODO 文档打开时创建模板</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> com.itextpdf.text.pdf.PdfPageEventHelper#onOpenDocument(com.itextpdf.text.pdf.PdfWriter, com.itextpdf.text.Document)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOpenDocument</span><span class="params">(PdfWriter writer, Document document)</span> </span>&#123;</div><div class="line">        total = writer.getDirectContent().createTemplate(<span class="number">70</span>, <span class="number">70</span>);<span class="comment">// 共 页 的矩形的长宽高</span></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     *</div><div class="line">     * TODO 关闭每页的时候，写入页眉，写入'第几页共'这几个字。</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> com.itextpdf.text.pdf.PdfPageEventHelper#onEndPage(com.itextpdf.text.pdf.PdfWriter, com.itextpdf.text.Document)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEndPage</span><span class="params">(PdfWriter writer, Document document)</span> </span>&#123;</div><div class="line">  </div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            <span class="keyword">if</span> (bf == <span class="keyword">null</span>) &#123;</div><div class="line">                bf = BaseFont.createFont(<span class="string">"STSong-Light"</span>, <span class="string">"UniGB-UCS2-H"</span>, <span class="keyword">false</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (fontDetail == <span class="keyword">null</span>) &#123;</div><div class="line">                fontDetail = <span class="keyword">new</span> Font(bf, presentFontSize, Font.NORMAL);<span class="comment">// 数据体字体</span></div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="comment">// 1.写入页眉</span></div><div class="line">        ColumnText.showTextAligned(writer.getDirectContent(), Element.ALIGN_LEFT, <span class="keyword">new</span> Phrase(header, fontDetail), document.left(), document.top() + <span class="number">20</span>, <span class="number">0</span>);</div><div class="line">  </div><div class="line">        <span class="comment">// 2.写入前半部分的 第 X页/共</span></div><div class="line">        <span class="keyword">int</span> pageS = writer.getPageNumber();</div><div class="line">        String foot1 = <span class="string">"第 "</span> + pageS + <span class="string">" 页 /共"</span>;</div><div class="line">        Phrase footer = <span class="keyword">new</span> Phrase(foot1, fontDetail);</div><div class="line">  </div><div class="line">        <span class="comment">// 3.计算前半部分的foot1的长度，后面好定位最后一部分的'Y页'这俩字的x轴坐标，字体长度也要计算进去 = len</span></div><div class="line">        <span class="keyword">float</span> len = bf.getWidthPoint(foot1, presentFontSize);</div><div class="line">  </div><div class="line">        <span class="comment">// 4.拿到当前的PdfContentByte</span></div><div class="line">        PdfContentByte cb = writer.getDirectContent();</div><div class="line">  </div><div class="line">        <span class="comment">//自己增加的</span></div><div class="line"><span class="comment">/*        if (pageS == 1) &#123;</span></div><div class="line">            Phrase footerLeft = new Phrase("", fontDetail);</div><div class="line">            ColumnText.showTextAligned(cb, Element.ALIGN_LEFT, footerLeft, document.left(), document.bottom() - 20, 0);</div><div class="line">        &#125;*/</div><div class="line">        <span class="comment">// 5.写入页脚1，x轴就是(右margin+左margin + right() -left()- len)/2.0F 再给偏移20F适合人类视觉感受，否则肉眼看上去就太偏左了 ,y轴就是底边界-20,否则就贴边重叠到数据体里了就不是页脚了；注意Y轴是从下往上累加的，最上方的Top值是大于Bottom好几百开外的。</span></div><div class="line">        ColumnText.showTextAligned(cb, Element.ALIGN_CENTER, footer, (document.rightMargin() + document.right() + document.leftMargin() - document.left() - len) / <span class="number">2.0F</span> + <span class="number">20F</span>, document.bottom() - <span class="number">20</span>, <span class="number">0</span>);</div><div class="line">        <span class="comment">// 6.写入页脚2的模板（就是页脚的Y页这俩字）添加到文档中，计算模板的和Y轴,X=(右边界-左边界 - 前半部分的len值)/2.0F + len ， y 轴和之前的保持一致，底边界-20</span></div><div class="line">        cb.addTemplate(total, (document.rightMargin() + document.right() + document.leftMargin() - document.left()) / <span class="number">2.0F</span> + <span class="number">20F</span>, document.bottom() - <span class="number">20</span>); <span class="comment">// 调节模版显示的位置</span></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">/**</span></div><div class="line">     *</div><div class="line">     * TODO 关闭文档时，替换模板，完成整个页眉页脚组件</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> com.itextpdf.text.pdf.PdfPageEventHelper#onCloseDocument(com.itextpdf.text.pdf.PdfWriter, com.itextpdf.text.Document)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCloseDocument</span><span class="params">(PdfWriter writer, Document document)</span> </span>&#123;</div><div class="line">        <span class="comment">// 7.最后一步了，就是关闭文档的时候，将模板替换成实际的 Y 值,至此，page x of y 制作完毕，完美兼容各种文档size。</span></div><div class="line">        total.beginText();</div><div class="line">        total.setFontAndSize(bf, presentFontSize);<span class="comment">// 生成的模版的字体、颜色</span></div><div class="line">        String foot2 = <span class="string">" "</span> + (writer.getPageNumber()) + <span class="string">" 页"</span>;</div><div class="line">        total.showText(foot2);<span class="comment">// 模版显示的内容</span></div><div class="line">        total.endText();</div><div class="line">        total.closePath();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="添加书签"><a href="#添加书签" class="headerlink" title="添加书签"></a>添加书签</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 添加分组标题(带标签)</div><div class="line"> * <span class="doctag">@param</span> document Document对象</div><div class="line"> * <span class="doctag">@param</span> text 标题内容</div><div class="line"> * <span class="doctag">@param</span> number 标题数字</div><div class="line"> * <span class="doctag">@param</span> font 字体</div><div class="line"> * <span class="doctag">@return</span> Chapter对象</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">private</span> Chapter <span class="title">addGroup</span><span class="params">(Document document, String text, <span class="keyword">int</span> number, Font font)</span> </span>&#123;</div><div class="line">    addTextLine(document, <span class="string">""</span>, font);</div><div class="line">    addTextLine(document, <span class="string">""</span>, font);</div><div class="line">    <span class="keyword">if</span> (font != <span class="keyword">null</span>) &#123;</div><div class="line">        font.setSize(<span class="number">22f</span>);</div><div class="line">        font.setStyle(Font.BOLD);</div><div class="line">        Paragraph paragraph = <span class="keyword">new</span> Paragraph( (text == <span class="keyword">null</span> ? <span class="string">""</span> : text), font);</div><div class="line">        Chapter chapter = <span class="keyword">new</span> Chapter(paragraph, number);</div><div class="line">        chapter.setBookmarkOpen(<span class="keyword">true</span>);</div><div class="line">        chapter.setBookmarkTitle(number + <span class="string">". "</span> + text);</div><div class="line">        chapter.setTriggerNewPage(<span class="keyword">false</span>);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            document.add(chapter);</div><div class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> chapter;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        Paragraph paragraph = <span class="keyword">new</span> Paragraph((text == <span class="keyword">null</span> ? <span class="string">""</span> : text));</div><div class="line">        Chapter chapter = <span class="keyword">new</span> Chapter(paragraph, number);</div><div class="line">        chapter.setBookmarkOpen(<span class="keyword">true</span>);</div><div class="line">        chapter.setBookmarkTitle(number + <span class="string">". "</span> + text);</div><div class="line">        chapter.setTriggerNewPage(<span class="keyword">false</span>);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            document.add(paragraph);</div><div class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> chapter;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 添加组内小标题(带标签)</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> document Document对象</div><div class="line"> * <span class="doctag">@param</span> chapter  Chapter对象</div><div class="line"> * <span class="doctag">@param</span> text     标题</div><div class="line"> * <span class="doctag">@param</span> number   序号</div><div class="line"> * <span class="doctag">@param</span> font     字体</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addGroupItem</span><span class="params">(Document document, Chapter chapter, String text, <span class="keyword">int</span> groupNumber, <span class="keyword">int</span> number, Font font)</span> </span>&#123;</div><div class="line">    addTextLine(document, <span class="string">""</span>, font);</div><div class="line">    <span class="keyword">if</span> (font != <span class="keyword">null</span>) &#123;</div><div class="line">        font.setSize(<span class="number">18f</span>);</div><div class="line">        font.setStyle(Font.BOLD);</div><div class="line">        Paragraph paragraph = <span class="keyword">new</span> Paragraph((text == <span class="keyword">null</span> ? <span class="string">""</span> : text), font);</div><div class="line">        Section section = chapter.addSection(paragraph);</div><div class="line">        section.setBookmarkOpen(<span class="keyword">true</span>);</div><div class="line">        section.setBookmarkTitle(groupNumber + <span class="string">"."</span> + number + <span class="string">". "</span> + text);</div><div class="line">        section.setTriggerNewPage(<span class="keyword">false</span>);</div><div class="line">        section.setNumberStyle(Section.NUMBERSTYLE_DOTTED_WITHOUT_FINAL_DOT);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            document.add(section);</div><div class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        Paragraph paragraph = <span class="keyword">new</span> Paragraph((text == <span class="keyword">null</span> ? <span class="string">""</span> : text));</div><div class="line">        Section section = chapter.addSection(paragraph);</div><div class="line">        section.setBookmarkOpen(<span class="keyword">true</span>);</div><div class="line">        section.setBookmarkTitle(groupNumber + <span class="string">"."</span> + number + <span class="string">". "</span> + text);</div><div class="line">        section.setNumberStyle(Section.NUMBERSTYLE_DOTTED_WITHOUT_FINAL_DOT);</div><div class="line">        section.setTriggerNewPage(<span class="keyword">false</span>);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            document.add(section);</div><div class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="添加水印"><a href="#添加水印" class="headerlink" title="添加水印"></a>添加水印</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 【功能描述：添加文字水印】</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> srcFile    待加水印文件</div><div class="line"> * <span class="doctag">@param</span> destFile   加水印后存放地址</div><div class="line"> * <span class="doctag">@param</span> text       加水印的文本内容</div><div class="line"> * <span class="doctag">@param</span> textWidth  文字横坐标 推荐300-400</div><div class="line"> * <span class="doctag">@param</span> textHeight 文字纵坐标 推荐300-400</div><div class="line"> * <span class="doctag">@throws</span> Exception</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addWaterMark</span><span class="params">(String srcFile, String destFile, String text,</span></span></div><div class="line">                           <span class="keyword">int</span> textWidth, <span class="keyword">int</span> textHeight) <span class="keyword">throws</span> Exception &#123;</div><div class="line">    <span class="comment">// 待加水印的文件</span></div><div class="line">    PdfReader reader = <span class="keyword">new</span> PdfReader(srcFile);</div><div class="line">    <span class="comment">// 加完水印的文件</span></div><div class="line">    PdfStamper stamper = <span class="keyword">new</span> PdfStamper(reader, <span class="keyword">new</span> FileOutputStream(</div><div class="line">            destFile));</div><div class="line">    <span class="keyword">int</span> total = reader.getNumberOfPages() + <span class="number">1</span>;</div><div class="line">    PdfContentByte content;</div><div class="line">    <span class="comment">// 设置字体</span></div><div class="line">    BaseFont font = BaseFont.createFont();</div><div class="line">    <span class="comment">// 循环对每页插入水印</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; total; i++) &#123;</div><div class="line">        <span class="comment">// 水印的起始</span></div><div class="line">        content = stamper.getUnderContent(i);</div><div class="line">        <span class="comment">// 开始</span></div><div class="line">        content.beginText();</div><div class="line">        <span class="comment">// 设置颜色 默认为浅灰色</span></div><div class="line">        content.setColorFill(<span class="keyword">new</span> BaseColor(<span class="number">238</span>, <span class="number">238</span>, <span class="number">238</span>));</div><div class="line">        <span class="comment">// 设置字体及字号</span></div><div class="line">        content.setFontAndSize(font, <span class="number">50</span>);</div><div class="line">        <span class="comment">// 设置起始位置</span></div><div class="line">        <span class="comment">// content.setTextMatrix(400, 880);</span></div><div class="line">        content.setTextMatrix(textWidth, textHeight);</div><div class="line">        <span class="comment">// 开始写入水印</span></div><div class="line">        content.showTextAligned(Element.ALIGN_CENTER, text, textWidth,</div><div class="line">                textHeight, <span class="number">45</span>);</div><div class="line">        content.endText();</div><div class="line">    &#125;</div><div class="line">    stamper.close();</div><div class="line">    <span class="keyword">return</span> destFile;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> SpringMVC </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PHP-多文件上传接口实现]]></title>
      <url>/2017/08/10/PHP-%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0/</url>
      <content type="html"><![CDATA[<p>想测试多文件上传功能；</p>
<p>使用PHP接口模拟一个接口非常方便；</p>
<p>PHP多文件上传接收接口示例：</p>
<a id="more"></a>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span> </div><div class="line">    <span class="comment">//忽略警告</span></div><div class="line">    error_reporting(E_ALL || ~E_NOTICE);</div><div class="line">    <span class="comment">//设置编码</span></div><div class="line">    header(<span class="string">"Content-type: text/html; charset=utf-8"</span>);</div><div class="line">    <span class="comment">/*设置时区*/</span></div><div class="line">    date_default_timezone_set(<span class="string">'prc'</span>);</div><div class="line">  </div><div class="line">    saveFiles();</div><div class="line">  </div><div class="line">    $isError = <span class="keyword">false</span>;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">saveFiles</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">foreach</span> ($_FILES <span class="keyword">as</span> $name =&gt; $values) &#123;</div><div class="line">            saveFile($name);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> ($isError == <span class="keyword">false</span>) &#123;</div><div class="line">            <span class="keyword">echo</span> <span class="string">'&#123;"code":"successfully", "data":&#123;"msg":"上传成功！"&#125;&#125;'</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">saveFile</span><span class="params">($file)</span></span></div><div class="line">    &#123;</div><div class="line">        $allowedExts = <span class="keyword">array</span>(<span class="string">"gif"</span>, <span class="string">"jpeg"</span>, <span class="string">"jpg"</span>, <span class="string">"png"</span>);</div><div class="line">        $temp = explode(<span class="string">"."</span>, $_FILES[$file][<span class="string">"name"</span>]);</div><div class="line">        $extension = end($temp);</div><div class="line">        <span class="keyword">if</span> ((($_FILES[$file][<span class="string">"type"</span>] == <span class="string">"image/gif"</span>)</div><div class="line">        || ($_FILES[$file][<span class="string">"type"</span>] == <span class="string">"image/jpeg"</span>)</div><div class="line">        || ($_FILES[$file][<span class="string">"type"</span>] == <span class="string">"image/jpg"</span>)</div><div class="line">        || ($_FILES[$file][<span class="string">"type"</span>] == <span class="string">"image/pjpeg"</span>)</div><div class="line">        || ($_FILES[$file][<span class="string">"type"</span>] == <span class="string">"image/x-png"</span>)</div><div class="line">        || ($_FILES[$file][<span class="string">"type"</span>] == <span class="string">"image/png"</span>))</div><div class="line">        &amp;&amp; in_array($extension, $allowedExts))</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span> ($_FILES[$file][<span class="string">"error"</span>] &gt; <span class="number">0</span>)</div><div class="line">            &#123;</div><div class="line">                $isError = <span class="keyword">true</span>;</div><div class="line">                <span class="keyword">echo</span> <span class="string">'&#123;"code":"fail", "data":&#123;"msg":"上传失败！"&#125;&#125;'</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span></div><div class="line">            &#123;</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (file_exists(<span class="string">"image/"</span>.$_FILES[$file][<span class="string">"name"</span>]))</div><div class="line">                &#123;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    move_uploaded_file($_FILES[$file][<span class="string">"tmp_name"</span>],</div><div class="line">                    <span class="string">"image/"</span>.$_FILES[$file][<span class="string">"name"</span>]);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            $isError = <span class="keyword">true</span>;</div><div class="line">            <span class="keyword">echo</span> <span class="string">'&#123;"code":"fail", "data":&#123;"msg":"非法文件格式！"&#125;&#125;'</span>;</div><div class="line">            <span class="keyword">break</span>;  </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> PHP </category>
            
        </categories>
        
        
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android常用代码-点击隐藏虚拟键盘]]></title>
      <url>/2017/08/10/Android%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD-%E7%82%B9%E5%87%BB%E9%9A%90%E8%97%8F%E8%99%9A%E6%8B%9F%E9%94%AE%E7%9B%98/</url>
      <content type="html"><![CDATA[<p>代码非常简单：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">view.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">        InputMethodManager imm = (InputMethodManager)v.getContext().getSystemService(INPUT_METHOD_SERVICE);</div><div class="line">        imm.hideSoftInputFromWindow(v.getWindowToken(), <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android常用代码 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Markdown-语法总结]]></title>
      <url>/2017/08/06/Markdown%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<h1 id="大标题"><a href="#大标题" class="headerlink" title="[大标题]"></a>[大标题]</h1><ul>
<li>语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># 标题内容</div></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="中标题"><a href="#中标题" class="headerlink" title="[中标题]"></a>[中标题]</h1><ul>
<li>语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">## 标题内容</div></pre></td></tr></table></figure>
<h1 id="小标题"><a href="#小标题" class="headerlink" title="[小标题]"></a>[小标题]</h1><ul>
<li>语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">### 标题内容</div></pre></td></tr></table></figure>
<h1 id="代码块"><a href="#代码块" class="headerlink" title="[代码块]"></a>[代码块]</h1><ul>
<li>语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">三个`</div><div class="line">	代码内容</div><div class="line">三个`</div></pre></td></tr></table></figure>
<h1 id="链接"><a href="#链接" class="headerlink" title="[链接]"></a>[链接]</h1><ul>
<li>语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[链接说明](链接地址)</div></pre></td></tr></table></figure>
<p><a href="https://github.com/PhilJay/MPAndroidChart" target="_blank" rel="external">https://github.com/PhilJay/MPAndroidChart</a></p>
<h1 id="图片"><a href="#图片" class="headerlink" title="[图片]"></a>[图片]</h1><ul>
<li>语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">![图片说明](图片路径或地址)</div></pre></td></tr></table></figure>
<p><img src="../../../../images/mpandroidcahrt.png" alt="zzimagebox"></p>
]]></content>
      
        <categories>
            
            <category> Markdown </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[SQL-快速将Excel的数据导入数据库]]></title>
      <url>/2017/07/28/SQL-%E5%BF%AB%E9%80%9F%E5%B0%86Excel%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      <content type="html"><![CDATA[<h3 id="关键代码"><a href="#关键代码" class="headerlink" title="关键代码"></a>关键代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">=CONCATENATE(&quot;INSERT INTO TableName (Colomn1, Column2) values (&apos;&quot;&amp;A1&amp;&quot;&apos;,&apos;&quot;&amp;B1&amp;&quot;&apos;);&quot;)</div><div class="line">`</div></pre></td></tr></table></figure>
<h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="../../../../images/excel.gif" alt="图1"></p>
]]></content>
      
        <categories>
            
            <category> SQL </category>
            
        </categories>
        
        
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android签名打包-获取Windows和Mac系统中调试证书和发布证书的SHA1]]></title>
      <url>/2017/07/28/Android%E7%AD%BE%E5%90%8D%E6%89%93%E5%8C%85-%E8%8E%B7%E5%8F%96Mac%E8%B0%83%E8%AF%95%E8%AF%81%E4%B9%A6%E7%9A%84SHA1/</url>
      <content type="html"><![CDATA[<hr>
<h2 id="发布证书"><a href="#发布证书" class="headerlink" title="发布证书"></a>发布证书</h2><hr>
<h2 id="Windows和Mac一样"><a href="#Windows和Mac一样" class="headerlink" title="Windows和Mac一样"></a>Windows和Mac一样</h2><ul>
<li><p>打开Android Studio</p>
</li>
<li><p>找到Terminal,studio下方</p>
</li>
</ul>
<a id="more"></a>
<ul>
<li>键入命令</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -v -list -keystore keystorePath(例:e:\test.keystore)</div></pre></td></tr></table></figure>
<ul>
<li>输入密钥库口令，即可查看相关信息</li>
</ul>
<p><em>注意</em>：如果命令不加-v 是没有MD5信息的</p>
<hr>
<h2 id="调试证书"><a href="#调试证书" class="headerlink" title="调试证书"></a>调试证书</h2><hr>
<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><ul>
<li><p>win+R</p>
</li>
<li><p>cmd,回车</p>
</li>
<li><p>输入如下命令 (admin是电脑用户名)：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -v -list -keystore c:\users\admin\.android\debug.keystore -alias androiddebugkey -storepass android -keypass android</div></pre></td></tr></table></figure>
<h2 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h2><ul>
<li><p>打开Android Studio</p>
</li>
<li><p>进入Terminal</p>
</li>
<li><p>输入如下命令：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android签名打包 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-Glide加载圆角或圆形图片]]></title>
      <url>/2017/07/27/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-Glide%E5%8A%A0%E8%BD%BD%E5%9C%86%E8%A7%92%E6%88%96%E5%9C%86%E5%BD%A2%E5%9B%BE%E7%89%87/</url>
      <content type="html"><![CDATA[<h3 id="添加类"><a href="#添加类" class="headerlink" title="添加类"></a>添加类</h3><a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.Resources;</div><div class="line"><span class="keyword">import</span> android.graphics.Bitmap;</div><div class="line"><span class="keyword">import</span> android.graphics.BitmapShader;</div><div class="line"><span class="keyword">import</span> android.graphics.Canvas;</div><div class="line"><span class="keyword">import</span> android.graphics.Paint;</div><div class="line"><span class="keyword">import</span> android.graphics.RectF;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;</div><div class="line"><span class="keyword">import</span> com.bumptech.glide.load.resource.bitmap.BitmapTransformation;</div><div class="line">  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlideCircleTransform</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">GlideRoundTransform</span> <span class="keyword">extends</span> <span class="title">BitmapTransformation</span> </span>&#123;</div><div class="line">  </div><div class="line">        <span class="keyword">private</span> <span class="keyword">float</span> radius = <span class="number">0f</span>;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">GlideRoundTransform</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">            <span class="keyword">this</span>(context, <span class="number">6</span>);</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">GlideRoundTransform</span><span class="params">(Context context, <span class="keyword">int</span> dp)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(context);</div><div class="line">            <span class="keyword">this</span>.radius = Resources.getSystem().getDisplayMetrics().density * dp;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="meta">@Override</span> <span class="function"><span class="keyword">protected</span> Bitmap <span class="title">transform</span><span class="params">(BitmapPool pool, Bitmap toTransform, <span class="keyword">int</span> outWidth, <span class="keyword">int</span> outHeight)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> roundCrop(pool, toTransform);</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">private</span> Bitmap <span class="title">roundCrop</span><span class="params">(BitmapPool pool, Bitmap source)</span> </span>&#123;</div><div class="line">  </div><div class="line">            <span class="keyword">if</span> (source == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">  </div><div class="line">            Bitmap result = pool.get(source.getWidth(), source.getHeight(), Bitmap.Config.ARGB_8888);</div><div class="line">            <span class="keyword">if</span> (result == <span class="keyword">null</span>) &#123;</div><div class="line">                result = Bitmap.createBitmap(source.getWidth(), source.getHeight(), Bitmap.Config.ARGB_8888);</div><div class="line">            &#125;</div><div class="line">  </div><div class="line">            Canvas canvas = <span class="keyword">new</span> Canvas(result);</div><div class="line">            Paint paint = <span class="keyword">new</span> Paint();</div><div class="line">            paint.setShader(<span class="keyword">new</span> BitmapShader(source, BitmapShader.TileMode.CLAMP, BitmapShader.TileMode.CLAMP));</div><div class="line">            paint.setAntiAlias(<span class="keyword">true</span>);</div><div class="line">            RectF rectF = <span class="keyword">new</span> RectF(<span class="number">0f</span>, <span class="number">0f</span>, source.getWidth(), source.getHeight());</div><div class="line">            canvas.drawRoundRect(rectF, radius, radius, paint);</div><div class="line">            <span class="keyword">return</span> result;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> getClass().getName() + Math.round(radius);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Glide.with(context)</div><div class="line">	.load(url)</div><div class="line">	.transform(<span class="keyword">new</span> CenterCrop(mContext), </div><div class="line">		<span class="keyword">new</span> GlideCircleTransform.GlideRoundTransform(mContext, <span class="number">300</span>))</div><div class="line">	.into(imageView);</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android签名打包-指定apk文件名]]></title>
      <url>/2017/07/27/Android%E7%AD%BE%E5%90%8D%E6%89%93%E5%8C%85-%E6%8C%87%E5%AE%9Aapk%E6%96%87%E4%BB%B6%E5%90%8D/</url>
      <content type="html"><![CDATA[<h2 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h2><ul>
<li>Android Studio</li>
</ul>
<h2 id="操作方法"><a href="#操作方法" class="headerlink" title="操作方法"></a>操作方法</h2><p>在build.gradle中加入</p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">android &#123;</div><div class="line">  </div><div class="line">	//...</div><div class="line">  </div><div class="line">    applicationVariants.all &#123;variant -&gt;</div><div class="line">        variant.outputs.each &#123;output -&gt;</div><div class="line">            def outputFile = output.outputFile</div><div class="line">            def fileName</div><div class="line">            if (outputFile != null &amp;&amp; outputFile.name.endsWith(&apos;.apk&apos;)) &#123;</div><div class="line">                if (variant.buildType.name.equals(&apos;release&apos;)) &#123;</div><div class="line">                    fileName = &quot;APP名称_$&#123;defaultConfig.versionName&#125;_$&#123;defaultConfig.versionCode&#125;.apk&quot;</div><div class="line">                &#125; else if (variant.buildType.name.equals(&apos;debug&apos;)) &#123;</div><div class="line">                    fileName = &quot;APP名称_$&#123;defaultConfig.versionName&#125;_$&#123;defaultConfig.versionCode&#125;_debug.apk&quot;</div><div class="line">                &#125;</div><div class="line">                output.outputFile = new File(outputFile.parent, fileName)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android签名打包 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaEE-SpringMVC之pom.xml]]></title>
      <url>/2017/07/20/JavaEE-SpringMVC%E4%B9%8Bpom-xml/</url>
      <content type="html"><![CDATA[<h2 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h2><ul>
<li>InteliJ IDEA</li>
</ul>
<h2 id="新建一个maven工程"><a href="#新建一个maven工程" class="headerlink" title="新建一个maven工程"></a>新建一个maven工程</h2><h2 id="复制如下依赖"><a href="#复制如下依赖" class="headerlink" title="复制如下依赖"></a>复制如下依赖</h2><a id="more"></a>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></div><div class="line">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">  </div><div class="line">	<span class="comment">&lt;!-- 这个不要照抄 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>me.zhouzhuo810<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzapidoc-maven<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">   </div><div class="line">   </div><div class="line">    <span class="comment">&lt;!-- Nexus 私服配置 --&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;repositories&gt;</span></div><div class="line">        &lt;repository&gt;</div><div class="line">            &lt;id&gt;nexus&lt;/id&gt;</div><div class="line">            &lt;name&gt;Nexus&lt;/name&gt;</div><div class="line">            &lt;url&gt;http://localhost:8081/nexus/content/groups/public/&lt;/url&gt;</div><div class="line">            &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;</div><div class="line">            &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;</div><div class="line">        &lt;/repository&gt;</div><div class="line">    &lt;/repositories&gt;</div><div class="line">    &lt;pluginRepositories&gt;</div><div class="line">        &lt;pluginRepository&gt;</div><div class="line">            &lt;id&gt;nexus&lt;/id&gt;</div><div class="line">            &lt;name&gt;Nexus&lt;/name&gt;</div><div class="line">            &lt;url&gt;http://localhost:8081/nexus/content/groups/public/&lt;/url&gt;</div><div class="line">            &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;</div><div class="line">            &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;</div><div class="line">        &lt;/pluginRepository&gt;</div><div class="line">    &lt;/pluginRepositories&gt;--&gt;</div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">developer</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>web<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>alexgaoyh<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">email</span>&gt;</span>alexgaoyh@sina.com<span class="tag">&lt;/<span class="name">email</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">developer</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- Quartz framework --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.quartz-scheduler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>quartz<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.json<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>20140107<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-lang<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="comment">&lt;!-- hibernate  start --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.javassist<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javassist<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.18.0-GA<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.4.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-commons-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-tools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0-CR1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- hibernate  end --&gt;</span></div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="comment">&lt;!-- emial support --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.mail<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="comment">&lt;!-- Shiro security --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-cas<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- end of Shiro security --&gt;</span></div><div class="line">  </div><div class="line">        <span class="comment">&lt;!-- jstl jsp页面标签 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="comment">&lt;!-- json jackson --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.jackson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core-asl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.jackson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-mapper-asl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span> <span class="comment">&lt;!--打包时不包含--&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>   <span class="comment">&lt;!--这里说明jsp-api.jar文件将由应用服务器提供，打包时不需要包含--&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">  </div><div class="line">        <span class="comment">&lt;!-- 测试使用，打包时不会打进去 --&gt;</span></div><div class="line">        <span class="comment">&lt;!-- Sprint-test 相关测试包 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.11.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>web<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 这里的 tomcat7-maven-plugin 为使用插件部署Maven Web项目：--&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 此处需要配置本地环境，tomcat: tomcat_user。xml，添加manager角色和用户，用于插件自动部署应用 --&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 打开Maven： setting.xml，在&lt;servers&gt;节点下配置上面的相关Tomcat的Manager用户信息， --&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 开启下面的插件配置代码段 --&gt;</span></div><div class="line">        <span class="comment">&lt;!-- tomcat7:deploy  tomcat7:redeploy  tomcat7:undeploy --&gt;</span></div><div class="line">        <span class="comment">&lt;!-- &lt;plugins&gt;</span></div><div class="line">            &lt;plugin&gt;</div><div class="line">                &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;</div><div class="line">                &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;</div><div class="line">                &lt;version&gt;2.2&lt;/version&gt;</div><div class="line">                &lt;configuration&gt;</div><div class="line">                &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt; tomcat管理路径</div><div class="line">                &lt;server&gt;Tomcat7&lt;/server&gt; 与settings.xml文件中Server的id相同</div><div class="line">                &lt;path&gt;/web&lt;/path&gt; 应用的部署位置</div><div class="line">                &lt;/configuration&gt;</div><div class="line">            &lt;/plugin&gt;</div><div class="line">        &lt;/plugins&gt; --&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div><div class="line">  </div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> SpringMVC </category>
            
        </categories>
        
        
        <tags>
            
            <tag> JavaEE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-EditText抢占焦点使ScrollView自动滑动问题]]></title>
      <url>/2017/07/18/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-EditText%E6%8A%A2%E5%8D%A0%E7%84%A6%E7%82%B9%E4%BD%BFScrollView%E8%87%AA%E5%8A%A8%E6%BB%91%E5%8A%A8%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>解决方法：</p>
<p>重写ScrollView的这个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">requestChildRectangleOnScreen</span><span class="params">(View child, Rect rectangle, <span class="keyword">boolean</span> immediate)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> child <span class="keyword">instanceof</span> EditText;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift开源控件-汇总]]></title>
      <url>/2017/06/29/Swift%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-%E6%B1%87%E6%80%BB/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Github上的实用的Swift开源控件(后续看到再补充)</div></pre></td></tr></table></figure>
<h3 id="网络框架"><a href="#网络框架" class="headerlink" title="网络框架"></a>网络框架</h3><p><a href="https://github.com/Alamofire/Alamofire" target="_blank" rel="external">Alamofire</a></p>
<h3 id="图片框架"><a href="#图片框架" class="headerlink" title="图片框架"></a>图片框架</h3><p><a href="https://github.com/Alamofire/AlamofireImage" target="_blank" rel="external">AlamofireImage</a></p>
<a id="more"></a>
<h3 id="进度提示"><a href="#进度提示" class="headerlink" title="进度提示"></a>进度提示</h3><p><a href="https://github.com/johnlui/SwiftNotice" target="_blank" rel="external">SwiftNotice</a></p>
<h3 id="JSON解析"><a href="#JSON解析" class="headerlink" title="JSON解析"></a>JSON解析</h3><p><a href="https://github.com/SwiftyJSON/SwiftyJSON" target="_blank" rel="external">SwiftyJSON</a></p>
]]></content>
      
        <categories>
            
            <category> Swift开源控件 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android自定义控件-CameraCardCrop]]></title>
      <url>/2017/06/22/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-CameraCardCrop/</url>
      <content type="html"><![CDATA[<h1 id="CameraCardCrop"><a href="#CameraCardCrop" class="headerlink" title="CameraCardCrop"></a>CameraCardCrop</h1><p>一个卡片（证件）拍照裁剪框架。<br>(A cutting framework for card-photo.)</p>
<h2 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compile &apos;me.zhouzhuo810.cameracardcrop:camera-card-crop:1.0.2&apos;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="Screenshot"><a href="#Screenshot" class="headerlink" title="Screenshot"></a>Screenshot</h2><p><img src="../../../../images/cameracrop2.png" width="300px"><br><img src="../../../../images/cameracrop1.png" width="300px"></p>
<h2 id="Notice"><a href="#Notice" class="headerlink" title="Notice"></a>Notice</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">card</div><div class="line"></div><div class="line">---------------------</div><div class="line">|       width       |</div><div class="line">|                   |</div><div class="line">|                   |height</div><div class="line">|                   |</div><div class="line">---------------------</div><div class="line">phone</div><div class="line">------------------------------------</div><div class="line">|                                   |</div><div class="line">|                                   |</div><div class="line">|                                   |</div><div class="line">|                                   |</div><div class="line">|                                   |</div><div class="line">|      mask                         |</div><div class="line">|                                   |</div><div class="line">|                width              |</div><div class="line">|    ------------------------       |</div><div class="line">|    |                       |      |</div><div class="line">|    |                height |      | screen height</div><div class="line">|    |         rect          |      |</div><div class="line">|    |                       |      |</div><div class="line">|    ------------------------       |</div><div class="line">|                                   |</div><div class="line">|                                   |</div><div class="line">|                                   |</div><div class="line">|                                   |</div><div class="line">|                                   |</div><div class="line">|            screen width           |</div><div class="line">-------------------------------------</div><div class="line">CameraConfig.RATIO_WIDTH = card&apos;s width</div><div class="line">CameraConfig.RATIO_HEIGHT = card&apos;s height</div><div class="line">CameraConfig.PERCENT_WIDTH = rect&apos;swidth / screen&apos;s width</div></pre></td></tr></table></figure>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><h3 id="step-1-Add-Activity-in-your-AndroidManifest-xml-file"><a href="#step-1-Add-Activity-in-your-AndroidManifest-xml-file" class="headerlink" title="step 1. Add Activity in your AndroidManifest.xml file."></a>step 1. Add Activity in your AndroidManifest.xml file.</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">"me.zhouzhuo810.cameracardcrop.CropActivity"</span></span></div><div class="line">    <span class="attr">android:screenOrientation</span>=<span class="string">"portrait"</span></div><div class="line">    <span class="attr">android:theme</span>=<span class="string">"@style/Theme.AppCompat.NoActionBar"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="step-2-Add-permissions-in-your-AndroidManifest-xml-file"><a href="#step-2-Add-permissions-in-your-AndroidManifest-xml-file" class="headerlink" title="step 2. Add permissions in your AndroidManifest.xml file."></a>step 2. Add permissions in your AndroidManifest.xml file.</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CAMERA"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.MOUNT_UNMOUNT_FILESYSTEMS"</span>/&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">"android.hardware.camera"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-feature</span> <span class="attr">android:name</span>=<span class="string">"android.hardware.camera.autofocus"</span> /&gt;</span></div></pre></td></tr></table></figure>
<h3 id="step-3-Example-for-use"><a href="#step-3-Example-for-use" class="headerlink" title="step 3. Example for use."></a>step 3. Example for use.</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">takePhoto</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">    Intent intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, CropActivity.class);</div><div class="line">    intent.putExtra(CameraConfig.RATIO_WIDTH, <span class="number">855</span>);</div><div class="line">    intent.putExtra(CameraConfig.RATIO_HEIGHT, <span class="number">541</span>);  </div><div class="line">    intent.putExtra(CameraConfig.PERCENT_WIDTH, <span class="number">0.8f</span>); <span class="comment">//[0,1]</span></div><div class="line">    intent.putExtra(CameraConfig.MASK_COLOR, <span class="number">0x2f000000</span>);</div><div class="line">    intent.putExtra(CameraConfig.RECT_CORNER_COLOR, <span class="number">0xff00ff00</span>);</div><div class="line">    intent.putExtra(CameraConfig.TEXT_COLOR, <span class="number">0xffffffff</span>);</div><div class="line">    intent.putExtra(CameraConfig.HINT_TEXT, <span class="string">"请将方框对准证件拍照"</span>);</div><div class="line">    intent.putExtra(CameraConfig.IMAGE_PATH, Environment.getExternalStorageDirectory().getAbsolutePath()+<span class="string">"/CameraCardCrop/"</span>+System.currentTimeMillis()+<span class="string">".jpg"</span>);</div><div class="line">    startActivityForResult(intent, <span class="number">0x01</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</div><div class="line">    <span class="keyword">if</span> (resultCode == RESULT_OK) &#123;</div><div class="line">        <span class="keyword">if</span> (requestCode == <span class="number">0x01</span>) &#123;</div><div class="line">            String path = data.getStringExtra(CameraConfig.IMAGE_PATH);</div><div class="line">            ivPic.setImageURI(Uri.parse(<span class="string">"file://"</span>+path));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Android自定义控件 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android开源控件-MPAndroidChart]]></title>
      <url>/2017/06/21/Android%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6-MPAndroidChart/</url>
      <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="为什么要写这个小结？"><a href="#为什么要写这个小结？" class="headerlink" title="为什么要写这个小结？"></a>为什么要写这个小结？</h3><ul>
<li>MPAndroidChart文档是英文的，demo没有注释。</li>
<li>为了让以后使用MPAndroidChart更加方便。</li>
</ul>
<a id="more"></a>
<h2 id="MPAndroidChart简介"><a href="#MPAndroidChart简介" class="headerlink" title="MPAndroidChart简介"></a>MPAndroidChart简介</h2><h3 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a>项目地址</h3><p><a href="https://github.com/PhilJay/MPAndroidChart" target="_blank" rel="external">https://github.com/PhilJay/MPAndroidChart</a></p>
<h3 id="我用的版本"><a href="#我用的版本" class="headerlink" title="我用的版本"></a>我用的版本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compile &apos;com.github.PhilJay:MPAndroidChart:v3.0.2&apos;</div></pre></td></tr></table></figure>
<h2 id="用法总结"><a href="#用法总结" class="headerlink" title="用法总结"></a>用法总结</h2><h3 id="折线图-曲线图-LineChart"><a href="#折线图-曲线图-LineChart" class="headerlink" title="折线图/曲线图(LineChart)"></a>折线图/曲线图(LineChart)</h3><ul>
<li>初始化控件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//是否画背景线</span></div><div class="line">weekChart.setDrawGridBackground(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否画边界</span></div><div class="line">weekChart.setDrawBorders(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否画标记</span></div><div class="line">weekChart.setDrawMarkers(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否画色标</span></div><div class="line">weekChart.getLegend().setEnabled(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否显示描述</span></div><div class="line">weekChart.getDescription().setEnabled(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//空数据提示文字</span></div><div class="line">weekChart.setNoDataText(getString(R.string.no_data));</div><div class="line"><span class="comment">//横坐标的位置(上，下，或上和下)</span></div><div class="line">weekChart.getXAxis().setPosition(XAxis.XAxisPosition.BOTTOM);</div><div class="line"><span class="comment">//是否画横坐标的线(竖线)</span></div><div class="line">weekChart.getXAxis().setDrawGridLines(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否画右边的纵坐标</span></div><div class="line">weekChart.getAxisRight().setEnabled(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否画左边的纵坐标的线</span></div><div class="line">weekChart.getAxisLeft().setDrawGridLines(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否画左边的纵坐标</span></div><div class="line">weekChart.getAxisLeft().setDrawLabels(<span class="keyword">true</span>);</div></pre></td></tr></table></figure>
<ul>
<li>让第一点和最后一点显示全</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//设置最小X坐标小于0</span></div><div class="line">weekChart.getXAxis().setAxisMinimum(-<span class="number">0.5f</span>);</div><div class="line"><span class="comment">//设置最大X坐标大于 (点的数量-0.5)</span></div><div class="line">weekChart.getXAxis().setAxisMaximum(week.size()-<span class="number">0.5f</span>);</div></pre></td></tr></table></figure>
<ul>
<li>设置X坐标不跳过或省略</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//设置X坐标个数，以保证X坐标都显示出来</span></div><div class="line">weekChart.getXAxis().setLabelCount(week.size());</div></pre></td></tr></table></figure>
<ul>
<li>数据填充</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateWeek</span><span class="params">(<span class="keyword">final</span> List&lt;GetDefectiveRateResult.DataEntity.WeekEntity&gt; week)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (week != <span class="keyword">null</span> &amp;&amp; week.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="comment">//设置左右间距</span></div><div class="line">        weekChart.getXAxis().setAxisMinimum(-<span class="number">0.5f</span>);</div><div class="line">        weekChart.getXAxis().setAxisMaximum(week.size()-<span class="number">0.5f</span>);</div><div class="line">        <span class="comment">//设置X坐标不省略</span></div><div class="line">        weekChart.getXAxis().setLabelCount(week.size());</div><div class="line">        <span class="comment">//数据处理</span></div><div class="line">        List&lt;Entry&gt; values = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; week.size(); i++) &#123;</div><div class="line">            GetDefectiveRateResult.DataEntity.WeekEntity weekEntity = week.get(i);</div><div class="line">            values.add(<span class="keyword">new</span> Entry(i, weekEntity.getValue()));</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//修改X坐标的值</span></div><div class="line">        weekChart.getXAxis().setValueFormatter(<span class="keyword">new</span> IAxisValueFormatter() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">getFormattedValue</span><span class="params">(<span class="keyword">float</span> value, AxisBase axis)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> week.get((<span class="keyword">int</span>) value).getName();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        LineDataSet lineDataSet = <span class="keyword">new</span> LineDataSet(values, <span class="string">"周废品率(%)"</span>);</div><div class="line">        <span class="comment">//圆圈外圈的半径</span></div><div class="line">        lineDataSet.setCircleRadius(<span class="number">4f</span>);</div><div class="line">        <span class="comment">//圆圈空心的半径</span></div><div class="line">        lineDataSet.setCircleHoleRadius(<span class="number">3f</span>);</div><div class="line">        <span class="comment">//圆环的颜色</span></div><div class="line">        lineDataSet.setCircleColor(getResources().getColor(R.color.colorBarColor));</div><div class="line">        <span class="comment">//折线或曲线的宽度</span></div><div class="line">        lineDataSet.setLineWidth(<span class="number">2f</span>);</div><div class="line">        <span class="comment">//线的模式：决定是 折线还是曲线</span></div><div class="line">        lineDataSet.setMode(LineDataSet.Mode.CUBIC_BEZIER);</div><div class="line">        <span class="comment">//线的颜色</span></div><div class="line">        lineDataSet.setColor(getResources().getColor(R.color.colorBarColor));</div><div class="line">        <span class="comment">//线下方是否填充颜色</span></div><div class="line">        lineDataSet.setDrawFilled(<span class="keyword">true</span>);</div><div class="line">        <span class="comment">//设置线下方填充的颜色</span></div><div class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">18</span>) &#123;</div><div class="line">            lineDataSet.setFillDrawable(getResources().getDrawable(R.drawable.line_one_shape));</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            lineDataSet.setFillColor(<span class="number">0x4f2F7EDB</span>);</div><div class="line">        &#125;</div><div class="line">        LineData lineData = <span class="keyword">new</span> LineData(lineDataSet);</div><div class="line">        weekChart.setData(lineData);</div><div class="line">        weekChart.invalidate();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">//没数据时清理图表</span></div><div class="line">        weekChart.clear();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>line_one_shape.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">gradient</span> <span class="attr">android:startColor</span>=<span class="string">"#7f2F7EDB"</span> <span class="attr">android:angle</span>=<span class="string">"270"</span></span></div><div class="line">        <span class="attr">android:endColor</span>=<span class="string">"@android:color/transparent"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="饼状图-PieChart"><a href="#饼状图-PieChart" class="headerlink" title="饼状图(PieChart)"></a>饼状图(PieChart)</h3><ul>
<li>初始化控件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//空数据提示</span></div><div class="line">reasonPieChart.setNoDataText(getString(R.string.no_data));</div><div class="line"><span class="comment">//使用百分比值画图(也就是说按数据的大小比例画图)</span></div><div class="line">reasonPieChart.setUsePercentValues(<span class="keyword">true</span>);</div><div class="line"><span class="comment">//描述</span></div><div class="line">reasonPieChart.getDescription().setEnabled(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//饼状图的位置偏移</span></div><div class="line">reasonPieChart.setExtraOffsets(<span class="number">5</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">  </div><div class="line"><span class="comment">//是否可以拖动旋转</span></div><div class="line">reasonPieChart.setRotationEnabled(<span class="keyword">true</span>);</div><div class="line"><span class="comment">//好像是拖动转圈后松手的惯性(0到1,越大越快)</span></div><div class="line">reasonPieChart.setDragDecelerationFrictionCoef(<span class="number">0.95f</span>);</div><div class="line">    </div><div class="line"><span class="comment">//是否画中间的文字</span></div><div class="line">reasonPieChart.setDrawCenterText(<span class="keyword">true</span>);</div><div class="line"><span class="comment">//中间的文字</span></div><div class="line">reasonPieChart.setCenterText(<span class="string">"原因废品率(%)"</span>);</div><div class="line">   </div><div class="line"><span class="comment">//是否画中间的洞</span></div><div class="line">reasonPieChart.setDrawHoleEnabled(<span class="keyword">true</span>);</div><div class="line"><span class="comment">//中间洞的颜色</span></div><div class="line">reasonPieChart.setHoleColor(Color.WHITE);</div><div class="line"><span class="comment">//中间洞外边一小圈的颜色</span></div><div class="line">reasonPieChart.setTransparentCircleColor(Color.WHITE);</div><div class="line"><span class="comment">//中间洞外边一小圈的透明度</span></div><div class="line">reasonPieChart.setTransparentCircleAlpha(<span class="number">110</span>);</div><div class="line"><span class="comment">//中间洞的半径</span></div><div class="line">reasonPieChart.setHoleRadius(<span class="number">48f</span>);</div><div class="line"><span class="comment">//洞外小圈的半径</span></div><div class="line">reasonPieChart.setTransparentCircleRadius(<span class="number">51f</span>);</div><div class="line">  </div><div class="line"><span class="comment">//设置旋转的角度</span></div><div class="line">reasonPieChart.setRotationAngle(<span class="number">0</span>);</div><div class="line">    </div><div class="line"><span class="comment">//是否画扇形内部的文字</span></div><div class="line">reasonPieChart.setDrawEntryLabels(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//扇形内部文字的颜色</span></div><div class="line">reasonPieChart.setEntryLabelColor(Color.BLACK);</div><div class="line"><span class="comment">//扇形内部文字的大小</span></div><div class="line">reasonPieChart.setEntryLabelTextSize(<span class="number">7f</span>);</div><div class="line">  </div><div class="line">    </div><div class="line"><span class="comment">//是否启用色标</span></div><div class="line">reasonPieChart.getLegend().setEnabled(<span class="keyword">true</span>);</div><div class="line">Legend legend = reasonPieChart.getLegend();</div><div class="line"><span class="comment">//色标的方面</span></div><div class="line">legend.setOrientation(Legend.LegendOrientation.VERTICAL);</div><div class="line"><span class="comment">//色标的水平位置</span></div><div class="line">legend.setHorizontalAlignment(Legend.LegendHorizontalAlignment.RIGHT);</div><div class="line"><span class="comment">//色标的垂直位置</span></div><div class="line">legend.setVerticalAlignment(Legend.LegendVerticalAlignment.CENTER);</div><div class="line"><span class="comment">//色标画在图标外面还是里面</span></div><div class="line">legend.setDrawInside(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//色标文字的大小</span></div><div class="line">legend.setTextSize(<span class="number">11f</span>);</div></pre></td></tr></table></figure>
<ul>
<li>数据填充</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateReason</span><span class="params">(<span class="keyword">final</span> List&lt;GetDefectiveRateResult.DataEntity.ReasonEntity&gt; reason)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (reason != <span class="keyword">null</span> &amp;&amp; reason.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">        List&lt;PieEntry&gt; yVals = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; reason.size(); i++) &#123;</div><div class="line">            GetDefectiveRateResult.DataEntity.ReasonEntity reasonEntity = reason.get(i);</div><div class="line">            <span class="comment">//值和名称</span></div><div class="line">            PieEntry barEntry = <span class="keyword">new</span> PieEntry(reasonEntity.getValue(), <span class="string">"["</span>+reasonEntity.getValue()+<span class="string">"%] "</span>+reasonEntity.getName());</div><div class="line">            yVals.add(barEntry);</div><div class="line">        &#125;</div><div class="line">        PieDataSet set = <span class="keyword">new</span> PieDataSet(yVals, <span class="string">""</span>);</div><div class="line">        ArrayList&lt;Integer&gt; colors = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="comment">//扇形的颜色</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> vordiplomColor : ColorTemplate.VORDIPLOM_COLORS) &#123;</div><div class="line">            colors.add(vordiplomColor);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> libertyColor : ColorTemplate.LIBERTY_COLORS) &#123;</div><div class="line">            colors.add(libertyColor);</div><div class="line">        &#125;</div><div class="line">        set.setColors(colors);</div><div class="line">        <span class="comment">//数值的的颜色</span></div><div class="line">        set.setValueTextColor(Color.BLACK);</div><div class="line">        <span class="comment">//分隔线的颜色</span></div><div class="line">        set.setValueLineColor(Color.WHITE);</div><div class="line">        PieData barData = <span class="keyword">new</span> PieData(set);</div><div class="line">        <span class="comment">//数值的大小</span></div><div class="line">        barData.setValueTextSize(<span class="number">7f</span>);</div><div class="line">        reasonPieChart.setData(barData);</div><div class="line">        reasonPieChart.invalidate();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        reasonPieChart.clear();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="柱状图-BarChart-HorizontalBarChart"><a href="#柱状图-BarChart-HorizontalBarChart" class="headerlink" title="柱状图(BarChart/HorizontalBarChart)"></a>柱状图(BarChart/HorizontalBarChart)</h3><ul>
<li>初始化控件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//是否画柱子的底色</span></div><div class="line">reasonBarChart.setDrawBarShadow(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否画数字在柱子顶部</span></div><div class="line">reasonBarChart.setDrawValueAboveBar(<span class="keyword">true</span>);</div><div class="line"><span class="comment">//是否显示右下角的描述</span></div><div class="line">reasonBarChart.getDescription().setEnabled(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否双向指缩放</span></div><div class="line">reasonBarChart.setPinchZoom(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否画背景格子</span></div><div class="line">reasonBarChart.setDrawGridBackground(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//是否显示右边的坐标</span></div><div class="line">reasonBarChart.getAxisRight().setEnabled(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//x轴的位置(左边，右边，两边)</span></div><div class="line">reasonBarChart.getXAxis().setPosition(XAxis.XAxisPosition.BOTTOM);</div><div class="line"><span class="comment">//是否显示X轴的坐标线</span></div><div class="line">reasonBarChart.getXAxis().setDrawGridLines(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//设置X轴坐标的文字大小</span></div><div class="line">reasonBarChart.getXAxis().setTextSize(<span class="number">9f</span>);</div><div class="line"><span class="comment">//设置X轴坐标的旋转角度</span></div><div class="line"><span class="comment">//reasonBarChart.getXAxis().setLabelRotationAngle(45);</span></div><div class="line"><span class="comment">//是否显示左边Y轴的坐标线</span></div><div class="line">reasonBarChart.getAxisLeft().setDrawGridLines(<span class="keyword">false</span>);</div><div class="line"><span class="comment">//设置左边Y轴的最小值</span></div><div class="line">reasonBarChart.getAxisLeft().setAxisMinimum(<span class="number">0f</span>);</div><div class="line"><span class="comment">//设置左边Y轴的是否显示</span></div><div class="line">reasonBarChart.getAxisLeft().setEnabled(<span class="keyword">false</span>);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//色标</span></div><div class="line">Legend legend = reasonBarChart.getLegend();</div><div class="line">legend.setEnabled(<span class="keyword">false</span>);</div><div class="line">legend.setOrientation(Legend.LegendOrientation.HORIZONTAL);</div><div class="line">legend.setHorizontalAlignment(Legend.LegendHorizontalAlignment.RIGHT);</div><div class="line">legend.setVerticalAlignment(Legend.LegendVerticalAlignment.CENTER);</div><div class="line">legend.setForm(Legend.LegendForm.SQUARE);</div><div class="line">legend.setFormSize(<span class="number">9f</span>);</div><div class="line">legend.setXEntrySpace(<span class="number">4f</span>);</div><div class="line">legend.setDrawInside(<span class="keyword">false</span>);</div><div class="line">legend.setTextSize(<span class="number">11f</span>);</div></pre></td></tr></table></figure>
<ul>
<li>X轴坐标转换</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">productBarChart.getXAxis().setValueFormatter(<span class="keyword">new</span> IAxisValueFormatter() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFormattedValue</span><span class="params">(<span class="keyword">float</span> value, AxisBase axis)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> product.get((<span class="keyword">int</span>) value).getName()+<span class="string">" ["</span>+product.get((<span class="keyword">int</span>) value).getValue()+<span class="string">"%]"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>填充数据</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateProduct</span><span class="params">(<span class="keyword">final</span> List&lt;GetDefectiveRateResult.DataEntity.ProductEntity&gt; product)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (product != <span class="keyword">null</span> &amp;&amp; product.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="comment">//保证X坐标显示全</span></div><div class="line">        productBarChart.getXAxis().setLabelCount(product.size());</div><div class="line">        <span class="comment">//调整显示顺序</span></div><div class="line">        Collections.reverse(product);</div><div class="line">        <span class="comment">//整理数据</span></div><div class="line">        List&lt;BarEntry&gt; yVals = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; product.size(); i++) &#123;</div><div class="line">            GetDefectiveRateResult.DataEntity.ProductEntity productEntity = product.get(i);</div><div class="line">            BarEntry barEntry = <span class="keyword">new</span> BarEntry(i, productEntity.getValue());</div><div class="line">            yVals.add(barEntry);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//X轴坐标转换</span></div><div class="line">        productBarChart.getXAxis().setValueFormatter(<span class="keyword">new</span> IAxisValueFormatter() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">getFormattedValue</span><span class="params">(<span class="keyword">float</span> value, AxisBase axis)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> product.get((<span class="keyword">int</span>) value).getName()+<span class="string">" ["</span>+product.get((<span class="keyword">int</span>) value).getValue()+<span class="string">"%]"</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    </div><div class="line">        BarDataSet set = <span class="keyword">new</span> BarDataSet(yVals, <span class="string">""</span>);</div><div class="line">        <span class="comment">//设置柱子颜色</span></div><div class="line">        ArrayList&lt;Integer&gt; colors = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> joyfulColor : ColorTemplate.JOYFUL_COLORS) &#123;</div><div class="line">            colors.add(joyfulColor);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> colorfulColor : ColorTemplate.COLORFUL_COLORS) &#123;</div><div class="line">            colors.add(colorfulColor);</div><div class="line">        &#125;</div><div class="line">        set.setColors(colors);</div><div class="line">        <span class="comment">//设置柱子上文字的颜色</span></div><div class="line">        set.setValueTextColor(Color.BLACK);</div><div class="line">        <span class="comment">//设置柱子上文字的值是否显示</span></div><div class="line">        set.setDrawValues(<span class="keyword">true</span>);</div><div class="line">        BarData barData = <span class="keyword">new</span> BarData(set);</div><div class="line">        <span class="comment">//设置柱子上文字的大小</span></div><div class="line">        barData.setValueTextSize(<span class="number">7f</span>);</div><div class="line">        productBarChart.setData(barData);</div><div class="line">        productBarChart.invalidate();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        productBarChart.clear();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="../../../../images/mpandroidcahrt.png" alt="图1"></p>
<p><img src="../../../../images/mpandroidchart2.png" alt="图2"></p>
]]></content>
      
        <categories>
            
            <category> Android开源控件 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android 6.0新特性-动态权限申请]]></title>
      <url>/2017/06/14/Android-6-0%E6%96%B0%E7%89%B9%E6%80%A7-%E5%8A%A8%E6%80%81%E6%9D%83%E9%99%90%E7%94%B3%E8%AF%B7/</url>
      <content type="html"><![CDATA[<p>Android 6.0之后，部分权限需要动态申请。<br>但是AndroidManifest.xml文件中同样需要申明。</p>
<h2 id="常见处理方式"><a href="#常见处理方式" class="headerlink" title="常见处理方式"></a>常见处理方式</h2><h3 id="请求权限"><a href="#请求权限" class="headerlink" title="请求权限"></a>请求权限</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt; <span class="number">22</span>) &#123;</div><div class="line">     <span class="keyword">if</span> (ActivityCompat.checkSelfPermission(<span class="keyword">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">         <span class="keyword">if</span> (!ActivityCompat.shouldShowRequestPermissionRationale(<span class="keyword">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE)) &#123;</div><div class="line">             Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"这里提示用户进入设置界面开启权限"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">         &#125; <span class="keyword">else</span> &#123;</div><div class="line">             <span class="comment">//Request</span></div><div class="line">             ActivityCompat.requestPermissions(MainActivity.<span class="keyword">this</span>, <span class="keyword">new</span> String[] &#123;Manifest.permission.WRITE_EXTERNAL_STORAGE&#125;, <span class="number">0x01</span>);</div><div class="line">         &#125;</div><div class="line">     &#125; <span class="keyword">else</span> &#123;</div><div class="line">         <span class="comment">//Allow...</span></div><div class="line">     &#125;</div><div class="line"> &#125; <span class="keyword">else</span> &#123;</div><div class="line">     <span class="comment">//Allow...</span></div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="Activity必须implements-ActivityCompat-OnRequestPermissionsResultCallback"><a href="#Activity必须implements-ActivityCompat-OnRequestPermissionsResultCallback" class="headerlink" title="Activity必须implements ActivityCompat.OnRequestPermissionsResultCallback"></a>Activity必须implements ActivityCompat.OnRequestPermissionsResultCallback</h3><h3 id="处理请求结果"><a href="#处理请求结果" class="headerlink" title="处理请求结果"></a>处理请求结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, @NonNull String[] permissions, @NonNull <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</div><div class="line">    <span class="keyword">if</span> (requestCode == <span class="number">0x01</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">                Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"Allow"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">                <span class="comment">//allow...</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"Deny"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">                <span class="comment">//deny...</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="使用RxPermission-推荐"><a href="#使用RxPermission-推荐" class="headerlink" title="使用RxPermission(推荐)"></a>使用RxPermission(推荐)</h2><p><a href="https://github.com/tbruyelle/RxPermissions" target="_blank" rel="external">查看Github</a></p>
<h2 id="使用AndPermission"><a href="#使用AndPermission" class="headerlink" title="使用AndPermission"></a>使用AndPermission</h2><p><a href="https://github.com/yanzhenjie/AndPermission" target="_blank" rel="external">查看Github</a></p>
]]></content>
      
        <categories>
            
            <category> Android版本特性 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android 7.0新特性-FileUriExposedException]]></title>
      <url>/2017/06/14/Android-7-0%E6%96%B0%E7%89%B9%E6%80%A7-FileUriExposedException/</url>
      <content type="html"><![CDATA[<p>下面两个问题都是同一个错误FileUriExposedException。</p>
<h2 id="问题1：App更新"><a href="#问题1：App更新" class="headerlink" title="问题1：App更新"></a>问题1：App更新</h2><p>最近有客户反应App自动更新安装失败。<br>查看原因报的是FileUriExposedException错误。</p>
<p>查看官网API找到了解决之法。</p>
<a id="more"></a>
<h3 id="新建res-xml-provider-paths-xml文件"><a href="#新建res-xml-provider-paths-xml文件" class="headerlink" title="新建res/xml/provider_paths.xml文件"></a>新建res/xml/provider_paths.xml文件</h3><figure class="highlight xhtml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">paths</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">external-path</span></span></div><div class="line">        <span class="attr">name</span>=<span class="string">"external_files"</span></div><div class="line">        <span class="attr">path</span>=<span class="string">"."</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">root-path</span></span></div><div class="line">        <span class="attr">name</span>=<span class="string">"root_path"</span></div><div class="line">        <span class="attr">path</span>=<span class="string">"."</span> /&gt;</div><div class="line">        </div><div class="line"><span class="tag">&lt;/<span class="name">paths</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="在AndroidManifest-xml中添加provider"><a href="#在AndroidManifest-xml中添加provider" class="headerlink" title="在AndroidManifest.xml中添加provider"></a>在AndroidManifest.xml中添加provider</h3><figure class="highlight xhtml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">provider</span></span></div><div class="line">    <span class="attr">android:name</span>=<span class="string">"android.support.v4.content.FileProvider"</span></div><div class="line">    <span class="attr">android:authorities</span>=<span class="string">"您的包名.provider"</span></div><div class="line">    <span class="attr">android:exported</span>=<span class="string">"false"</span></div><div class="line">    <span class="attr">android:grantUriPermissions</span>=<span class="string">"true"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">meta-data</span></span></div><div class="line">        <span class="attr">android:name</span>=<span class="string">"android.support.FILE_PROVIDER_PATHS"</span></div><div class="line">        <span class="attr">android:resource</span>=<span class="string">"@xml/provider_paths"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">provider</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="修改Uri的获取方式"><a href="#修改Uri的获取方式" class="headerlink" title="修改Uri的获取方式"></a>修改Uri的获取方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">installApk</span><span class="params">(String fileName)</span> </span>&#123;</div><div class="line">    Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW);</div><div class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt; <span class="number">23</span>) &#123;</div><div class="line">        <span class="comment">//FIX ME by ZZ : 7.0</span></div><div class="line">        Uri uri = FileProvider.getUriForFile(MainActivity.<span class="keyword">this</span>, BuildConfig.APPLICATION_ID+<span class="string">".provider"</span>, </div><div class="line">        		<span class="keyword">new</span> File(Constants.APK_DOWNLOAD_DIR + File.separator + fileName));</div><div class="line">        <span class="comment">//这flag很关键</span></div><div class="line">        intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION|Intent.FLAG_GRANT_WRITE_URI_PERMISSION);</div><div class="line">        intent.setDataAndType(uri, <span class="string">"application/vnd.android.package-archive"</span>);</div><div class="line">        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</div><div class="line">        <span class="keyword">this</span>.startActivity(intent);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        intent.setDataAndType(Uri.fromFile(<span class="keyword">new</span> File(Constants.APK_DOWNLOAD_DIR + File.separator + fileName)),</div><div class="line">                <span class="string">"application/vnd.android.package-archive"</span>);</div><div class="line">        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</div><div class="line">        <span class="keyword">this</span>.startActivity(intent);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="问题2：调用系统相机拍照"><a href="#问题2：调用系统相机拍照" class="headerlink" title="问题2：调用系统相机拍照"></a>问题2：调用系统相机拍照</h2><h3 id="解决方式1"><a href="#解决方式1" class="headerlink" title="解决方式1"></a>解决方式1</h3><p>（1）前两个步骤同上</p>
<p>（2）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">takePhoto</span><span class="params">()</span> </span>&#123;</div><div class="line">    File file = <span class="keyword">new</span> File(PATH);</div><div class="line">    <span class="keyword">if</span> (!file.isDirectory()) &#123;</div><div class="line">        file.mkdirs();</div><div class="line">    &#125;</div><div class="line">    Intent intent = <span class="keyword">new</span> Intent(MediaStore.ACTION_IMAGE_CAPTURE);</div><div class="line">    Uri uri;</div><div class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt; <span class="number">23</span>) &#123;</div><div class="line">        uri = FileProvider.getUriForFile(MainActivity.<span class="keyword">this</span>,</div><div class="line">                BuildConfig.APPLICATION_ID+<span class="string">".provider"</span>,</div><div class="line">                <span class="keyword">new</span> File(PATH+NAME));</div><div class="line">        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION|Intent.FLAG_GRANT_WRITE_URI_PERMISSION);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        uri = Uri.fromFile(<span class="keyword">new</span> File(PATH+NAME));</div><div class="line">    &#125;</div><div class="line">    intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);</div><div class="line">    startActivityForResult(intent, <span class="number">0x01</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>注意别漏了这句:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION|Intent.FLAG_GRANT_WRITE_URI_PERMISSION);</div></pre></td></tr></table></figure>
<h3 id="解决方式2"><a href="#解决方式2" class="headerlink" title="解决方式2"></a>解决方式2</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">takePhoto</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">final</span> File file = <span class="keyword">new</span> File(Constants.PIC_UPLOAD_ROOT_PATH);</div><div class="line">    <span class="keyword">if</span> (!file.isDirectory()) &#123;</div><div class="line">        file.mkdirs();</div><div class="line">    &#125;</div><div class="line">    Intent cameraIntent = <span class="keyword">new</span> Intent(MediaStore.ACTION_IMAGE_CAPTURE);<span class="comment">//构造intent</span></div><div class="line">    Uri uri;</div><div class="line">    String pathOne = Constants.PIC_UPLOAD_ROOT_PATH + System.currentTimeMillis() + <span class="string">".jpg"</span>;</div><div class="line">    AbSharedUtil.putString(<span class="keyword">this</span>, Constants.PUT_FILE_ONE, pathOne);</div><div class="line">    <span class="keyword">final</span> File fileOne = <span class="keyword">new</span> File(pathOne);</div><div class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT&lt;<span class="number">24</span>)&#123;</div><div class="line">        uri = Uri.fromFile(fileOne);</div><div class="line">    &#125;<span class="keyword">else</span> &#123;</div><div class="line">        ContentValues contentValues = <span class="keyword">new</span> ContentValues(<span class="number">1</span>);</div><div class="line">        contentValues.put(MediaStore.Images.Media.DATA, fileOne.getAbsolutePath());</div><div class="line">        uri = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,contentValues);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (fileOne.exists()) &#123;</div><div class="line">        fileOne.delete();</div><div class="line">    &#125;</div><div class="line">    cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, uri);</div><div class="line">    startActivityForResult(cameraIntent, CAMERA_REQUEST_ONE);<span class="comment">//发出intent，并要求返回调用结果</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android版本特性 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android自定义控件-ZzExcelCreator]]></title>
      <url>/2017/06/14/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-ZzExcelCreator/</url>
      <content type="html"><![CDATA[<h1 id="ZzExcelCreator"><a href="#ZzExcelCreator" class="headerlink" title="ZzExcelCreator"></a>ZzExcelCreator</h1><p>Excel表格生成工具</p>
<p>项目地址:<a href="https://github.com/zhouzhuo810/ZzExcelCreator" target="_blank" rel="external">https://github.com/zhouzhuo810/ZzExcelCreator</a><br>（欢迎star!）</p>
<a id="more"></a>
<p>效果图：</p>
<p><img src="../../../../images/excel1.jpg" alt="excel1.jpg"><br><img src="../../../../images/excel2.jpg" alt="excel2.jpg"><br><img src="../../../../images/excel3.jpg" alt="excel3.jpg"></p>
<p>最近做项目用到jxl.jar来生成Excel表格；</p>
<p>但是发现jxl源码都没有注释的，方法也没有说明，<br>虽然最后在网上找到了对应的方法。</p>
<p>不过这不是我的style，果断自己封装一下，添加注释。</p>
<p>下面介绍一下用法：</p>
<h3 id="Gradle："><a href="#Gradle：" class="headerlink" title="Gradle："></a>Gradle：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compile &apos;me.zhouzhuo.zzexcelcreator:zz-excel-creator:1.0.0&apos;</div></pre></td></tr></table></figure>
<h3 id="创建Excel文件和工作表"><a href="#创建Excel文件和工作表" class="headerlink" title="创建Excel文件和工作表"></a>创建Excel文件和工作表</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ZzExcelCreator</div><div class="line">    .getInstance()</div><div class="line">    .createExcel(PATH, params[<span class="number">0</span>])  <span class="comment">//生成excel文件</span></div><div class="line">    .createSheet(params[<span class="number">1</span>])        <span class="comment">//生成sheet工作表</span></div><div class="line">    .close();</div></pre></td></tr></table></figure>
<h3 id="打开Excel文件和工作表"><a href="#打开Excel文件和工作表" class="headerlink" title="打开Excel文件和工作表"></a>打开Excel文件和工作表</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ZzExcelCreator</div><div class="line">    .getInstance()</div><div class="line">    .openExcel(<span class="keyword">new</span> File(PATH + fileName + <span class="string">".xls"</span>))  <span class="comment">//打开Excel文件</span></div><div class="line">    .openSheet(<span class="number">0</span>)                                   <span class="comment">//打开Sheet工作表</span></div><div class="line">    ... ...</div><div class="line">    .close();</div></pre></td></tr></table></figure>
<h3 id="设置单元格内容格式："><a href="#设置单元格内容格式：" class="headerlink" title="设置单元格内容格式："></a>设置单元格内容格式：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//设置单元格内容格式</span></div><div class="line">WritableCellFormat format = ZzFormatCreator</div><div class="line">	.getInstance()</div><div class="line">	.createCellFont(WritableFont.ARIAL)  <span class="comment">//设置字体</span></div><div class="line">	.setAlignment(Alignment.CENTRE, VerticalAlignment.CENTRE)  <span class="comment">//设置对齐方式(水平和垂直)</span></div><div class="line">	.setFontSize(<span class="number">14</span>)                    <span class="comment">//设置字体大小</span></div><div class="line">	.setFontColor(Colour.ROSE)          <span class="comment">//设置字体颜色</span></div><div class="line">	.getCellFormat();</div></pre></td></tr></table></figure>
<h3 id="设置行高、列宽和写入字符串或数字"><a href="#设置行高、列宽和写入字符串或数字" class="headerlink" title="设置行高、列宽和写入字符串或数字"></a>设置行高、列宽和写入字符串或数字</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">ZzExcelCreator</div><div class="line">    .getInstance()</div><div class="line">    .openExcel(<span class="keyword">new</span> File(PATH + fileName + <span class="string">".xls"</span>))  </div><div class="line">    .openSheet(<span class="number">0</span>)</div><div class="line">    .setColumnWidth(Integer.parseInt(col), <span class="number">25</span>)   <span class="comment">//设置列宽</span></div><div class="line">    .setRowHeight(Integer.parseInt(row), <span class="number">400</span>)    <span class="comment">//设置行高</span></div><div class="line">    .fillContent(Integer.parseInt(col), Integer.parseInt(row), str, format)  <span class="comment">//填入字符串</span></div><div class="line">    .fillNumber(Integer.parseInt(col), Integer.parseInt(row), Double.parseDouble(str), format)  <span class="comment">//填入数字</span></div><div class="line">    .close();</div></pre></td></tr></table></figure>
<h3 id="最后就是，这些操作最好在子线程操作。"><a href="#最后就是，这些操作最好在子线程操作。" class="headerlink" title="最后就是，这些操作最好在子线程操作。"></a>最后就是，这些操作最好在子线程操作。</h3>]]></content>
      
        <categories>
            
            <category> Android自定义控件 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android自定义控件-ZzImageBox]]></title>
      <url>/2017/06/14/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-ZzImageBox/</url>
      <content type="html"><![CDATA[<h1 id="ZzImageBox"><a href="#ZzImageBox" class="headerlink" title="ZzImageBox"></a>ZzImageBox</h1><p>A powerful image container for adding and removing images.</p>
<h3 id="功能简介："><a href="#功能简介：" class="headerlink" title="功能简介："></a>功能简介：</h3><p>1.支持添加、删除、默认图片的配置；</p>
<p>2.支持最大行数限制；</p>
<p>3.支持每行数量修改；</p>
<p>4.支持添加、删除、图片点击回调接口。</p>
<p>5.支持Box的添加(.addImage(String imagePath))和删除(.removeImage(int position))；</p>
<p>6.支持加载本地图片(使用方法.addImage(String imagePath))；</p>
<p>7.支持左右margin设置。</p>
<h3 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compile &apos;me.zhouzhuo.zzimagebox:zz-image-box:1.0.4&apos;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>me.zhouzhuo.zzimagebox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zz-image-box<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="What-does-it-look-like"><a href="#What-does-it-look-like" class="headerlink" title="What does it look like?"></a>What does it look like?</h2><p><img src="../../../../images/zzimagebox.gif" alt="zzimagebox"></p>
<h2 id="How-to-use-it"><a href="#How-to-use-it" class="headerlink" title="How to use it ?"></a>How to use it ?</h2><p>xml:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">me.zhouzhuo.zzimagebox.ZzImageBox</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/zz_image_box"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">app:zib_left_margin</span>=<span class="string">"20dp"</span></div><div class="line">    <span class="attr">app:zib_right_margin</span>=<span class="string">"20dp"</span></div><div class="line">    <span class="attr">app:zib_img_padding</span>=<span class="string">"5dp"</span></div><div class="line">    <span class="attr">app:zib_img_size_one_line</span>=<span class="string">"4"</span></div><div class="line">    <span class="attr">app:zib_max_line</span>=<span class="string">"3"</span></div><div class="line">    <span class="attr">app:zib_img_deletable</span>=<span class="string">"true"</span></div><div class="line">    <span class="attr">app:zib_img_add</span>=<span class="string">"@drawable/iv_add"</span></div><div class="line">    <span class="attr">app:zib_img_default</span>=<span class="string">"@drawable/iv_default"</span></div><div class="line">    <span class="attr">app:zib_img_delete</span>=<span class="string">"@drawable/iv_delete"</span></div><div class="line">    /&gt;</div></pre></td></tr></table></figure>
<p>java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> ZzImageBox imageBox = (ZzImageBox) findViewById(R.id.zz_image_box);</div><div class="line">imageBox.setOnImageClickListener(<span class="keyword">new</span> ZzImageBox.OnImageClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onImageClick</span><span class="params">(<span class="keyword">int</span> position, String filePath)</span> </span>&#123;</div><div class="line">        Log.d(<span class="string">"ZzImageBox"</span>, <span class="string">"image clicked:"</span> + position + <span class="string">","</span> + filePath);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDeleteClick</span><span class="params">(<span class="keyword">int</span> position, String filePath)</span> </span>&#123;</div><div class="line">        imageBox.removeImage(position);</div><div class="line">        Log.d(<span class="string">"ZzImageBox"</span>, <span class="string">"delete clicked:"</span> + position + <span class="string">","</span> + filePath);</div><div class="line">        Log.d(<span class="string">"ZzImageBox"</span>, <span class="string">"all images\n"</span>+imageBox.getAllImages().toString());</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAddClick</span><span class="params">()</span> </span>&#123;</div><div class="line">        imageBox.addImage(<span class="keyword">null</span>);</div><div class="line">        Log.d(<span class="string">"ZzImageBox"</span>, <span class="string">"add clicked"</span>);</div><div class="line">        Log.d(<span class="string">"ZzImageBox"</span>, <span class="string">"all images\n"</span>+imageBox.getAllImages().toString());</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="属性说明："><a href="#属性说明：" class="headerlink" title="属性说明："></a>属性说明：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;declare-styleable name=&quot;ZzImageBox&quot;&gt;</div><div class="line">    &lt;attr name=&quot;zib_max_line&quot; format=&quot;integer&quot; /&gt;</div><div class="line">    &lt;attr name=&quot;zib_img_size_one_line&quot; format=&quot;integer&quot; /&gt;</div><div class="line">    &lt;attr name=&quot;zib_img_padding&quot; format=&quot;dimension|reference&quot; /&gt;</div><div class="line">    &lt;attr name=&quot;zib_img_default&quot; format=&quot;color|reference&quot; /&gt;</div><div class="line">    &lt;attr name=&quot;zib_img_delete&quot; format=&quot;color|reference&quot; /&gt;</div><div class="line">    &lt;attr name=&quot;zib_img_add&quot; format=&quot;color|reference&quot; /&gt;</div><div class="line">    &lt;attr name=&quot;zib_img_deletable&quot; format=&quot;boolean&quot; /&gt;</div><div class="line">    &lt;attr name=&quot;zib_left_margin&quot; format=&quot;dimension|reference&quot; /&gt;</div><div class="line">    &lt;attr name=&quot;zib_right_margin&quot; format=&quot;dimension|reference&quot; /&gt;</div><div class="line">&lt;/declare-styleable&gt;</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">属性名</th>
<th style="text-align:left">属性类型</th>
<th style="text-align:left">属性功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">zib_max_line</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">最大行数</td>
</tr>
<tr>
<td style="text-align:left">zib_img_size_one_line</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">每行数量</td>
</tr>
<tr>
<td style="text-align:left">zib_img_padding</td>
<td style="text-align:left">dimension</td>
<td style="text-align:left">图片之间的间距</td>
</tr>
<tr>
<td style="text-align:left">zib_img_default</td>
<td style="text-align:left">drawable</td>
<td style="text-align:left">color</td>
<td>默认图片资源id</td>
</tr>
<tr>
<td style="text-align:left">zib_img_delete</td>
<td style="text-align:left">drawable</td>
<td style="text-align:left">color</td>
<td>删除图片资源id</td>
</tr>
<tr>
<td style="text-align:left">zib_img_add</td>
<td style="text-align:left">drawable</td>
<td style="text-align:left">color</td>
<td>添加图片资源id</td>
</tr>
<tr>
<td style="text-align:left">zib_img_deletable</td>
<td style="text-align:left">boolean</td>
<td style="text-align:left">是否显示删除图片</td>
</tr>
<tr>
<td style="text-align:left">zib_left_margin</td>
<td style="text-align:left">dimension</td>
<td style="text-align:left">控件距离屏幕左边距离</td>
</tr>
<tr>
<td style="text-align:left">zib_right_margin</td>
<td style="text-align:left">dimension</td>
<td style="text-align:left">控件距离屏幕右边距离</td>
</tr>
</tbody>
</table>
]]></content>
      
        <categories>
            
            <category> Android自定义控件 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android自定义控件-ZzWeatherView]]></title>
      <url>/2017/06/14/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6-ZzWeatherView/</url>
      <content type="html"><![CDATA[<h1 id="ZzWeatherView"><a href="#ZzWeatherView" class="headerlink" title="ZzWeatherView"></a>ZzWeatherView</h1><p>一个现实天气的控件</p>
<h2 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compile &apos;me.zhouzhuo.zzweatherview:zz-weather-view:1.0.2&apos;</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>效果图如下：</p>
<p><img src="../../../../images/curve.png" width="400px"><br><img src="../../../../images/disc.jpg" width="400px"></p>
<h2 id="用法简介"><a href="#用法简介" class="headerlink" title="用法简介"></a>用法简介</h2><p>1）布局</p>
<h3 id="drawable-scroll-bar-thumb-xml"><a href="#drawable-scroll-bar-thumb-xml" class="headerlink" title="drawable/scroll_bar_thumb.xml"></a>drawable/scroll_bar_thumb.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">gradient</span> <span class="attr">android:startColor</span>=<span class="string">"#33999999"</span> <span class="attr">android:endColor</span>=<span class="string">"#80aaaaaa"</span></span></div><div class="line">        <span class="attr">android:angle</span>=<span class="string">"0"</span>/&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"6dp"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">me.zhouzhuo.zzweatherview.ZzWeatherView</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/weather_view"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:scrollbarThumbHorizontal</span>=<span class="string">"@drawable/scroll_bar_thumb"</span></div><div class="line">    <span class="attr">android:scrollbarTrackHorizontal</span>=<span class="string">"@drawable/scroll_bar_thumb"</span></div><div class="line">    <span class="attr">android:scrollbarSize</span>=<span class="string">"4dp"</span></div><div class="line">    <span class="attr">android:background</span>=<span class="string">"#333"</span></div><div class="line">    &gt;</div><div class="line"><span class="tag">&lt;/<span class="name">me.zhouzhuo.zzweatherview.ZzWeatherView</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2）java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">ZzWeatherView weatherView = (ZzWeatherView) findViewById(R.id.weather_view);</div><div class="line">  </div><div class="line"><span class="comment">//填充天气数据</span></div><div class="line">weatherView.setList(generateData());</div><div class="line">  </div><div class="line"><span class="comment">//画折线</span></div><div class="line">weatherView.setLineType(ZzWeatherView.LINE_TYPE_DISCOUNT);</div><div class="line"><span class="comment">//画曲线(不够圆滑希望有更好的建议联系我(Email:admin@zhouzhuo810.me))</span></div><div class="line"><span class="comment">//weatherView.setLineType(ZzWeatherView.LINE_TYPE_CURVE);</span></div><div class="line">  </div><div class="line"><span class="comment">//设置线宽</span></div><div class="line">weatherView.setLineWidth(<span class="number">6f</span>);</div><div class="line">  </div><div class="line">  </div><div class="line"><span class="comment">//设置一屏幕显示几列(最少3列)</span></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    weatherView.setColumnNumber(<span class="number">5</span>);</div><div class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">//设置白天和晚上线条的颜色</span></div><div class="line">weatherView.setDayAndNightLineColor(Color.BLUE, Color.RED);</div><div class="line">  </div><div class="line">  </div><div class="line"><span class="comment">//点击某一列</span></div><div class="line">weatherView.setOnWeatherItemClickListener(<span class="keyword">new</span> ZzWeatherView.OnWeatherItemClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(WeatherItemView itemView, <span class="keyword">int</span> position, WeatherModel weatherModel)</span> </span>&#123;</div><div class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, position+<span class="string">""</span>, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">//数据源</span></div><div class="line">  WeatherModel model = <span class="keyword">new</span> WeatherModel();</div><div class="line">        model.setDate(<span class="string">"12/07"</span>);<span class="comment">//日期</span></div><div class="line">        model.setWeek(<span class="string">"昨天"</span>);  <span class="comment">//星期</span></div><div class="line">        model.setDayWeather(<span class="string">"大雪"</span>); <span class="comment">//白天天气</span></div><div class="line">        model.setDayTemp(<span class="number">11</span>); <span class="comment">//白天温度</span></div><div class="line">        model.setNightTemp(<span class="number">5</span>); <span class="comment">//夜晚温度</span></div><div class="line">        model.setNightWeather(<span class="string">"晴"</span>); <span class="comment">//夜晚天气</span></div><div class="line">        model.setWindOrientation(<span class="string">"西南风"</span>); <span class="comment">//风向</span></div><div class="line">        model.setWindLevel(<span class="string">"3级"</span>); <span class="comment">//</span></div><div class="line">        model.setAirLevel(AirLevel.EXCELLENT); <span class="comment">//空气质量</span></div></pre></td></tr></table></figure>
<h3 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h3><p>v 1.0.2</p>
<ul>
<li>添加设置曲线颜色方法；</li>
<li>添加设置列的数量方法；</li>
</ul>
<p>v 1.0.1</p>
<ul>
<li>修复曲线不圆滑问题；</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Android自定义控件 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android疑难杂症-自定义ViewGroup添加TextView的Gravity失效]]></title>
      <url>/2017/06/13/Android%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87-%E8%87%AA%E5%AE%9A%E4%B9%89ViewGroup%E6%B7%BB%E5%8A%A0TextView%E7%9A%84Gravity%E5%A4%B1%E6%95%88/</url>
      <content type="html"><![CDATA[<p>解决方法：</p>
<p>在addView()之前</p>
<p>添加如下代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mTextView.measure(View.MeasureSpec.makeMeasureSpec(mWidth, View.MeasureSpec.EXACTLY),</div><div class="line">        View.MeasureSpec.makeMeasureSpec(mHeight, View.MeasureSpec.EXACTLY));</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android疑难杂症 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[IOS-pod的安装和使用]]></title>
      <url>/2017/06/08/IOS-pod%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>使用pod可以很方便的集成第三方框架。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gem install cocoapods</div></pre></td></tr></table></figure>
<p>输入密码</p>
<p>等待即可。</p>
<p>完成标识如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xx gems installed</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="验证安装是否成功"><a href="#验证安装是否成功" class="headerlink" title="验证安装是否成功"></a>验证安装是否成功</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod --help</div></pre></td></tr></table></figure>
<h2 id="切换目录"><a href="#切换目录" class="headerlink" title="切换目录"></a>切换目录</h2><p>切换到目标工程文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd xxx</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod init</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls -al</div></pre></td></tr></table></figure>
<p>会发现多了一个Podfile文件</p>
<h2 id="编辑Podfile文件"><a href="#编辑Podfile文件" class="headerlink" title="编辑Podfile文件"></a>编辑Podfile文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi Podfile</div></pre></td></tr></table></figure>
<p>点击i进入编辑模式</p>
<p>移动光标，在需要的位置添加内容<br>下面以SDWebImage为例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">platform :ios, &apos;8.0&apos;</div><div class="line">pod &apos;SDWebImage&apos;, &apos;~&gt;3.8&apos;</div><div class="line">use_frameworks!</div></pre></td></tr></table></figure>
<p>点击esc</p>
<p>点击shift+；</p>
<p>输入wq，回车</p>
<h2 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h2><p>先关闭xcode</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod install</div></pre></td></tr></table></figure>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>会发现多了一个workspace的工程</p>
<p>如果以后要用集成了POD的工程的话就要用workspace的工程。</p>
<p>打开工程使用这个。</p>
]]></content>
      
        <categories>
            
            <category> IOS </category>
            
        </categories>
        
        
        <tags>
            
            <tag> IOS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ACM-单词拼接问题]]></title>
      <url>/2017/06/08/ACM-%E5%8D%95%E8%AF%8D%E6%8B%BC%E6%8E%A5%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p><strong>描述</strong></p>
<p>给你一些单词，请你判断能否把它们首尾串起来串成一串。</p>
<p>前一个单词的结尾应该与下一个单词的道字母相同。</p>
<p><strong>输入</strong></p>
<p>第一行是一个整数N(0&lt;N&lt;20)，表示测试数据的组数<br>每组测试数据的第一行是一个整数M,表示该组测试数据中有M(2&lt;M&lt;1000)个互不相同的单词，随后的M行，每行是一个长度不超过30的单词,单词全部由小写字母组成。</p>
<p><strong>输出</strong></p>
<p>如果存在拼接方案，请输出所有拼接方案中字典序最小的方案。(两个单词之间输出一个英文句号”.”)<br>如果不存在拼接方案，则输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">***</div></pre></td></tr></table></figure>
<p><strong>样例输入</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">2</div><div class="line">6</div><div class="line">aloha</div><div class="line">arachnid</div><div class="line">dog</div><div class="line">gopher</div><div class="line">rat</div><div class="line">tiger</div><div class="line">3</div><div class="line">oak</div><div class="line">maple</div><div class="line">elm</div></pre></td></tr></table></figure>
<p><strong>样例输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">aloha.arachnid.dog.gopher.rat.tiger</div><div class="line">***</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.PriorityQueue;</div><div class="line"><span class="keyword">import</span> java.util.Queue;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"><span class="keyword">import</span> java.util.Stack;</div><div class="line"><span class="comment">//欧拉通路(路径) 只有一个点的入度比出度小一, 一个点的出度比入度大一 其余点的入度与出度相等</span></div><div class="line"><span class="comment">//欧拉回路 所有点的入度与出度相等</span></div><div class="line"><span class="comment">//并查集判断连通性 只有一个点的父节点是他本身</span></div><div class="line"><span class="comment">//消圈算法遍历结果</span></div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</div><div class="line">	Queue&lt;String&gt; queue = <span class="keyword">new</span> PriorityQueue&lt;String&gt;();<span class="comment">// 首字母相同的单词可能有多个</span></div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LEN = <span class="number">26</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> start;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span>[] father, num, inDegree, outDegree;</div><div class="line">	<span class="keyword">private</span> Node[] nodes;</div><div class="line">  </div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		Scanner sc = <span class="keyword">new</span> Scanner(System.in);</div><div class="line">		<span class="keyword">int</span> t, n;</div><div class="line">		Main main;</div><div class="line">		String str;</div><div class="line">		Node[] nodes = <span class="keyword">new</span> Node[LEN];</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; LEN; i++) &#123;</div><div class="line">			nodes[i] = <span class="keyword">new</span> Node();</div><div class="line">		&#125;</div><div class="line">		t = sc.nextInt();</div><div class="line">		<span class="keyword">while</span> (t-- != <span class="number">0</span>) &#123;</div><div class="line">			n = sc.nextInt();</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">				str = sc.next();</div><div class="line">				nodes[str.charAt(<span class="number">0</span>) - <span class="string">'a'</span>].queue.add(str);<span class="comment">// 单词首字母</span></div><div class="line">			&#125;</div><div class="line">			main = <span class="keyword">new</span> Main(nodes);</div><div class="line">			main.execute();</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; LEN; i++) &#123;</div><div class="line">				nodes[i].queue.clear();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		sc.close();</div><div class="line">	&#125;</div><div class="line">  </div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Main</span><span class="params">(Node[] nodes)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.nodes = nodes;</div><div class="line">		father = <span class="keyword">new</span> <span class="keyword">int</span>[LEN];</div><div class="line">		num = <span class="keyword">new</span> <span class="keyword">int</span>[LEN];</div><div class="line">		inDegree = <span class="keyword">new</span> <span class="keyword">int</span>[LEN];</div><div class="line">		outDegree = <span class="keyword">new</span> <span class="keyword">int</span>[LEN];</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; LEN; i++) &#123;</div><div class="line">			father[i] = i;</div><div class="line">			num[i] = <span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, start, end; i &lt; LEN; i++) &#123;</div><div class="line">			<span class="keyword">for</span> (String str : nodes[i].queue) &#123;</div><div class="line">				start = str.charAt(<span class="number">0</span>) - <span class="string">'a'</span>;<span class="comment">// 单词首</span></div><div class="line">				end = str.charAt(str.length() - <span class="number">1</span>) - <span class="string">'a'</span>;<span class="comment">// 单词尾</span></div><div class="line">				inDegree[end]++;</div><div class="line">				outDegree[start]++;</div><div class="line">				start = find(start);</div><div class="line">				end = find(end);</div><div class="line">				<span class="keyword">if</span> (start != end) &#123;</div><div class="line">					union(start, end);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">  </div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> i == father[i] ? i : find(father[i]);</div><div class="line">	&#125;</div><div class="line">  </div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">		father[i] = j;</div><div class="line">	&#125;</div><div class="line">  </div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isEularRoute</span><span class="params">()</span> </span>&#123;</div><div class="line">		start = -<span class="number">1</span>;</div><div class="line">		<span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">		<span class="keyword">boolean</span> find = <span class="keyword">false</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; LEN; i++) &#123;</div><div class="line">			<span class="keyword">if</span> (inDegree[i] != outDegree[i]) &#123;</div><div class="line">				<span class="keyword">if</span> (Math.abs(inDegree[i] - outDegree[i]) != <span class="number">1</span>)</div><div class="line">					<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">				<span class="keyword">if</span> (!find &amp;&amp; inDegree[i] &lt; outDegree[i]) &#123;</div><div class="line">					find = <span class="keyword">true</span>;</div><div class="line">					start = i;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">if</span> (++count &gt; <span class="number">2</span>)</div><div class="line">					<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (outDegree[i] &gt; <span class="number">0</span> &amp;&amp; start == -<span class="number">1</span>) &#123;</div><div class="line">				start = i;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	&#125;</div><div class="line">  </div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, count = <span class="number">0</span>; i &lt; LEN; i++) &#123;</div><div class="line">			<span class="keyword">if</span> (outDegree[i] &gt; <span class="number">0</span> &amp;&amp; father[i] == i) &#123;</div><div class="line">				<span class="keyword">if</span> (++count &gt; <span class="number">1</span>) &#123;</div><div class="line">					<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	&#125;</div><div class="line">  </div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">printResult</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">		dfs(i);</div><div class="line">		<span class="keyword">if</span> (!stack.isEmpty())</div><div class="line">			System.out.print(stack.pop());</div><div class="line">		<span class="keyword">while</span> (!stack.isEmpty()) &#123;</div><div class="line">			System.out.print(<span class="string">"."</span> + stack.pop());</div><div class="line">		&#125;</div><div class="line">		System.out.println();</div><div class="line">	&#125;</div><div class="line">  </div><div class="line">	Stack&lt;String&gt; stack = <span class="keyword">new</span> Stack&lt;String&gt;();</div><div class="line">  </div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">		<span class="keyword">while</span> (!nodes[i].queue.isEmpty()) &#123;</div><div class="line">			String str = nodes[i].queue.poll();</div><div class="line">			dfs(str.charAt(str.length() - <span class="number">1</span>) - <span class="string">'a'</span>);</div><div class="line">			stack.push(str);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">  </div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (!isConnected() || !isEularRoute()) &#123;</div><div class="line">			System.out.println(<span class="string">"***"</span>);</div><div class="line">			<span class="keyword">return</span>;</div><div class="line">		&#125;</div><div class="line">		printResult(start);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 欧拉回路:若图G中存在这样一条路径，使得它恰通过G中每条边一次，则称该路径为欧拉路径。若该路径是一个圈， 则成为欧拉回路。</div><div class="line"> * 具有欧拉回路的图成为欧拉图，具有欧拉路径但不具有欧拉回路的图成为半欧拉图。 1.无向连通图G是欧拉图，当且仅当G不含奇数度结点(G的所有结点度数为偶数)；</div><div class="line"> * 2.无向连通图G含有欧拉通路，当且仅当G有零个或两个奇数度的结点； 3.有向连通图D是欧拉图，当且仅当该图为连通图且D中每个结点的入度=出度</div><div class="line"> * 4.有向连通图D含有欧拉通路，当且仅当该图为连通图且D中除两个结点外， 其余每个结点的入度=出度，且此两点满足deg－(u)－deg+(v)=±1。</div><div class="line"> * （起始点s的入度=出度-1，结束点t的出度=入度-1 或两个点的入度=出度）</div><div class="line"> *</div><div class="line"> * 连通图：若图中任意两点都是连通的，则该图是连通图。</div><div class="line"> */</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> ACM </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ACM-(复杂排序问题)]]></title>
      <url>/2017/06/07/ACM-%E5%A4%8D%E6%9D%82%E6%8E%92%E5%BA%8F%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p><strong>描述</strong></p>
<p>现在有很多长方形，每一个长方形都有一个编号，这个编号可以重复；还知道这个长方形的宽和长，编号、长、宽都是整数；现在要求按照一下方式排序（默认排序规则都是从小到大）；</p>
<p>1.按照编号从小到大排序</p>
<p>2.对于编号相等的长方形，按照长方形的长排序；</p>
<p>3.如果编号和长都相同，按照长方形的宽排序；</p>
<p>4.如果编号、长、宽都相同，就只保留一个长方形用于排序,删除多余的长方形；最后排好序按照指定格式显示所有的长方形；</p>
<p><strong>输入</strong></p>
<p>第一行有一个整数 0&lt;n&lt;10000,表示接下来有n组测试数据；<br>每一组第一行有一个整数 0&lt;m&lt;1000，表示有m个长方形；<br>接下来的m行，每一行有三个数 ，第一个数表示长方形的编号，</p>
<p>第二个和第三个数值大的表示长，数值小的表示宽，相等<br>说明这是一个正方形（数据约定长宽与编号都小于10000）；</p>
<p><strong>输出</strong></p>
<p>顺序输出每组数据的所有符合条件的长方形的 编号 长 宽</p>
<p><strong>样例输入</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">8</div><div class="line">1 1 1</div><div class="line">1 1 1</div><div class="line">1 1 2</div><div class="line">1 2 1</div><div class="line">1 2 2</div><div class="line">2 1 1</div><div class="line">2 1 2</div><div class="line">2 2 1</div></pre></td></tr></table></figure>
<p><strong>样例输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1 1 1</div><div class="line">1 2 1</div><div class="line">1 2 2</div><div class="line">2 1 1</div><div class="line">2 2 1</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.*;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		Scanner sc = <span class="keyword">new</span> Scanner(System.in);</div><div class="line">		<span class="keyword">int</span> n = sc.nextInt();</div><div class="line">		StringBuilder result = <span class="keyword">new</span> StringBuilder();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++) &#123;</div><div class="line">			List&lt;Rect&gt; list = <span class="keyword">new</span> ArrayList&lt;Rect&gt;();</div><div class="line">			<span class="keyword">int</span> m = sc.nextInt();</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;m; j++) &#123;</div><div class="line">				<span class="keyword">int</span> no = sc.nextInt();</div><div class="line">				<span class="keyword">int</span> a = sc.nextInt();</div><div class="line">				<span class="keyword">int</span> b = sc.nextInt();</div><div class="line">				Rect r = <span class="keyword">new</span> Rect(no, a&gt;b?a:b, a&lt;b?a:b);</div><div class="line">				<span class="keyword">if</span> (!isExist(list,r)) &#123;</div><div class="line">					list.add(r);	</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			Collections.sort(list, <span class="keyword">new</span> Comparator&lt;Rect&gt;()&#123;  </div><div class="line">	            <span class="meta">@Override</span>  </div><div class="line">	            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Rect r1, Rect r2)</span> </span>&#123;  </div><div class="line">		            <span class="keyword">if</span> (r1.no != r2.no) &#123;</div><div class="line">		            	<span class="keyword">return</span> r1.no &gt; r2.no ? <span class="number">1</span> : -<span class="number">1</span>;</div><div class="line">		            &#125; <span class="keyword">else</span> &#123;</div><div class="line">		            	<span class="keyword">if</span> (r1.a != r2.a) &#123;</div><div class="line">		            		<span class="keyword">return</span> r1.a &gt; r2.a ? <span class="number">1</span>: -<span class="number">1</span>;</div><div class="line">		            	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		            		<span class="keyword">return</span> r1.b &gt; r2.b ? <span class="number">1</span> : -<span class="number">1</span>;</div><div class="line">		            	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		            		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">		            	&#125;</div><div class="line">		            &#125;</div><div class="line">	            &#125;  </div><div class="line">	              </div><div class="line">	        &#125;);  </div><div class="line">	        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span> ; j&lt;list.size(); j++) &#123;</div><div class="line">	        	result.append(list.get(j).toString()).append(<span class="string">"\n"</span>);</div><div class="line">	        &#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		System.out.println(result.toString());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isExist</span><span class="params">(List&lt;Rect&gt; list, Rect r)</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;list.size(); i++) &#123;</div><div class="line">			Rect r1 = list.get(i);</div><div class="line">			<span class="keyword">if</span> (r1.no == r.no &amp;&amp; r1.a==r.a &amp;&amp; r1.b == r.b) &#123;</div><div class="line">				<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">		<span class="keyword">public</span> <span class="keyword">int</span> no;</div><div class="line">		<span class="keyword">public</span> <span class="keyword">int</span> a;</div><div class="line">		<span class="keyword">public</span> <span class="keyword">int</span> b;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">Rect</span><span class="params">(<span class="keyword">int</span> no, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</div><div class="line">			<span class="keyword">this</span>.no = no;</div><div class="line">			<span class="keyword">this</span>.a = a;</div><div class="line">			<span class="keyword">this</span>.b = b;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">			<span class="keyword">return</span> no + <span class="string">" "</span> + a +<span class="string">" "</span> + b ;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> ACM </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ACM-(奇偶分离问题)]]></title>
      <url>/2017/06/07/ACM-%E5%A5%87%E5%81%B6%E5%88%86%E7%A6%BB%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p><strong>描述</strong></p>
<p>有一个整型偶数n(2&lt;= n &lt;=10000),你要做的是：先把1到n中的所有奇数从小到大输出，再把所有的偶数从小到大输出。</p>
<p><strong>输入</strong></p>
<p>第一行有一个整数i（2&lt;=i&lt;30)表示有 i 组测试数据；<br>每组有一个整型偶数n。</p>
<p><strong>输出</strong></p>
<p>第一行输出所有的奇数<br>第二行输出所有的偶数</p>
<p><strong>样例输入</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2</div><div class="line">10</div><div class="line">14</div></pre></td></tr></table></figure>
<p><strong>样例输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1 3 5 7 9 </div><div class="line">2 4 6 8 10 </div><div class="line"></div><div class="line">1 3 5 7 9 11 13 </div><div class="line">2 4 6 8 10 12 14</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.*;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		Scanner sc = <span class="keyword">new</span> Scanner(System.in);</div><div class="line">		<span class="keyword">int</span> count = sc.nextInt();</div><div class="line">		String[] result = <span class="keyword">new</span> String[count];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;count; i++) &#123;</div><div class="line">			<span class="keyword">int</span> n = sc.nextInt();</div><div class="line">			StringBuilder sbj = <span class="keyword">new</span> StringBuilder();</div><div class="line">			StringBuilder sbo = <span class="keyword">new</span> StringBuilder();</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) &#123;</div><div class="line">				<span class="keyword">if</span> (isOval(j)) &#123;</div><div class="line">					sbo.append(j).append(<span class="string">" "</span>);</div><div class="line">				&#125; <span class="keyword">else</span> &#123;</div><div class="line">					sbj.append(j).append(<span class="string">" "</span>);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			result[i] = sbj.toString()+<span class="string">"\n"</span>+sbo.toString();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;count; i++) &#123;</div><div class="line">			System.out.println(result[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isOval</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> i%<span class="number">2</span>==<span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> ACM </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ACM-(素数求和问题)]]></title>
      <url>/2017/06/07/ACM-%E7%B4%A0%E6%95%B0%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p><strong>描述</strong></p>
<p>现在给你N个数（0&lt;N&lt;1000），现在要求你写出一个程序，找出这N个数中的所有素数，并求和。</p>
<p><strong>输入</strong></p>
<p>第一行给出整数M(0&lt;M&lt;10)代表多少组测试数据<br>每组测试数据第一行给你N，代表该组测试数据的数量。<br>接下来的N个数为要测试的数据，每个数小于1000</p>
<p><strong>输出</strong></p>
<p>每组测试数据结果占一行，输出给出的测试数据的所有素数和</p>
<p><strong>样例输入</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">3</div><div class="line">5</div><div class="line">1 2 3 4 5</div><div class="line">8</div><div class="line">11 12 13 14 15 16 17 18</div><div class="line">10</div><div class="line">21 22 23 24 25 26 27 28 29 30</div></pre></td></tr></table></figure>
<p><strong>样例输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">10</div><div class="line">41</div><div class="line">52</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.*;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		Scanner sc = <span class="keyword">new</span> Scanner(System.in);</div><div class="line">		<span class="keyword">int</span> zu = sc.nextInt();</div><div class="line">		<span class="keyword">int</span>[] sum = <span class="keyword">new</span> <span class="keyword">int</span>[zu];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;zu; i++) &#123;</div><div class="line">			<span class="keyword">int</span> count = sc.nextInt();</div><div class="line">			<span class="keyword">int</span> s = <span class="number">0</span>;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;count; j++) &#123;</div><div class="line">				<span class="keyword">int</span> value = sc.nextInt();</div><div class="line">				<span class="keyword">if</span> (isPrime(value)) &#123;</div><div class="line">					s += value;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			sum[i] = s;</div><div class="line">		&#125; </div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;zu; i++) &#123;</div><div class="line">			System.out.println(sum[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isPrime</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;  </div><div class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;  </div><div class="line">        <span class="keyword">if</span> (a &lt; <span class="number">2</span>) &#123;<span class="comment">// 素数不小于2  </span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;  </div><div class="line">        &#125; <span class="keyword">else</span> &#123;  </div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= Math.sqrt(a); i++) &#123;  </div><div class="line">                <span class="keyword">if</span> (a % i == <span class="number">0</span>) &#123;<span class="comment">// 若能被整除，则说明不是素数，返回false  </span></div><div class="line">                    flag = <span class="keyword">false</span>;  </div><div class="line">                    <span class="keyword">break</span>;<span class="comment">// 跳出循环  </span></div><div class="line">                &#125;  </div><div class="line">            &#125;  </div><div class="line">        &#125;  </div><div class="line">        <span class="keyword">return</span> flag;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> ACM </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ACM-(括号配对问题)]]></title>
      <url>/2017/06/07/ACM-%E6%8B%AC%E5%8F%B7%E9%85%8D%E5%AF%B9%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p><strong>描述</strong></p>
<p>现在，有一行括号序列，请你检查这行括号是否配对。</p>
<p><strong>输入</strong></p>
<p>第一行输入一个数N（0&lt;N&lt;=100）,表示有N组测试数据。后面的N行输入多组输入数据，每组输入数据都是一个字符串S(S的长度小于10000，且S不是空串），测试数据组数少于5组。数据保证S中只含有”[“,”]”,”(“,”)”四种字符</p>
<p><strong>输出</strong></p>
<p>每组输入数据的输出占一行，如果该字符串中所含的括号是配对的，则输出Yes,如果不配对则输出No</p>
<p><strong>样例输入</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">3</div><div class="line">[(])</div><div class="line">(])</div><div class="line">([[]()])</div></pre></td></tr></table></figure></p>
<p><strong>样例输出</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">No</div><div class="line">No</div><div class="line">Yes</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.*;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</div><div class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</div><div class="line">        <span class="keyword">int</span> count= sc.nextInt();</div><div class="line">        String[] strs = <span class="keyword">new</span> String[count];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;count; i++) &#123;</div><div class="line">            strs[i] = sc.next();</div><div class="line">        &#125;</div><div class="line">        Stack&lt;Character&gt; stack = <span class="keyword">null</span>;  </div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;count; j++) &#123;</div><div class="line">            String str = strs[j];</div><div class="line">            <span class="keyword">if</span>(str.length() % <span class="number">2</span> == <span class="number">1</span>)&#123;  </div><div class="line">                System.out.println(<span class="string">"No"</span>);  </div><div class="line">            &#125;<span class="keyword">else</span>&#123;    </div><div class="line">                stack = <span class="keyword">new</span> Stack&lt;Character&gt;();  </div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;str.length();i++)&#123;  </div><div class="line">                    <span class="keyword">if</span>(stack.isEmpty())&#123;  </div><div class="line">                        stack.push(str.charAt(i));  </div><div class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stack.peek() == <span class="string">'['</span> &amp;&amp; str.charAt(i) == <span class="string">']'</span> || stack.peek() == <span class="string">'('</span> &amp;&amp; str.charAt(i) == <span class="string">')'</span>)&#123;   </div><div class="line">                        stack.pop();  </div><div class="line">                    &#125;<span class="keyword">else</span>&#123;  </div><div class="line">                        stack.push(str.charAt(i));  </div><div class="line">                    &#125;  </div><div class="line">                &#125;  </div><div class="line">                <span class="keyword">if</span>(stack.isEmpty())&#123;  </div><div class="line">                    <span class="comment">//如果栈是空的，说明括号匹配  </span></div><div class="line">                    System.out.println(<span class="string">"Yes"</span>);  </div><div class="line">                &#125;<span class="keyword">else</span>&#123;  </div><div class="line">                    <span class="comment">//说明栈不为空，括号不匹配  </span></div><div class="line">                    System.out.println(<span class="string">"No"</span>);  </div><div class="line">                &#125;  </div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> ACM </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ACM-(A+B问题)]]></title>
      <url>/2017/06/07/ACM-A-B%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p><strong>描述</strong></p>
<p>此题为练手用题，请大家计算一下a+b的值.</p>
<p><strong>输入</strong></p>
<p>输入两个数，a,b</p>
<p><strong>输出</strong></p>
<p>输出a+b的值</p>
<p><strong>样例输入</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2 3</div></pre></td></tr></table></figure>
<p>样例输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">5</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h3 id="C语言版"><a href="#C语言版" class="headerlink" title="C语言版"></a>C语言版</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line"><span class="keyword">int</span> a,b;</div><div class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a,&amp;b);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>,a+b);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Java版"><a href="#Java版" class="headerlink" title="Java版"></a>Java版</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.*;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span></div><div class="line">&#123;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> Exception</span></div><div class="line">&#123;</div><div class="line">Scanner cin=<span class="keyword">new</span> Scanner(System.in);</div><div class="line"><span class="keyword">int</span> a=cin.nextInt(),b=cin.nextInt();</div><div class="line">System.out.println(a+b);</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> ACM </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-访问控制]]></title>
      <url>/2017/06/07/Swift%E7%AC%94%E8%AE%B0-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/</url>
      <content type="html"><![CDATA[<p>访问控制可以限定其他源文件或模块中代码对你代码的访问级别。</p>
<p>Swift 为代码中的实体提供了四种不同的访问级别:public、internal、fileprivate、private。</p>
<a id="more"></a>
<table>
<thead>
<tr>
<th style="text-align:left">访问级别</th>
<th style="text-align:left">定义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">public</td>
<td style="text-align:left">可以访问自己模块中源文件里的任何实体，别人也可以通过引入该模块来访问源文件里的所有实体。</td>
</tr>
<tr>
<td style="text-align:left">internal</td>
<td style="text-align:left">可以访问自己模块中源文件里的任何实体，但是别人不能访问该模块中源文件里的实体。</td>
</tr>
<tr>
<td style="text-align:left">fileprivate</td>
<td style="text-align:left">文件内私有，只能在当前源文件中使用。</td>
</tr>
<tr>
<td style="text-align:left">private</td>
<td style="text-align:left">只能在类中访问，离开了这个类或者结构体的作用域外面就无法访问。</td>
</tr>
</tbody>
</table>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePublicClass</span> </span>&#123;&#125;</div><div class="line"><span class="keyword">internal</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeInternalClass</span> </span>&#123;&#125;</div><div class="line"><span class="keyword">fileprivate</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeFilePrivateClass</span> </span>&#123;&#125;</div><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePrivateClass</span> </span>&#123;&#125;</div><div class="line">  </div><div class="line"><span class="keyword">public</span> <span class="keyword">var</span> somePublicVariable = <span class="number">0</span></div><div class="line"><span class="keyword">internal</span> <span class="keyword">let</span> someInternalConstant = <span class="number">0</span></div><div class="line"><span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">someFilePrivateFunction</span><span class="params">()</span></span> &#123;&#125;</div><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">somePrivateFunction</span><span class="params">()</span></span> &#123;&#125;</div></pre></td></tr></table></figure>
<p>除非有特殊的说明，否则实体都使用默认的访问级别 internal。</p>
<h2 id="函数类型访问权限"><a href="#函数类型访问权限" class="headerlink" title="函数类型访问权限"></a>函数类型访问权限</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span><span class="params">()</span></span> -&gt; (<span class="type">SomeInternalClass</span>, <span class="type">SomePrivateClass</span>) &#123;</div><div class="line">    <span class="comment">// 函数实现</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="枚举类型访问权限"><a href="#枚举类型访问权限" class="headerlink" title="枚举类型访问权限"></a>枚举类型访问权限</h2><p>枚举中成员的访问级别继承自该枚举，你不能为枚举中的成员单独申明不同的访问级别。</p>
<p>枚举 Student 被明确的申明为 public 级别，那么它的成员 Name，Mark 的访问级别同样也是 public：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Student</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">Name</span>(<span class="type">String</span>)</div><div class="line">    <span class="keyword">case</span> <span class="type">Mark</span>(<span class="type">Int</span>,<span class="type">Int</span>,<span class="type">Int</span>)</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> studDetails = <span class="type">Student</span>.<span class="type">Name</span>(<span class="string">"Swift"</span>)</div><div class="line"><span class="keyword">var</span> studMarks = <span class="type">Student</span>.<span class="type">Mark</span>(<span class="number">98</span>,<span class="number">97</span>,<span class="number">95</span>)</div><div class="line"> </div><div class="line"><span class="keyword">switch</span> studMarks &#123;</div><div class="line"><span class="keyword">case</span> .<span class="type">Name</span>(<span class="keyword">let</span> studName):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"学生名: \(studName)."</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">Mark</span>(<span class="keyword">let</span> <span class="type">Mark1</span>, <span class="keyword">let</span> <span class="type">Mark2</span>, <span class="keyword">let</span> <span class="type">Mark3</span>):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"学生成绩: \(Mark1),\(Mark2),\(Mark3)"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="子类访问权限"><a href="#子类访问权限" class="headerlink" title="子类访问权限"></a>子类访问权限</h2><p>子类的访问级别不得高于父类的访问级别。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SuperClass</span> </span>&#123;</div><div class="line">    <span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"超类"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// 访问级别不能低于超类 internal &gt; public</span></div><div class="line"><span class="keyword">internal</span> <span class="class"><span class="keyword">class</span> <span class="title">SubClass</span>: <span class="title">SuperClass</span>  </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">internal</span> <span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"子类"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">let</span> sup = <span class="type">SuperClass</span>()</div><div class="line">sup.show()</div><div class="line"> </div><div class="line"><span class="keyword">let</span> sub = <span class="type">SubClass</span>()</div><div class="line">sub.show()</div></pre></td></tr></table></figure>
<h2 id="常量、变量、属性、下标访问权限"><a href="#常量、变量、属性、下标访问权限" class="headerlink" title="常量、变量、属性、下标访问权限"></a>常量、变量、属性、下标访问权限</h2><p><strong>==常量、变量、属性不能拥有比它们的类型更高的访问级别==</strong>。</p>
<p>如果常量、变量、属性、下标索引的定义类型是private级别的，那么它们必须要明确的申明访问级别为private:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">var</span> privateInstance = <span class="type">SomePrivateClass</span>()</div></pre></td></tr></table></figure>
<h2 id="Getter-和-Setter访问权限"><a href="#Getter-和-Setter访问权限" class="headerlink" title="Getter 和 Setter访问权限"></a>Getter 和 Setter访问权限</h2><p>常量、变量、属性、下标索引的Getters和Setters的访问级别继承自它们所属成员的访问级别。</p>
<p>Setter的访问级别可以低于对应的Getter的访问级别，这样就可以控制变量、属性或下标索引的读写权限。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Samplepgm</span> </span>&#123;</div><div class="line">    <span class="keyword">fileprivate</span> <span class="keyword">var</span> counter: <span class="type">Int</span> = <span class="number">0</span>&#123;</div><div class="line">        <span class="keyword">willSet</span>(newTotal)&#123;</div><div class="line">            <span class="built_in">print</span>(<span class="string">"计数器: \(newTotal)"</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">didSet</span>&#123;</div><div class="line">            <span class="keyword">if</span> counter &gt; oldValue &#123;</div><div class="line">                <span class="built_in">print</span>(<span class="string">"新增加数量 \(counter - oldValue)"</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">let</span> <span class="type">NewCounter</span> = <span class="type">Samplepgm</span>()</div><div class="line"><span class="type">NewCounter</span>.counter = <span class="number">100</span></div><div class="line"><span class="type">NewCounter</span>.counter = <span class="number">800</span></div></pre></td></tr></table></figure>
<h2 id="构造器和默认构造器访问权限"><a href="#构造器和默认构造器访问权限" class="headerlink" title="构造器和默认构造器访问权限"></a>构造器和默认构造器访问权限</h2><p>我们可以给<strong>自定义的</strong>初始化方法申明访问级别，但是要不高于它所属类的访问级别。</p>
<p>如同函数或方法参数，初始化方法参数的访问级别也不能低于初始化方法的访问级别。</p>
<p>默认初始化方法的访问级别与所属类型的访问级别相同。</p>
<h2 id="协议访问权限"><a href="#协议访问权限" class="headerlink" title="协议访问权限"></a>协议访问权限</h2><p>如果你定义了一个public访问级别的协议，那么实现该协议提供的必要函数也会是public的访问级别。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">TcpProtocol</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(no1: <span class="type">Int</span>)</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainClass</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> no1: <span class="type">Int</span> <span class="comment">// local storage</span></div><div class="line">    <span class="keyword">init</span>(no1: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.no1 = no1 <span class="comment">// initialization</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass</span>: <span class="title">MainClass</span>, <span class="title">TcpProtocol</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> no2: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>(no1: <span class="type">Int</span>, no2 : <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.no2 = no2</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(no1:no1)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// Requires only one parameter for convenient method</span></div><div class="line">    <span class="keyword">required</span> <span class="keyword">override</span> <span class="keyword">convenience</span> <span class="keyword">init</span>(no1: <span class="type">Int</span>)  &#123;</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(no1:no1, no2:<span class="number">0</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">let</span> res = <span class="type">MainClass</span>(no1: <span class="number">20</span>)</div><div class="line"><span class="keyword">let</span> show = <span class="type">SubClass</span>(no1: <span class="number">30</span>, no2: <span class="number">50</span>)</div><div class="line"> </div><div class="line"><span class="built_in">print</span>(<span class="string">"res is: \(res.no1)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"res is: \(show.no1)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"res is: \(show.no2)"</span>)</div></pre></td></tr></table></figure>
<h2 id="扩展访问权限"><a href="#扩展访问权限" class="headerlink" title="扩展访问权限"></a>扩展访问权限</h2><p>你可以在条件允许的情况下对类、结构体、枚举进行扩展。</p>
<h2 id="泛型访问权限"><a href="#泛型访问权限" class="headerlink" title="泛型访问权限"></a>泛型访问权限</h2><p>泛型类型或泛型函数的访问级别取泛型类型、函数本身、泛型类型参数三者中的最低访问级别。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">TOS</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">var</span> items = [<span class="type">T</span>]()</div><div class="line">    <span class="keyword">private</span> <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(item: T)</span></span> &#123;</div><div class="line">        items.append(item)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">T</span> &#123;</div><div class="line">        <span class="keyword">return</span> items.removeLast()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> tos = <span class="type">TOS</span>&lt;<span class="type">String</span>&gt;()</div><div class="line">tos.push(<span class="string">"Swift"</span>)</div><div class="line"><span class="built_in">print</span>(tos.items)</div><div class="line"> </div><div class="line">tos.push(<span class="string">"泛型"</span>)</div><div class="line"><span class="built_in">print</span>(tos.items)</div><div class="line"> </div><div class="line">tos.push(<span class="string">"类型参数"</span>)</div><div class="line"><span class="built_in">print</span>(tos.items)</div><div class="line"> </div><div class="line">tos.push(<span class="string">"类型参数名"</span>)</div><div class="line"><span class="built_in">print</span>(tos.items)</div><div class="line"><span class="keyword">let</span> deletetos = tos.pop()</div></pre></td></tr></table></figure>
<h2 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h2><p>任何你定义的类型别名都会被当作不同的类型，以便于进行访问控制。一个类型别名的访问级别不可高于原类型的访问级别。</p>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-泛型]]></title>
      <url>/2017/06/07/Swift%E7%AC%94%E8%AE%B0-%E6%B3%9B%E5%9E%8B/</url>
      <content type="html"><![CDATA[<p>Swift 提供了泛型让你写出灵活且可重用的函数和类型。<br>Swift 标准库是通过泛型代码构建出来的。<br>Swift 的数组和字典类型都是泛型集。</p>
<p>泛型使用了占位类型名（在这里用字母 T 来表示）来代替实际类型名（例如 Int、String 或 Double）。</p>
<a id="more"></a>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">swapTwoValues</span>&lt;T&gt;<span class="params">(<span class="number">_</span> a: <span class="keyword">inout</span> T, <span class="number">_</span> b: <span class="keyword">inout</span> T)</span></span></div></pre></td></tr></table></figure>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 定义一个交换两个变量的函数</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">swapTwoValues</span>&lt;T&gt;<span class="params">(<span class="number">_</span> a: <span class="keyword">inout</span> T, <span class="number">_</span> b: <span class="keyword">inout</span> T)</span></span> &#123;</div><div class="line">    <span class="keyword">let</span> temporaryA = a</div><div class="line">    a = b</div><div class="line">    b = temporaryA</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> numb1 = <span class="number">100</span></div><div class="line"><span class="keyword">var</span> numb2 = <span class="number">200</span></div><div class="line"> </div><div class="line"><span class="built_in">print</span>(<span class="string">"交换前数据:  \(numb1) 和 \(numb2)"</span>)</div><div class="line">swapTwoValues(&amp;numb1, &amp;numb2)</div><div class="line"><span class="built_in">print</span>(<span class="string">"交换后数据: \(numb1) 和 \(numb2)"</span>)</div><div class="line"> </div><div class="line"><span class="keyword">var</span> str1 = <span class="string">"A"</span></div><div class="line"><span class="keyword">var</span> str2 = <span class="string">"B"</span></div><div class="line"> </div><div class="line"><span class="built_in">print</span>(<span class="string">"交换前数据:  \(str1) 和 \(str2)"</span>)</div><div class="line">swapTwoValues(&amp;str1, &amp;str2)</div><div class="line"><span class="built_in">print</span>(<span class="string">"交换后数据: \(str1) 和 \(str2)"</span>)</div></pre></td></tr></table></figure>
<h2 id="泛型类型"><a href="#泛型类型" class="headerlink" title="泛型类型"></a>泛型类型</h2><p>Swift 允许你定义你自己的泛型类型。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span>&lt;<span class="title">Element</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">var</span> items = [<span class="type">Element</span>]()</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> item: Element)</span></span> &#123;</div><div class="line">        items.append(item)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">Element</span> &#123;</div><div class="line">        <span class="keyword">return</span> items.removeLast()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> stackOfStrings = <span class="type">Stack</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="built_in">print</span>(<span class="string">"字符串元素入栈: "</span>)</div><div class="line">stackOfStrings.push(<span class="string">"google"</span>)</div><div class="line">stackOfStrings.push(<span class="string">"runoob"</span>)</div><div class="line"><span class="built_in">print</span>(stackOfStrings.items);</div><div class="line"> </div><div class="line"><span class="keyword">let</span> deletetos = stackOfStrings.pop()</div><div class="line"><span class="built_in">print</span>(<span class="string">"出栈元素: "</span> + deletetos)</div><div class="line"> </div><div class="line"><span class="keyword">var</span> stackOfInts = <span class="type">Stack</span>&lt;<span class="type">Int</span>&gt;()</div><div class="line"><span class="built_in">print</span>(<span class="string">"整数元素入栈: "</span>)</div><div class="line">stackOfInts.push(<span class="number">1</span>)</div><div class="line">stackOfInts.push(<span class="number">2</span>)</div><div class="line"><span class="built_in">print</span>(stackOfInts.items);</div></pre></td></tr></table></figure>
<h2 id="扩展泛型类型"><a href="#扩展泛型类型" class="headerlink" title="扩展泛型类型"></a>扩展泛型类型</h2><p>当你扩展一个泛型类型的时候（使用 extension 关键字），你并不需要在扩展的定义中提供类型参数列表。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span>&lt;<span class="title">Element</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">var</span> items = [<span class="type">Element</span>]()</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> item: Element)</span></span> &#123;</div><div class="line">        items.append(item)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">Element</span> &#123;</div><div class="line">        <span class="keyword">return</span> items.removeLast()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Stack</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> topItem: <span class="type">Element</span>? &#123;</div><div class="line">       <span class="keyword">return</span> items.isEmpty ? <span class="literal">nil</span> : items[items.<span class="built_in">count</span> - <span class="number">1</span>]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> stackOfStrings = <span class="type">Stack</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="built_in">print</span>(<span class="string">"字符串元素入栈: "</span>)</div><div class="line">stackOfStrings.push(<span class="string">"google"</span>)</div><div class="line">stackOfStrings.push(<span class="string">"runoob"</span>)</div><div class="line"> </div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> topItem = stackOfStrings.topItem &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"栈中的顶部元素是：\(topItem)."</span>)</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="built_in">print</span>(stackOfStrings.items)</div></pre></td></tr></table></figure>
<h2 id="类型约束"><a href="#类型约束" class="headerlink" title="类型约束"></a>类型约束</h2><p>类型约束指定了一个必须继承自指定类的类型参数，或者遵循一个特定的协议或协议构成。</p>
<h3 id="类型约束语法"><a href="#类型约束语法" class="headerlink" title="类型约束语法"></a>类型约束语法</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span>&lt;T: SomeClass, U: SomeProtocol&gt;<span class="params">(someT: T, someU: U)</span></span> &#123;</div><div class="line">    <span class="comment">// 这里是泛型函数的函数体部分</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这个函数有两个类型参数。第一个类型参数 T，有一个要求 T 必须是 SomeClass 子类的类型约束；第二个类型参数 U，有一个要求 U 必须符合 SomeProtocol 协议的类型约束。</p>
<h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 非泛型函数，查找指定字符串在数组中的索引</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">findIndex</span><span class="params">(ofString valueToFind: String, <span class="keyword">in</span> array: [String])</span></span> -&gt; <span class="type">Int</span>? &#123;</div><div class="line">    <span class="keyword">for</span> (index, value) <span class="keyword">in</span> array.enumerated() &#123;</div><div class="line">        <span class="keyword">if</span> value == valueToFind &#123;</div><div class="line">            <span class="comment">// 找到返回索引值</span></div><div class="line">            <span class="keyword">return</span> index</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="keyword">let</span> strings = [<span class="string">"google"</span>, <span class="string">"weibo"</span>, <span class="string">"taobao"</span>, <span class="string">"runoob"</span>, <span class="string">"facebook"</span>]</div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> foundIndex = findIndex(ofString: <span class="string">"runoob"</span>, <span class="keyword">in</span>: strings) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"runoob 的索引为 \(foundIndex)"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="关联类"><a href="#关联类" class="headerlink" title="关联类"></a>关联类</h2><p>Swift 中使用 associatedtype 关键字来设置关联类型实例。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Container 协议</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Container</span> </span>&#123;</div><div class="line">    associatedtype <span class="type">ItemType</span></div><div class="line">    <span class="comment">// 添加一个新元素到容器里</span></div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(<span class="number">_</span> item: ItemType)</span></span></div><div class="line">    <span class="comment">// 获取容器中元素的数</span></div><div class="line">    <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">    <span class="comment">// 通过索引值类型为 Int 的下标检索到容器中的每一个元素</span></div><div class="line">    <span class="keyword">subscript</span>(i: <span class="type">Int</span>) -&gt; <span class="type">ItemType</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Stack 结构体遵从 Container 协议</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span>&lt;<span class="title">Element</span>&gt;: <span class="title">Container</span> </span>&#123;</div><div class="line">    <span class="comment">// Stack&lt;Element&gt; 的原始实现部分</span></div><div class="line">    <span class="keyword">var</span> items = [<span class="type">Element</span>]()</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> item: Element)</span></span> &#123;</div><div class="line">        items.append(item)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">Element</span> &#123;</div><div class="line">        <span class="keyword">return</span> items.removeLast()</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// Container 协议的实现部分</span></div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(<span class="number">_</span> item: Element)</span></span> &#123;</div><div class="line">        <span class="keyword">self</span>.push(item)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> items.<span class="built_in">count</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">subscript</span>(i: <span class="type">Int</span>) -&gt; <span class="type">Element</span> &#123;</div><div class="line">        <span class="keyword">return</span> items[i]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> tos = <span class="type">Stack</span>&lt;<span class="type">String</span>&gt;()</div><div class="line">tos.push(<span class="string">"google"</span>)</div><div class="line">tos.push(<span class="string">"runoob"</span>)</div><div class="line">tos.push(<span class="string">"taobao"</span>)</div><div class="line"><span class="comment">// 元素列表</span></div><div class="line"><span class="built_in">print</span>(tos.items)</div><div class="line"><span class="comment">// 元素个数</span></div><div class="line"><span class="built_in">print</span>( tos.<span class="built_in">count</span>)</div></pre></td></tr></table></figure>
<h2 id="Where-语句"><a href="#Where-语句" class="headerlink" title="Where 语句"></a>Where 语句</h2><p>类型约束能够确保类型符合泛型函数或类的定义约束。</p>
<p>你可以在参数列表中通过where语句定义参数的约束。</p>
<h3 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h3><p>下面的例子定义了一个名为allItemsMatch的泛型函数，用来检查两个Container实例是否包含相同顺序的相同元素。<br>如果所有的元素能够匹配，那么返回 true，反之则返回 false。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Container 协议</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Container</span> </span>&#123;</div><div class="line">    associatedtype <span class="type">ItemType</span></div><div class="line">    <span class="comment">// 添加一个新元素到容器里</span></div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(<span class="number">_</span> item: ItemType)</span></span></div><div class="line">    <span class="comment">// 获取容器中元素的数</span></div><div class="line">    <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">    <span class="comment">// 通过索引值类型为 Int 的下标检索到容器中的每一个元素</span></div><div class="line">    <span class="keyword">subscript</span>(i: <span class="type">Int</span>) -&gt; <span class="type">ItemType</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">// // 遵循Container协议的泛型TOS类型</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span>&lt;<span class="title">Element</span>&gt;: <span class="title">Container</span> </span>&#123;</div><div class="line">    <span class="comment">// Stack&lt;Element&gt; 的原始实现部分</span></div><div class="line">    <span class="keyword">var</span> items = [<span class="type">Element</span>]()</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> item: Element)</span></span> &#123;</div><div class="line">        items.append(item)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">Element</span> &#123;</div><div class="line">        <span class="keyword">return</span> items.removeLast()</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// Container 协议的实现部分</span></div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(<span class="number">_</span> item: Element)</span></span> &#123;</div><div class="line">        <span class="keyword">self</span>.push(item)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> items.<span class="built_in">count</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">subscript</span>(i: <span class="type">Int</span>) -&gt; <span class="type">Element</span> &#123;</div><div class="line">        <span class="keyword">return</span> items[i]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 扩展，将 Array 当作 Container 来使用</span></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span>: <span class="title">Container</span> </span>&#123;&#125;</div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">allItemsMatch</span>&lt;C1: Container, C2: Container&gt;</span></div><div class="line">    <span class="params">(<span class="number">_</span> someContainer: C1, <span class="number">_</span> anotherContainer: C2)</span> -&gt; <span class="type">Bool</span></div><div class="line">    <span class="keyword">where</span> <span class="type">C1</span>.<span class="type">ItemType</span> == <span class="type">C2</span>.<span class="type">ItemType</span>, <span class="type">C1</span>.<span class="type">ItemType</span>: <span class="type">Equatable</span> &#123;</div><div class="line">        </div><div class="line">        <span class="comment">// 检查两个容器含有相同数量的元素</span></div><div class="line">        <span class="keyword">if</span> someContainer.<span class="built_in">count</span> != anotherContainer.<span class="built_in">count</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// 检查每一对元素是否相等</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;someContainer.<span class="built_in">count</span> &#123;</div><div class="line">            <span class="keyword">if</span> someContainer[i] != anotherContainer[i] &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// 所有元素都匹配，返回 true</span></div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> tos = <span class="type">Stack</span>&lt;<span class="type">String</span>&gt;()</div><div class="line">tos.push(<span class="string">"google"</span>)</div><div class="line">tos.push(<span class="string">"runoob"</span>)</div><div class="line">tos.push(<span class="string">"taobao"</span>)</div><div class="line">   </div><div class="line"><span class="keyword">var</span> aos = [<span class="string">"google"</span>, <span class="string">"runoob"</span>, <span class="string">"taobao"</span>]</div><div class="line">   </div><div class="line"><span class="keyword">if</span> allItemsMatch(tos, aos) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"匹配所有元素"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"元素不匹配"</span>)</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">//匹配所有元素</span></div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-协议]]></title>
      <url>/2017/06/07/Swift%E7%AC%94%E8%AE%B0-%E5%8D%8F%E8%AE%AE/</url>
      <content type="html"><![CDATA[<p>协议规定了用来实现某一特定功能所必需的方法和属性。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SomeProtocol</span> </span>&#123;</div><div class="line">    <span class="comment">// 协议内容</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>要使类遵循某个协议，需要在类型名称后加上协议名称，中间以冒号:分隔，作为类型定义的一部分。遵循多个协议时，各协议之间用逗号,分隔。</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SomeStructure</span>: <span class="title">FirstProtocol</span>, <span class="title">AnotherProtocol</span> </span>&#123;</div><div class="line">    <span class="comment">// 结构体内容</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果类在遵循协议的同时拥有父类，应该将父类名放在协议名之前，以逗号分隔。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>: <span class="title">SomeSuperClass</span>, <span class="title">FirstProtocol</span>, <span class="title">AnotherProtocol</span> </span>&#123;</div><div class="line">    <span class="comment">// 类的内容</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="对属性的规定"><a href="#对属性的规定" class="headerlink" title="对属性的规定"></a>对属性的规定</h2><ul>
<li>协议用于指定特定的实例属性或类属性，而不用指定是存储型属性或计算型属性。此外还必须指明是只读的还是可读可写的。</li>
<li>协议中的通常用var来声明变量属性，在类型声明后加上{ set get }来表示属性是可读可写的，只读属性则用{ get }来表示。</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">classa</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> marks: <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</div><div class="line">    <span class="keyword">var</span> result: <span class="type">Bool</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">attendance</span><span class="params">()</span></span> -&gt; <span class="type">String</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">markssecured</span><span class="params">()</span></span> -&gt; <span class="type">String</span></div><div class="line">    </div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">classb</span>: <span class="title">classa</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> present: <span class="type">Bool</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</div><div class="line">    <span class="keyword">var</span> subject: <span class="type">String</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</div><div class="line">    <span class="keyword">var</span> stname: <span class="type">String</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</div><div class="line">    </div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">classc</span>: <span class="title">classb</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> marks = <span class="number">96</span></div><div class="line">    <span class="keyword">let</span> result = <span class="literal">true</span></div><div class="line">    <span class="keyword">var</span> present = <span class="literal">false</span></div><div class="line">    <span class="keyword">var</span> subject = <span class="string">"Swift 协议"</span></div><div class="line">    <span class="keyword">var</span> stname = <span class="string">"Protocols"</span></div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">attendance</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"The \(stname) has secured 99% attendance"</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">markssecured</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"\(stname) has scored \(marks)"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">let</span> studdet = classc()</div><div class="line">studdet.stname = <span class="string">"Swift"</span></div><div class="line">studdet.marks = <span class="number">98</span></div><div class="line">studdet.markssecured()</div><div class="line">  </div><div class="line"><span class="built_in">print</span>(studdet.marks)</div><div class="line"><span class="built_in">print</span>(studdet.result)</div><div class="line"><span class="built_in">print</span>(studdet.present)</div><div class="line"><span class="built_in">print</span>(studdet.subject)</div><div class="line"><span class="built_in">print</span>(studdet.stname)</div></pre></td></tr></table></figure>
<h2 id="对-Mutating-方法的规定"><a href="#对-Mutating-方法的规定" class="headerlink" title="对 Mutating 方法的规定"></a>对 Mutating 方法的规定</h2><p>值类型(结构体，枚举)的实例方法中，将mutating关键字作为函数的前缀，写在func之前，表示可以在该方法中修改它所属的实例及其实例属性的值。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">daysofaweek</span> </span>&#123;</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">()</span></span></div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">days</span>: <span class="title">daysofaweek</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> sun, mon, tue, wed, thurs, fri, sat</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">        <span class="keyword">case</span> .sun:</div><div class="line">            <span class="keyword">self</span> = .sun</div><div class="line">            <span class="built_in">print</span>(<span class="string">"Sunday"</span>)</div><div class="line">        <span class="keyword">case</span> .mon:</div><div class="line">            <span class="keyword">self</span> = .mon</div><div class="line">            <span class="built_in">print</span>(<span class="string">"Monday"</span>)</div><div class="line">        <span class="keyword">case</span> .tue:</div><div class="line">            <span class="keyword">self</span> = .tue</div><div class="line">            <span class="built_in">print</span>(<span class="string">"Tuesday"</span>)</div><div class="line">        <span class="keyword">case</span> .wed:</div><div class="line">            <span class="keyword">self</span> = .wed</div><div class="line">            <span class="built_in">print</span>(<span class="string">"Wednesday"</span>)</div><div class="line">        <span class="keyword">case</span> .thurs:</div><div class="line">            <span class="keyword">self</span> = .thurs</div><div class="line">            <span class="built_in">print</span>(<span class="string">"Wednesday"</span>)</div><div class="line">        <span class="keyword">case</span> .fri:</div><div class="line">            <span class="keyword">self</span> = .fri</div><div class="line">            <span class="built_in">print</span>(<span class="string">"Wednesday"</span>)</div><div class="line">        <span class="keyword">case</span> .sat:</div><div class="line">            <span class="keyword">self</span> = .sat</div><div class="line">            <span class="built_in">print</span>(<span class="string">"Saturday"</span>)</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            <span class="built_in">print</span>(<span class="string">"NO Such Day"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">var</span> res = days.wed</div><div class="line">res.show()</div></pre></td></tr></table></figure>
<h2 id="协议构造器规定在类中的实现"><a href="#协议构造器规定在类中的实现" class="headerlink" title="协议构造器规定在类中的实现"></a>协议构造器规定在类中的实现</h2><p>你可以在遵循该协议的类中实现构造器，并指定其为类的指定构造器或者便利构造器。在这两种情况下，你都必须给构造器实现标上”required”修饰符：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>: <span class="title">SomeProtocol</span> </span>&#123;</div><div class="line">   <span class="keyword">required</span> <span class="keyword">init</span>(someParameter: <span class="type">Int</span>) &#123;</div><div class="line">      <span class="comment">// 构造器实现</span></div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">tcpprotocol</span> </span>&#123;</div><div class="line">   <span class="keyword">init</span>(aprot: <span class="type">Int</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">tcpClass</span>: <span class="title">tcpprotocol</span> </span>&#123;</div><div class="line">   <span class="keyword">required</span> <span class="keyword">init</span>(aprot: <span class="type">Int</span>) &#123;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用required修饰符可以保证：所有的遵循该协议的子类，同样能为构造器规定提供一个显式的实现或继承实现。</p>
<p>如果一个子类重写了父类的指定构造器，并且该构造器遵循了某个协议的规定，那么该构造器的实现需要被同时标示required和override修饰符：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">tcpprotocol</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(no1: <span class="type">Int</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">mainClass</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> no1: <span class="type">Int</span> <span class="comment">// 局部变量</span></div><div class="line">    <span class="keyword">init</span>(no1: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.no1 = no1 <span class="comment">// 初始化</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">subClass</span>: <span class="title">mainClass</span>, <span class="title">tcpprotocol</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> no2: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>(no1: <span class="type">Int</span>, no2 : <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.no2 = no2</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(no1:no1)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 因为遵循协议，需要加上"required"; 因为继承自父类，需要加上"override"</span></div><div class="line">    <span class="keyword">required</span> <span class="keyword">override</span> <span class="keyword">convenience</span> <span class="keyword">init</span>(no1: <span class="type">Int</span>)  &#123;</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(no1:no1, no2:<span class="number">0</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> res = mainClass(no1: <span class="number">20</span>)</div><div class="line"><span class="keyword">let</span> show = subClass(no1: <span class="number">30</span>, no2: <span class="number">50</span>)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"res is: \(res.no1)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"res is: \(show.no1)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"res is: \(show.no2)"</span>)</div></pre></td></tr></table></figure>
<h2 id="协议类型"><a href="#协议类型" class="headerlink" title="协议类型"></a>协议类型</h2><p>尽管协议本身并不实现任何功能，但是协议可以被当做类型来使用。</p>
<p>协议可以像其他普通类型一样使用，使用场景:</p>
<ul>
<li>作为函数、方法或构造器中的参数类型或返回值类型</li>
<li>作为常量、变量或属性的类型</li>
<li>作为数组、字典或其他容器中的元素类型</li>
</ul>
<h2 id="在扩展中添加协议成员"><a href="#在扩展中添加协议成员" class="headerlink" title="在扩展中添加协议成员"></a>在扩展中添加协议成员</h2><p>我们可以可以通过扩展来扩充已存在类型( 类，结构体，枚举等)。</p>
<p>扩展可以为已存在的类型添加属性，方法，下标脚本，协议等成员。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">AgeClasificationProtocol</span> </span>&#123;</div><div class="line">   <span class="keyword">var</span> age: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">   <span class="function"><span class="keyword">func</span> <span class="title">agetype</span><span class="params">()</span></span> -&gt; <span class="type">String</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">   <span class="keyword">let</span> firstname: <span class="type">String</span></div><div class="line">   <span class="keyword">let</span> lastname: <span class="type">String</span></div><div class="line">   <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">   <span class="keyword">init</span>(firstname: <span class="type">String</span>, lastname: <span class="type">String</span>) &#123;</div><div class="line">      <span class="keyword">self</span>.firstname = firstname</div><div class="line">      <span class="keyword">self</span>.lastname = lastname</div><div class="line">      <span class="keyword">self</span>.age = <span class="number">10</span></div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span> : <span class="title">AgeClasificationProtocol</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">func</span> <span class="title">fullname</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">      <span class="keyword">var</span> <span class="built_in">c</span>: <span class="type">String</span></div><div class="line">      <span class="built_in">c</span> = firstname + <span class="string">" "</span> + lastname</div><div class="line">      <span class="keyword">return</span> <span class="built_in">c</span></div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   <span class="function"><span class="keyword">func</span> <span class="title">agetype</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">      <span class="keyword">switch</span> age &#123;</div><div class="line">      <span class="keyword">case</span> <span class="number">0</span>...<span class="number">2</span>:</div><div class="line">         <span class="keyword">return</span> <span class="string">"Baby"</span></div><div class="line">      <span class="keyword">case</span> <span class="number">2</span>...<span class="number">12</span>:</div><div class="line">         <span class="keyword">return</span> <span class="string">"Child"</span></div><div class="line">      <span class="keyword">case</span> <span class="number">13</span>...<span class="number">19</span>:</div><div class="line">         <span class="keyword">return</span> <span class="string">"Teenager"</span></div><div class="line">      <span class="keyword">case</span> <span class="keyword">let</span> x <span class="keyword">where</span> x &gt; <span class="number">65</span>:</div><div class="line">         <span class="keyword">return</span> <span class="string">"Elderly"</span></div><div class="line">      <span class="keyword">default</span>:</div><div class="line">         <span class="keyword">return</span> <span class="string">"Normal"</span></div><div class="line">      &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="协议的继承"><a href="#协议的继承" class="headerlink" title="协议的继承"></a>协议的继承</h2><p>协议能够继承一个或多个其他协议，可以在继承的协议基础上增加新的内容要求。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">InheritingProtocol</span>: <span class="title">SomeProtocol</span>, <span class="title">AnotherProtocol</span> </span>&#123;</div><div class="line">    <span class="comment">// 协议定义</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="类专属协议"><a href="#类专属协议" class="headerlink" title="类专属协议"></a>类专属协议</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SomeClassOnlyProtocol</span>: <span class="title">class</span>, <span class="title">SomeInheritedProtocol</span> </span>&#123;</div><div class="line">    <span class="comment">// 协议定义</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="协议合成"><a href="#协议合成" class="headerlink" title="协议合成"></a>协议合成</h2><p>Swift 支持合成多个协议，这在我们需要同时遵循多个协议时非常有用。</p>
<h2 id="检验协议的一致性"><a href="#检验协议的一致性" class="headerlink" title="检验协议的一致性"></a>检验协议的一致性</h2><p>你可以使用is和as操作符来检查是否遵循某一协议或强制转化为某一类型。</p>
<ul>
<li>is操作符用来检查实例是否遵循了某个协议。</li>
<li>as?返回一个可选值，当实例遵循协议时，返回该协议类型;否则返回nil。</li>
<li>as用以强制向下转型，如果强转失败，会引起运行时错误。</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">HasArea</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> area: <span class="type">Double</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 定义了Circle类，都遵循了HasArea协议</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span>: <span class="title">HasArea</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> pi = <span class="number">3.1415927</span></div><div class="line">    <span class="keyword">var</span> radius: <span class="type">Double</span></div><div class="line">    <span class="keyword">var</span> area: <span class="type">Double</span> &#123; <span class="keyword">return</span> pi * radius * radius &#125;</div><div class="line">    <span class="keyword">init</span>(radius: <span class="type">Double</span>) &#123; <span class="keyword">self</span>.radius = radius &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 定义了Country类，都遵循了HasArea协议</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Country</span>: <span class="title">HasArea</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> area: <span class="type">Double</span></div><div class="line">    <span class="keyword">init</span>(area: <span class="type">Double</span>) &#123; <span class="keyword">self</span>.area = area &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Animal是一个没有实现HasArea协议的类</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> legs: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>(legs: <span class="type">Int</span>) &#123; <span class="keyword">self</span>.legs = legs &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> objects: [<span class="type">AnyObject</span>] = [</div><div class="line">    <span class="type">Circle</span>(radius: <span class="number">2.0</span>),</div><div class="line">    <span class="type">Country</span>(area: <span class="number">243_610</span>),</div><div class="line">    <span class="type">Animal</span>(legs: <span class="number">4</span>)</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">for</span> object <span class="keyword">in</span> objects &#123;</div><div class="line">    <span class="comment">// 对迭代出的每一个元素进行检查，看它是否遵循了HasArea协议</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> objectWithArea = object <span class="keyword">as</span>? <span class="type">HasArea</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"面积为 \(objectWithArea.area)"</span>)</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"没有面积"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-扩展]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%89%A9%E5%B1%95/</url>
      <content type="html"><![CDATA[<p>扩展就是向一个已有的类、结构体或枚举类型添加新功能。<br>扩展可以对一个类型添加新的功能，但是不能重写已有的功能。</p>
<p>Swift 中的扩展可以：</p>
<ul>
<li>添加计算型属性和计算型静态属性</li>
<li>定义实例方法和类型方法</li>
<li>提供新的构造器</li>
<li>定义下标</li>
<li>定义和使用新的嵌套类型</li>
<li>使一个已有类型符合某个协议</li>
</ul>
<a id="more"></a>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>扩展声明使用关键字 extension：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">SomeType</span> </span>&#123;</div><div class="line">    <span class="comment">// 加到SomeType的新功能写到这里</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">SomeType</span>: <span class="title">SomeProtocol</span>, <span class="title">AnotherProctocol</span> </span>&#123;</div><div class="line">    <span class="comment">// 协议实现写到这里</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="计算型属性"><a href="#计算型属性" class="headerlink" title="计算型属性"></a>计算型属性</h2><p>扩展可以向已有类型添加计算型实例属性和计算型类型属性。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</div><div class="line">   <span class="keyword">var</span> add: <span class="type">Int</span> &#123;<span class="keyword">return</span> <span class="keyword">self</span> + <span class="number">100</span> &#125;</div><div class="line">   <span class="keyword">var</span> sub: <span class="type">Int</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> - <span class="number">10</span> &#125;</div><div class="line">   <span class="keyword">var</span> mul: <span class="type">Int</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> * <span class="number">10</span> &#125;</div><div class="line">   <span class="keyword">var</span> div: <span class="type">Int</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> / <span class="number">5</span> &#125;</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="keyword">let</span> addition = <span class="number">3</span>.add</div><div class="line"><span class="built_in">print</span>(<span class="string">"加法运算后的值：\(addition)"</span>)</div><div class="line">    </div><div class="line"><span class="keyword">let</span> subtraction = <span class="number">120</span>.sub</div><div class="line"><span class="built_in">print</span>(<span class="string">"减法运算后的值：\(subtraction)"</span>)</div><div class="line">    </div><div class="line"><span class="keyword">let</span> multiplication = <span class="number">39</span>.mul</div><div class="line"><span class="built_in">print</span>(<span class="string">"乘法运算后的值：\(multiplication)"</span>)</div><div class="line">    </div><div class="line"><span class="keyword">let</span> division = <span class="number">55</span>.div</div><div class="line"><span class="built_in">print</span>(<span class="string">"除法运算后的值: \(division)"</span>)</div><div class="line">    </div><div class="line"><span class="keyword">let</span> mix = <span class="number">30</span>.add + <span class="number">34</span>.sub</div><div class="line"><span class="built_in">print</span>(<span class="string">"混合运算结果：\(mix)"</span>)</div></pre></td></tr></table></figure>
<h2 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h2><p>扩展可以向已有类型添加新的构造器。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sum</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> num1 = <span class="number">100</span>, num2 = <span class="number">200</span></div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">diff</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> no1 = <span class="number">200</span>, no2 = <span class="number">100</span></div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mult</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> a = sum()</div><div class="line">    <span class="keyword">var</span> b = diff()</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">mult</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(x: sum, y: diff) &#123;</div><div class="line">        <span class="number">_</span> = x.num1 + x.num2</div><div class="line">        <span class="number">_</span> = y.no1 + y.no2</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="keyword">let</span> a = sum(num1: <span class="number">100</span>, num2: <span class="number">200</span>)</div><div class="line"><span class="keyword">let</span> b = diff(no1: <span class="number">200</span>, no2: <span class="number">100</span>)</div><div class="line"><span class="keyword">let</span> getMult = mult(x: a, y: b)</div><div class="line">    </div><div class="line"><span class="built_in">print</span>(<span class="string">"getMult sum\(getMult.a.num1, getMult.a.num2)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"getMult diff\(getMult.b.no1, getMult.b.no2)"</span>)</div></pre></td></tr></table></figure>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>扩展可以向已有类型添加新的实例方法和类型方法。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">func</span> <span class="title">topics</span><span class="params">(summation: <span class="params">()</span></span></span> -&gt; ()) &#123;</div><div class="line">      <span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="keyword">self</span> &#123;</div><div class="line">         summation() </div><div class="line">      &#125;</div><div class="line">   &#125;</div><div class="line">&#125;  </div><div class="line"></div><div class="line"><span class="number">4</span>.topics(&#123;</div><div class="line">   <span class="built_in">print</span>(<span class="string">"扩展模块内"</span>)       </div><div class="line">&#125;)    </div><div class="line">    </div><div class="line"><span class="number">3</span>.topics(&#123;</div><div class="line">   <span class="built_in">print</span>(<span class="string">"内型转换模块内"</span>)       </div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>这个topics方法使用了一个() -&gt; ()类型的单参数，表明函数没有参数而且没有返回值。</p>
<h2 id="可变实例方法"><a href="#可变实例方法" class="headerlink" title="可变实例方法"></a>可变实例方法</h2><p>通过扩展添加的实例方法也可以修改该实例本身。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Double</span> </span>&#123;</div><div class="line">   <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">square</span><span class="params">()</span></span> &#123;</div><div class="line">      <span class="keyword">let</span> pi = <span class="number">3.1415</span></div><div class="line">      <span class="keyword">self</span> = pi * <span class="keyword">self</span> * <span class="keyword">self</span></div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="keyword">var</span> <span class="type">Trial1</span> = <span class="number">3.3</span></div><div class="line"><span class="type">Trial1</span>.square()</div><div class="line"><span class="built_in">print</span>(<span class="string">"圆的面积为: \(Trial1)"</span>)</div><div class="line">    </div><div class="line"><span class="keyword">var</span> <span class="type">Trial2</span> = <span class="number">5.8</span></div><div class="line"><span class="type">Trial2</span>.square()</div><div class="line"><span class="built_in">print</span>(<span class="string">"圆的面积为: \(Trial2)"</span>)</div><div class="line">    </div><div class="line"><span class="keyword">var</span> <span class="type">Trial3</span> = <span class="number">120.3</span></div><div class="line"><span class="type">Trial3</span>.square()</div><div class="line"><span class="built_in">print</span>(<span class="string">"圆的面积为: \(Trial3)"</span>)</div></pre></td></tr></table></figure>
<h2 id="下标"><a href="#下标" class="headerlink" title="下标"></a>下标</h2><p>扩展可以向一个已有类型添加新下标。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</div><div class="line">   <span class="keyword">subscript</span>(<span class="keyword">var</span> multtable: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">      <span class="keyword">var</span> no1 = <span class="number">1</span></div><div class="line">      <span class="keyword">while</span> multtable &gt; <span class="number">0</span> &#123;</div><div class="line">         no1 *= <span class="number">10</span></div><div class="line">         --multtable</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> (<span class="keyword">self</span> / no1) % <span class="number">10</span></div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="built_in">print</span>(<span class="number">12</span>[<span class="number">0</span>])  <span class="comment">//2</span></div><div class="line"><span class="built_in">print</span>(<span class="number">7869</span>[<span class="number">1</span>]) <span class="comment">//6</span></div><div class="line"><span class="built_in">print</span>(<span class="number">786543</span>[<span class="number">2</span>]) <span class="comment">//5</span></div></pre></td></tr></table></figure>
<h2 id="嵌套类型"><a href="#嵌套类型" class="headerlink" title="嵌套类型"></a>嵌套类型</h2><p>扩展可以向已有的类、结构体和枚举添加新的嵌套类型：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</div><div class="line">   <span class="class"><span class="keyword">enum</span> <span class="title">calc</span></span></div><div class="line">   &#123;</div><div class="line">      <span class="keyword">case</span> add</div><div class="line">      <span class="keyword">case</span> sub</div><div class="line">      <span class="keyword">case</span> mult</div><div class="line">      <span class="keyword">case</span> div</div><div class="line">      <span class="keyword">case</span> anything</div><div class="line">   &#125;</div><div class="line">  </div><div class="line">   <span class="keyword">var</span> <span class="built_in">print</span>: calc &#123;</div><div class="line">      <span class="keyword">switch</span> <span class="keyword">self</span></div><div class="line">      &#123;</div><div class="line">         <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> .add</div><div class="line">         <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">            <span class="keyword">return</span> .sub</div><div class="line">         <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">            <span class="keyword">return</span> .mult</div><div class="line">         <span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">            <span class="keyword">return</span> .div</div><div class="line">         <span class="keyword">default</span>:</div><div class="line">            <span class="keyword">return</span> .anything</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">result</span><span class="params">(numb: [Int])</span></span> &#123;</div><div class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> numb &#123;</div><div class="line">      <span class="keyword">switch</span> i.<span class="built_in">print</span> &#123;</div><div class="line">         <span class="keyword">case</span> .add:</div><div class="line">            <span class="built_in">print</span>(<span class="string">" 10 "</span>)</div><div class="line">          <span class="keyword">case</span> .sub:</div><div class="line">            <span class="built_in">print</span>(<span class="string">" 20 "</span>)</div><div class="line">         <span class="keyword">case</span> .mult:</div><div class="line">         <span class="built_in">print</span>(<span class="string">" 30 "</span>)</div><div class="line">         <span class="keyword">case</span> .div:</div><div class="line">         <span class="built_in">print</span>(<span class="string">" 40 "</span>)</div><div class="line">         <span class="keyword">default</span>:</div><div class="line">         <span class="built_in">print</span>(<span class="string">" 50 "</span>)</div><div class="line"></div><div class="line">      &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">    </div><div class="line">result([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>])</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-类型转换]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</url>
      <content type="html"><![CDATA[<p>Swift 中类型转换使用 is 和 as 操作符实现，is 用于检测值的类型，as 用于转换类型。</p>
<h2 id="检查类型"><a href="#检查类型" class="headerlink" title="检查类型"></a>检查类型</h2><p>类型检查使用 is 关键字。</p>
<p>操作符 is 来检查一个实例是否属于特定子类型。若实例属于那个子类型，类型检查操作符返回 true，否则返回 false。</p>
<a id="more"></a>
<h2 id="向下转型"><a href="#向下转型" class="headerlink" title="向下转型"></a>向下转型</h2><p>向下转型，用类型转换操作符(as? 或 as!)</p>
<ul>
<li><p>当你不确定向下转型可以成功时，用类型转换的条件形式(as?)。条件形式的类型转换总是返回一个可选值（optional value），并且若下转是不可能的，可选值将是 nil。</p>
</li>
<li><p>只有你可以确定向下转型一定会成功时，才使用强制形式(as!)。当你试图向下转型为一个不正确的类型时，强制形式的类型转换会触发一个运行时错误。</p>
</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subjects</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> physics: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(physics: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.physics = physics</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chemistry</span>: <span class="title">Subjects</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> equations: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(physics: <span class="type">String</span>, equations: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.equations = equations</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maths</span>: <span class="title">Subjects</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> formulae: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(physics: <span class="type">String</span>, formulae: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.formulae = formulae</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> sa = [</div><div class="line">    <span class="type">Chemistry</span>(physics: <span class="string">"固体物理"</span>, equations: <span class="string">"赫兹"</span>),</div><div class="line">    <span class="type">Maths</span>(physics: <span class="string">"流体动力学"</span>, formulae: <span class="string">"千兆赫"</span>),</div><div class="line">    <span class="type">Chemistry</span>(physics: <span class="string">"热物理学"</span>, equations: <span class="string">"分贝"</span>),</div><div class="line">    <span class="type">Maths</span>(physics: <span class="string">"天体物理学"</span>, formulae: <span class="string">"兆赫"</span>),</div><div class="line">    <span class="type">Maths</span>(physics: <span class="string">"微分方程"</span>, formulae: <span class="string">"余弦级数"</span>)]</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> samplechem = <span class="type">Chemistry</span>(physics: <span class="string">"固体物理"</span>, equations: <span class="string">"赫兹"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例物理学是: \(samplechem.physics)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例方程式: \(samplechem.equations)"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> samplemaths = <span class="type">Maths</span>(physics: <span class="string">"流体动力学"</span>, formulae: <span class="string">"千兆赫"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例物理学是: \(samplemaths.physics)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例公式是: \(samplemaths.formulae)"</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> chemCount = <span class="number">0</span></div><div class="line"><span class="keyword">var</span> mathsCount = <span class="number">0</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> sa &#123;</div><div class="line">    <span class="comment">// 类型转换的条件形式</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> show = item <span class="keyword">as</span>? <span class="type">Chemistry</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"化学主题是: '\(show.physics)', \(show.equations)"</span>)</div><div class="line">        <span class="comment">// 强制形式</span></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> example = item <span class="keyword">as</span>? <span class="type">Maths</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"数学主题是: '\(example.physics)',  \(example.formulae)"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Any和AnyObject的类型转换"><a href="#Any和AnyObject的类型转换" class="headerlink" title="Any和AnyObject的类型转换"></a>Any和AnyObject的类型转换</h2><p>Swift为不确定类型提供了两种特殊类型别名：</p>
<ul>
<li>AnyObject可以代表任何class类型的实例。</li>
<li>Any可以表示任何类型，包括方法类型（function types）。</li>
</ul>
<h3 id="Any-实例"><a href="#Any-实例" class="headerlink" title="Any 实例"></a>Any 实例</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subjects</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> physics: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(physics: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.physics = physics</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chemistry</span>: <span class="title">Subjects</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> equations: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(physics: <span class="type">String</span>, equations: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.equations = equations</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maths</span>: <span class="title">Subjects</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> formulae: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(physics: <span class="type">String</span>, formulae: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.formulae = formulae</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> sa = [</div><div class="line">    <span class="type">Chemistry</span>(physics: <span class="string">"固体物理"</span>, equations: <span class="string">"赫兹"</span>),</div><div class="line">    <span class="type">Maths</span>(physics: <span class="string">"流体动力学"</span>, formulae: <span class="string">"千兆赫"</span>),</div><div class="line">    <span class="type">Chemistry</span>(physics: <span class="string">"热物理学"</span>, equations: <span class="string">"分贝"</span>),</div><div class="line">    <span class="type">Maths</span>(physics: <span class="string">"天体物理学"</span>, formulae: <span class="string">"兆赫"</span>),</div><div class="line">    <span class="type">Maths</span>(physics: <span class="string">"微分方程"</span>, formulae: <span class="string">"余弦级数"</span>)]</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> samplechem = <span class="type">Chemistry</span>(physics: <span class="string">"固体物理"</span>, equations: <span class="string">"赫兹"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例物理学是: \(samplechem.physics)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例方程式: \(samplechem.equations)"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> samplemaths = <span class="type">Maths</span>(physics: <span class="string">"流体动力学"</span>, formulae: <span class="string">"千兆赫"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例物理学是: \(samplemaths.physics)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例公式是: \(samplemaths.formulae)"</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> chemCount = <span class="number">0</span></div><div class="line"><span class="keyword">var</span> mathsCount = <span class="number">0</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> sa &#123;</div><div class="line">    <span class="comment">// 类型转换的条件形式</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> show = item <span class="keyword">as</span>? <span class="type">Chemistry</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"化学主题是: '\(show.physics)', \(show.equations)"</span>)</div><div class="line">        <span class="comment">// 强制形式</span></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> example = item <span class="keyword">as</span>? <span class="type">Maths</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"数学主题是: '\(example.physics)',  \(example.formulae)"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 可以存储Any类型的数组 exampleany</span></div><div class="line"><span class="keyword">var</span> exampleany = [<span class="type">Any</span>]()</div><div class="line"></div><div class="line">exampleany.append(<span class="number">12</span>)</div><div class="line">exampleany.append(<span class="number">3.14159</span>)</div><div class="line">exampleany.append(<span class="string">"Any 实例"</span>)</div><div class="line">exampleany.append(<span class="type">Chemistry</span>(physics: <span class="string">"固体物理"</span>, equations: <span class="string">"兆赫"</span>))</div><div class="line"></div><div class="line"><span class="keyword">for</span> item2 <span class="keyword">in</span> exampleany &#123;</div><div class="line">    <span class="keyword">switch</span> item2 &#123;</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someInt <span class="keyword">as</span> <span class="type">Int</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"整型值为 \(someInt)"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someDouble <span class="keyword">as</span> <span class="type">Double</span> <span class="keyword">where</span> someDouble &gt; <span class="number">0</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Pi 值为 \(someDouble)"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someString <span class="keyword">as</span> <span class="type">String</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"\(someString)"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> phy <span class="keyword">as</span> <span class="type">Chemistry</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"主题 '\(phy.physics)', \(phy.equations)"</span>)</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"None"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="AnyObject-实例"><a href="#AnyObject-实例" class="headerlink" title="AnyObject 实例"></a>AnyObject 实例</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subjects</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> physics: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(physics: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.physics = physics</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chemistry</span>: <span class="title">Subjects</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> equations: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(physics: <span class="type">String</span>, equations: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.equations = equations</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maths</span>: <span class="title">Subjects</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> formulae: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(physics: <span class="type">String</span>, formulae: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.formulae = formulae</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(physics: physics)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// [AnyObject] 类型的数组</span></div><div class="line"><span class="keyword">let</span> saprint: [<span class="type">AnyObject</span>] = [</div><div class="line">    <span class="type">Chemistry</span>(physics: <span class="string">"固体物理"</span>, equations: <span class="string">"赫兹"</span>),</div><div class="line">    <span class="type">Maths</span>(physics: <span class="string">"流体动力学"</span>, formulae: <span class="string">"千兆赫"</span>),</div><div class="line">    <span class="type">Chemistry</span>(physics: <span class="string">"热物理学"</span>, equations: <span class="string">"分贝"</span>),</div><div class="line">    <span class="type">Maths</span>(physics: <span class="string">"天体物理学"</span>, formulae: <span class="string">"兆赫"</span>),</div><div class="line">    <span class="type">Maths</span>(physics: <span class="string">"微分方程"</span>, formulae: <span class="string">"余弦级数"</span>)]</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> samplechem = <span class="type">Chemistry</span>(physics: <span class="string">"固体物理"</span>, equations: <span class="string">"赫兹"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例物理学是: \(samplechem.physics)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例方程式: \(samplechem.equations)"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> samplemaths = <span class="type">Maths</span>(physics: <span class="string">"流体动力学"</span>, formulae: <span class="string">"千兆赫"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例物理学是: \(samplemaths.physics)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"实例公式是: \(samplemaths.formulae)"</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> chemCount = <span class="number">0</span></div><div class="line"><span class="keyword">var</span> mathsCount = <span class="number">0</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> saprint &#123;</div><div class="line">    <span class="comment">// 类型转换的条件形式</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> show = item <span class="keyword">as</span>? <span class="type">Chemistry</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"化学主题是: '\(show.physics)', \(show.equations)"</span>)</div><div class="line">        <span class="comment">// 强制形式</span></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> example = item <span class="keyword">as</span>? <span class="type">Maths</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"数学主题是: '\(example.physics)',  \(example.formulae)"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> exampleany = [<span class="type">Any</span>]()</div><div class="line">exampleany.append(<span class="number">12</span>)</div><div class="line">exampleany.append(<span class="number">3.14159</span>)</div><div class="line">exampleany.append(<span class="string">"Any 实例"</span>)</div><div class="line">exampleany.append(<span class="type">Chemistry</span>(physics: <span class="string">"固体物理"</span>, equations: <span class="string">"兆赫"</span>))</div><div class="line"></div><div class="line"><span class="keyword">for</span> item2 <span class="keyword">in</span> exampleany &#123;</div><div class="line">    <span class="keyword">switch</span> item2 &#123;</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someInt <span class="keyword">as</span> <span class="type">Int</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"整型值为 \(someInt)"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someDouble <span class="keyword">as</span> <span class="type">Double</span> <span class="keyword">where</span> someDouble &gt; <span class="number">0</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Pi 值为 \(someDouble)"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someString <span class="keyword">as</span> <span class="type">String</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"\(someString)"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> phy <span class="keyword">as</span> <span class="type">Chemistry</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"主题 '\(phy.physics)', \(phy.equations)"</span>)</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"None"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在一个switch语句的case中使用强制形式的类型转换操作符（as, 而不是 as?）来检查和转换到一个明确的类型。</p>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-自动引用计数]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E8%87%AA%E5%8A%A8%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>Swift 使用自动引用计数（ARC）这一机制来跟踪和管理应用程序的内存<br>通常情况下我们不需要去手动释放内存，因为 ARC 会在类的实例不再被使用时，自动释放其占用的内存。<br>但在有些时候我们还是需要在代码中实现内存管理。</p>
<h2 id="ARC-功能"><a href="#ARC-功能" class="headerlink" title="ARC 功能"></a>ARC 功能</h2><ul>
<li>当每次使用 init() 方法创建一个类的新的实例的时候，ARC 会分配一大块内存用来储存实例的信息。</li>
<li>内存中会包含实例的类型信息，以及这个实例所有相关属性的值。</li>
<li>当实例不再被使用时，ARC 释放实例所占用的内存，并让释放的内存能挪作他用。</li>
<li>为了确保使用中的实例不会被销毁，ARC 会跟踪和计算每一个实例正在被多少属性，常量和变量所引用。</li>
<li>实例赋值给属性、常量或变量，它们都会创建此实例的强引用，只要强引用还在，实例是不允许被销毁的。</li>
</ul>
<a id="more"></a>
<h2 id="类实例之间的循环强引用"><a href="#类实例之间的循环强引用" class="headerlink" title="类实例之间的循环强引用"></a>类实例之间的循环强引用</h2><p>这种情况发生在两个类实例互相保持对方的强引用，并让对方不被销毁。这就是所谓的循环强引用。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name = name &#125;</div><div class="line">    <span class="keyword">var</span> apartment: <span class="type">Apartment</span>?</div><div class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"\(name) 被析构"</span>) &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apartment</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> number: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>(number: <span class="type">Int</span>) &#123; <span class="keyword">self</span>.number = number &#125;</div><div class="line">    <span class="keyword">var</span> tenant: <span class="type">Person</span>?</div><div class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"Apartment #\(number) 被析构"</span>) &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 两个变量都被初始化为nil</span></div><div class="line"><span class="keyword">var</span> runoob: <span class="type">Person</span>?</div><div class="line"><span class="keyword">var</span> number73: <span class="type">Apartment</span>?</div><div class="line"></div><div class="line"><span class="comment">// 赋值</span></div><div class="line">runoob = <span class="type">Person</span>(name: <span class="string">"Runoob"</span>)</div><div class="line">number73 = <span class="type">Apartment</span>(number: <span class="number">73</span>)</div><div class="line"></div><div class="line"><span class="comment">// 意感叹号是用来展开和访问可选变量 runoob 和 number73 中的实例</span></div><div class="line"><span class="comment">// 循环强引用被创建</span></div><div class="line">runoob!.apartment = number73</div><div class="line">number73!.tenant = runoob</div><div class="line"></div><div class="line"><span class="comment">// 断开 runoob 和 number73 变量所持有的强引用时，引用计数并不会降为 0，实例也不会被 ARC 销毁</span></div><div class="line"><span class="comment">// 注意，当你把这两个变量设为nil时，没有任何一个析构函数被调用。</span></div><div class="line"><span class="comment">// 强引用循环阻止了Person和Apartment类实例的销毁，并在你的应用程序中造成了内存泄漏</span></div><div class="line">runoob = <span class="literal">nil</span></div><div class="line">number73 = <span class="literal">nil</span></div></pre></td></tr></table></figure>
<h3 id="解决实例之间的循环强引用"><a href="#解决实例之间的循环强引用" class="headerlink" title="解决实例之间的循环强引用"></a>解决实例之间的循环强引用</h3><p>Swift 提供了两种办法用来解决你在使用类的属性时所遇到的循环强引用问题：</p>
<ul>
<li>弱引用</li>
<li>无主引用</li>
</ul>
<h4 id="弱引用实例"><a href="#弱引用实例" class="headerlink" title="弱引用实例"></a>弱引用实例</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Module</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name = name &#125;</div><div class="line">    <span class="keyword">var</span> sub: <span class="type">SubModule</span>?</div><div class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"\(name) 主模块"</span>) &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubModule</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> number: <span class="type">Int</span></div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(number: <span class="type">Int</span>) &#123; <span class="keyword">self</span>.number = number &#125;</div><div class="line">    </div><div class="line">    <span class="comment">//weak修饰变量</span></div><div class="line">    <span class="keyword">weak</span> <span class="keyword">var</span> topic: <span class="type">Module</span>?</div><div class="line">    </div><div class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"子模块 topic 数为 \(number)"</span>) &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> toc: <span class="type">Module</span>?</div><div class="line"><span class="keyword">var</span> list: <span class="type">SubModule</span>?</div><div class="line">toc = <span class="type">Module</span>(name: <span class="string">"ARC"</span>)</div><div class="line">list = <span class="type">SubModule</span>(number: <span class="number">4</span>)</div><div class="line">toc!.sub = list</div><div class="line">list!.topic = toc</div><div class="line"></div><div class="line">toc = <span class="literal">nil</span></div><div class="line">list = <span class="literal">nil</span></div></pre></td></tr></table></figure>
<h4 id="无主引用实例"><a href="#无主引用实例" class="headerlink" title="无主引用实例"></a>无主引用实例</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> section: <span class="type">Marks</span>?</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"\(name)"</span>) &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Marks</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> marks: <span class="type">Int</span></div><div class="line">    <span class="comment">//unowned修饰变量</span></div><div class="line">    <span class="keyword">unowned</span> <span class="keyword">let</span> stname: <span class="type">Student</span></div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(marks: <span class="type">Int</span>, stname: <span class="type">Student</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.marks = marks</div><div class="line">        <span class="keyword">self</span>.stname = stname</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"学生的分数为 \(marks)"</span>) &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> module: <span class="type">Student</span>?</div><div class="line">module = <span class="type">Student</span>(name: <span class="string">"ARC"</span>)</div><div class="line">module!.section = <span class="type">Marks</span>(marks: <span class="number">98</span>, stname: module!)</div><div class="line">module = <span class="literal">nil</span></div></pre></td></tr></table></figure>
<h3 id="闭包引起的循环强引用"><a href="#闭包引起的循环强引用" class="headerlink" title="闭包引起的循环强引用"></a>闭包引起的循环强引用</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTMLElement</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">let</span> text: <span class="type">String</span>?</div><div class="line">    </div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> asHTML: () -&gt; <span class="type">String</span> = &#123;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> text = <span class="keyword">self</span>.text &#123;</div><div class="line">            <span class="comment">//闭包强引用了self。</span></div><div class="line">            <span class="keyword">return</span> <span class="string">"&lt;\(self.name)&gt;\(text)&lt;/\(self.name)&gt;"</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"&lt;\(self.name) /&gt;"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, text: <span class="type">String</span>? = <span class="literal">nil</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">self</span>.text = text</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"\(name) is being deinitialized"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 创建实例并打印信息</span></div><div class="line"><span class="keyword">var</span> paragraph: <span class="type">HTMLElement</span>? = <span class="type">HTMLElement</span>(name: <span class="string">"p"</span>, text: <span class="string">"hello, world"</span>)</div><div class="line"><span class="built_in">print</span>(paragraph!.asHTML())</div></pre></td></tr></table></figure>
<p>解决方法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTMLElement</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">let</span> text: <span class="type">String</span>?</div><div class="line">    </div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> asHTML: () -&gt; <span class="type">String</span> = &#123;</div><div class="line">        <span class="comment">//这里</span></div><div class="line">        [<span class="keyword">unowned</span> <span class="keyword">self</span>] <span class="keyword">in</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> text = <span class="keyword">self</span>.text &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"&lt;\(self.name)&gt;\(text)&lt;/\(self.name)&gt;"</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"&lt;\(self.name) /&gt;"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, text: <span class="type">String</span>? = <span class="literal">nil</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">self</span>.text = text</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"\(name) 被析构"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//创建并打印HTMLElement实例</span></div><div class="line"><span class="keyword">var</span> paragraph: <span class="type">HTMLElement</span>? = <span class="type">HTMLElement</span>(name: <span class="string">"p"</span>, text: <span class="string">"hello, world"</span>)</div><div class="line"><span class="built_in">print</span>(paragraph!.asHTML())</div><div class="line"></div><div class="line"><span class="comment">// HTMLElement实例将会被销毁，并能看到它的析构函数打印出的消息</span></div><div class="line">paragraph = <span class="literal">nil</span></div><div class="line"></div><div class="line"><span class="comment">//&lt;p&gt;hello, world&lt;/p&gt;</span></div><div class="line"><span class="comment">//p 被析构</span></div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-可选链]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E5%8F%AF%E9%80%89%E9%93%BE/</url>
      <content type="html"><![CDATA[<h2 id="！"><a href="#！" class="headerlink" title="！"></a>！</h2><p>使用感叹号(!)可选链实例</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> residence: <span class="type">Residence</span>?</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Residence</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> numberOfRooms = <span class="number">1</span></div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">let</span> john = <span class="type">Person</span>()</div><div class="line">  </div><div class="line"><span class="comment">//将导致运行时错误</span></div><div class="line"><span class="keyword">let</span> roomCount = john.residence!.numberOfRooms</div><div class="line">  </div><div class="line"><span class="comment">//fatal error: unexpectedly found nil while unwrapping an Optional value</span></div></pre></td></tr></table></figure>
<p>想使用感叹号（!）强制解析获得这个人residence属性numberOfRooms属性值，将会引发运行时错误，因为这时没有可以供解析的residence值。</p>
<a id="more"></a>
<h2 id="？"><a href="#？" class="headerlink" title="？"></a>？</h2><p>使用问号(?)可选链实例</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> residence: <span class="type">Residence</span>?</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Residence</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> numberOfRooms = <span class="number">1</span></div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">let</span> john = <span class="type">Person</span>()</div><div class="line">  </div><div class="line"><span class="comment">// 链接可选residence?属性，如果residence存在则取回numberOfRooms的值</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> roomCount = john.residence?.numberOfRooms &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"John 的房间号为 \(roomCount)。"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"不能查看房间号"</span>)</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">//不能查看房间号</span></div></pre></td></tr></table></figure>
<h2 id="连接多层链接"><a href="#连接多层链接" class="headerlink" title="连接多层链接"></a>连接多层链接</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> residence: <span class="type">Residence</span>?</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">// 定义了一个变量 rooms，它被初始化为一个Room[]类型的空数组</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Residence</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> rooms = [<span class="type">Room</span>]()</div><div class="line">    <span class="keyword">var</span> numberOfRooms: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> rooms.<span class="built_in">count</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">subscript</span>(i: <span class="type">Int</span>) -&gt; <span class="type">Room</span> &#123;</div><div class="line">        <span class="keyword">return</span> rooms[i]</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">printNumberOfRooms</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"房间号为 \(numberOfRooms)"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> address: <span class="type">Address</span>?</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">// Room 定义一个name属性和一个设定room名的初始化器</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Room</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name = name &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">// 模型中的最终类叫做Address</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> buildingName: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> buildingNumber: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> street: <span class="type">String</span>?</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buildingIdentifier</span><span class="params">()</span></span> -&gt; <span class="type">String</span>? &#123;</div><div class="line">        <span class="keyword">if</span> (buildingName != <span class="literal">nil</span>) &#123;</div><div class="line">            <span class="keyword">return</span> buildingName</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (buildingNumber != <span class="literal">nil</span>) &#123;</div><div class="line">            <span class="keyword">return</span> buildingNumber</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">let</span> john = <span class="type">Person</span>()</div><div class="line">  </div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> johnsStreet = john.residence?.address?.street &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"John 的地址为 \(johnsStreet)."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"不能检索地址"</span>)</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">//不能检索地址</span></div></pre></td></tr></table></figure>
<h2 id="对返回可选值的函数进行链接"><a href="#对返回可选值的函数进行链接" class="headerlink" title="对返回可选值的函数进行链接"></a>对返回可选值的函数进行链接</h2><p>我们还可以通过可选链接来调用返回可空值的方法，并且可以继续对可选值进行链接。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> residence: <span class="type">Residence</span>?</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">// 定义了一个变量 rooms，它被初始化为一个Room[]类型的空数组</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Residence</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> rooms = [<span class="type">Room</span>]()</div><div class="line">    <span class="keyword">var</span> numberOfRooms: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> rooms.<span class="built_in">count</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">subscript</span>(i: <span class="type">Int</span>) -&gt; <span class="type">Room</span> &#123;</div><div class="line">        <span class="keyword">return</span> rooms[i]</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">printNumberOfRooms</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"房间号为 \(numberOfRooms)"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> address: <span class="type">Address</span>?</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">// Room 定义一个name属性和一个设定room名的初始化器</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Room</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name = name &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">// 模型中的最终类叫做Address</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> buildingName: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> buildingNumber: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> street: <span class="type">String</span>?</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buildingIdentifier</span><span class="params">()</span></span> -&gt; <span class="type">String</span>? &#123;</div><div class="line">        <span class="keyword">if</span> (buildingName != <span class="literal">nil</span>) &#123;</div><div class="line">            <span class="keyword">return</span> buildingName</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (buildingNumber != <span class="literal">nil</span>) &#123;</div><div class="line">            <span class="keyword">return</span> buildingNumber</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">let</span> john = <span class="type">Person</span>()</div><div class="line">  </div><div class="line"><span class="keyword">if</span> john.residence?.printNumberOfRooms() != <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"指定了房间号)"</span>)</div><div class="line">&#125;  <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"未指定房间号"</span>)</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">//未指定房间号</span></div></pre></td></tr></table></figure>
<p>上例中，对Residence的函数printNumberOfRooms进行链接。</p>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-析构过程]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%9E%90%E6%9E%84%E8%BF%87%E7%A8%8B/</url>
      <content type="html"><![CDATA[<p>在一个类的实例被释放之前，析构函数被立即调用。</p>
<p>用关键字<strong>deinit</strong>来标示析构函数，类似于初始化函数用init来标示。析构函数只适用于类类型。</p>
<ul>
<li>Swift 会自动释放不再需要的实例以释放资源。</li>
<li>Swift 通过自动引用计数（ARC）处理实例的内存管理。</li>
<li>通常当你的实例被释放时不需要手动地去清理。但是，当使用自己的资源时，你可能需要进行一些额外的清理。</li>
</ul>
<a id="more"></a>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> counter = <span class="number">0</span>;  <span class="comment">// 引用计数器</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>() &#123;</div><div class="line">        counter += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        counter -= <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> show: <span class="type">BaseClass</span>? = <span class="type">BaseClass</span>()</div><div class="line"><span class="built_in">print</span>(counter)</div><div class="line">show = <span class="literal">nil</span></div><div class="line"><span class="built_in">print</span>(counter)</div><div class="line"></div><div class="line"><span class="comment">//1</span></div><div class="line"><span class="comment">//0</span></div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-继承]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%BB%A7%E6%89%BF/</url>
      <content type="html"><![CDATA[<p>在 Swift 中，类可以调用和访问超类的方法，属性和下标脚本，并且可以重写它们。</p>
<h2 id="基类"><a href="#基类" class="headerlink" title="基类"></a>基类</h2><p>没有继承其它类的类，称之为基类（Base Class）。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudDetails</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> stname: <span class="type">String</span>!</div><div class="line">    <span class="keyword">var</span> mark1: <span class="type">Int</span>!</div><div class="line">    <span class="keyword">var</span> mark2: <span class="type">Int</span>!</div><div class="line">    <span class="keyword">var</span> mark3: <span class="type">Int</span>!</div><div class="line">    <span class="keyword">init</span>(stname: <span class="type">String</span>, mark1: <span class="type">Int</span>, mark2: <span class="type">Int</span>, mark3: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.stname = stname</div><div class="line">        <span class="keyword">self</span>.mark1 = mark1</div><div class="line">        <span class="keyword">self</span>.mark2 = mark2</div><div class="line">        <span class="keyword">self</span>.mark3 = mark3</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> stname = <span class="string">"swift"</span></div><div class="line"><span class="keyword">let</span> mark1 = <span class="number">98</span></div><div class="line"><span class="keyword">let</span> mark2 = <span class="number">89</span></div><div class="line"><span class="keyword">let</span> mark3 = <span class="number">76</span></div><div class="line">  </div><div class="line"><span class="keyword">let</span> sds = <span class="type">StudDetails</span>(stname:stname, mark1:mark1, mark2:mark2, mark3:mark3);</div><div class="line">  </div><div class="line"><span class="built_in">print</span>(sds.stname)</div><div class="line"><span class="built_in">print</span>(sds.mark1)</div><div class="line"><span class="built_in">print</span>(sds.mark2)</div><div class="line"><span class="built_in">print</span>(sds.mark3)</div><div class="line"><span class="comment">//swift</span></div><div class="line"><span class="comment">//98</span></div><div class="line"><span class="comment">//89</span></div><div class="line"><span class="comment">//76</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="子类"><a href="#子类" class="headerlink" title="子类"></a>子类</h2><p>子类指的是在一个已有类的基础上创建一个新的类。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>: <span class="title">SomeSuperclass</span> </span>&#123;</div><div class="line">    <span class="comment">// 类的定义</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudDetails</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">var</span> mark1: <span class="type">Int</span>;</div><div class="line">    <span class="keyword">var</span> mark2: <span class="type">Int</span>;</div><div class="line">  </div><div class="line">    <span class="keyword">init</span>(stm1:<span class="type">Int</span>, results stm2:<span class="type">Int</span>)</div><div class="line">    &#123;</div><div class="line">        mark1 = stm1;</div><div class="line">        mark2 = stm2;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Mark1:\(self.mark1), Mark2:\(self.mark2)"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tom</span> : <span class="title">StudDetails</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">init</span>()</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(stm1: <span class="number">93</span>, results: <span class="number">89</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">let</span> tom = <span class="type">Tom</span>()</div><div class="line">tom.show()</div><div class="line">  </div><div class="line"><span class="comment">//Mark1:93, Mark2:89</span></div></pre></td></tr></table></figure>
<h2 id="重写"><a href="#重写" class="headerlink" title="重写"></a>重写</h2><p>子类可以通过继承来的实例方法，类方法，实例属性，或下标脚本来实现自己的定制功能，我们把这种行为叫重写（overriding）。</p>
<table>
<thead>
<tr>
<th style="text-align:left">重写</th>
<th style="text-align:left">访问方法，属性，下标脚本</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">方法</td>
<td style="text-align:left">super.somemethod()</td>
</tr>
<tr>
<td style="text-align:left">属性</td>
<td style="text-align:left">super.someProperty()</td>
</tr>
<tr>
<td style="text-align:left">下标脚本</td>
<td style="text-align:left">super[someIndex]</td>
</tr>
</tbody>
</table>
<h3 id="重写方法和属性"><a href="#重写方法和属性" class="headerlink" title="重写方法和属性"></a>重写方法和属性</h3><h4 id="重写方法"><a href="#重写方法" class="headerlink" title="重写方法"></a>重写方法</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperClass</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"这是超类 SuperClass"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass</span>: <span class="title">SuperClass</span>  </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">show</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"这是子类 SubClass"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">let</span> superClass = <span class="type">SuperClass</span>()</div><div class="line">superClass.show()</div><div class="line">  </div><div class="line"><span class="keyword">let</span> subClass = <span class="type">SubClass</span>()</div><div class="line">subClass.show()</div><div class="line">  </div><div class="line"><span class="comment">//这是超类 SuperClass</span></div><div class="line"><span class="comment">//这是子类 SubClass</span></div></pre></td></tr></table></figure>
<h4 id="重写属性"><a href="#重写属性" class="headerlink" title="重写属性"></a>重写属性</h4><p>注意点：</p>
<ul>
<li>如果你在重写属性中提供了 setter，那么你也一定要提供 getter。</li>
<li>如果你不想在重写版本中的 getter 里修改继承来的属性值，你可以直接通过super.someProperty来返回继承来的值，其中someProperty是你要重写的属性的名字。</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> radius = <span class="number">12.5</span></div><div class="line">    <span class="keyword">var</span> area: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"矩形半径 \(radius) "</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">// 继承超类 Circle</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>: <span class="title">Circle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">print</span> = <span class="number">7</span></div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> area: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.area + <span class="string">" ，但现在被重写为 \(print)"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">let</span> rect = <span class="type">Rectangle</span>()</div><div class="line">rect.radius = <span class="number">25.0</span></div><div class="line">rect.<span class="built_in">print</span> = <span class="number">3</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"Radius \(rect.area)"</span>)</div><div class="line">  </div><div class="line"><span class="comment">//Radius 矩形半径 25.0  ，但现在被重写为 3</span></div></pre></td></tr></table></figure>
<h3 id="写属性观察器"><a href="#写属性观察器" class="headerlink" title="写属性观察器"></a>写属性观察器</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> radius = <span class="number">12.5</span></div><div class="line">    <span class="keyword">var</span> area: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"矩形半径为 \(radius) "</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>: <span class="title">Circle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">print</span> = <span class="number">7</span></div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> area: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.area + <span class="string">" ，但现在被重写为 \(print)"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line">  </div><div class="line"><span class="keyword">let</span> rect = <span class="type">Rectangle</span>()</div><div class="line">rect.radius = <span class="number">25.0</span></div><div class="line">rect.<span class="built_in">print</span> = <span class="number">3</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"半径: \(rect.area)"</span>)</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span>: <span class="title">Rectangle</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> radius: <span class="type">Double</span> &#123;</div><div class="line">        <span class="comment">//重写didSet</span></div><div class="line">        <span class="keyword">didSet</span> &#123;</div><div class="line">            <span class="built_in">print</span> = <span class="type">Int</span>(radius/<span class="number">5.0</span>)+<span class="number">1</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line">  </div><div class="line"><span class="keyword">let</span> sq = <span class="type">Square</span>()</div><div class="line">sq.radius = <span class="number">100.0</span></div><div class="line">  </div><div class="line"><span class="built_in">print</span>(<span class="string">"半径: \(sq.area)"</span>)</div></pre></td></tr></table></figure>
<h3 id="防止重写"><a href="#防止重写" class="headerlink" title="防止重写"></a>防止重写</h3><p>我们可以使用 final 关键字防止它们被重写</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">var</span> radius = <span class="number">12.5</span></div><div class="line">    <span class="keyword">var</span> area: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"矩形半径为 \(radius) "</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-下标脚本]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E4%B8%8B%E6%A0%87%E8%84%9A%E6%9C%AC/</url>
      <content type="html"><![CDATA[<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>定义下标脚本使用subscript关键字，显式声明入参（一个或多个）和返回类型。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">get</span> &#123;</div><div class="line">        <span class="comment">// 用于下标脚本值的声明</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">set</span>(newValue) &#123;</div><div class="line">        <span class="comment">// 执行赋值操作</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">return</span> index*<span class="number">4</span>   <span class="comment">// 用于下标脚本值的声明</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">subexample</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> decrementer: <span class="type">Int</span></div><div class="line">    <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> decrementer / index</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> division = subexample(decrementer: <span class="number">100</span>)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"100 除以 9 等于 \(division[9])"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"100 除以 2 等于 \(division[2])"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"100 除以 3 等于 \(division[3])"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"100 除以 5 等于 \(division[5])"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"100 除以 7 等于 \(division[7])"</span>)</div></pre></td></tr></table></figure>
<h2 id="实例2"><a href="#实例2" class="headerlink" title="实例2"></a>实例2</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">daysofaweek</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> days = [<span class="string">"Sunday"</span>, <span class="string">"Monday"</span>, <span class="string">"Tuesday"</span>, <span class="string">"Wednesday"</span>,</div><div class="line">        <span class="string">"Thursday"</span>, <span class="string">"Friday"</span>, <span class="string">"saturday"</span>]</div><div class="line">    <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="keyword">return</span> days[index]   <span class="comment">// 声明下标脚本的值</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span>(newValue) &#123;</div><div class="line">            <span class="keyword">self</span>.days[index] = newValue   <span class="comment">// 执行赋值操作</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> p = daysofaweek()</div><div class="line"></div><div class="line"><span class="built_in">print</span>(p[<span class="number">0</span>])</div><div class="line"><span class="built_in">print</span>(p[<span class="number">1</span>])</div><div class="line"><span class="built_in">print</span>(p[<span class="number">2</span>])</div><div class="line"><span class="built_in">print</span>(p[<span class="number">3</span>])</div></pre></td></tr></table></figure>
<h2 id="下标脚本选项"><a href="#下标脚本选项" class="headerlink" title="下标脚本选项"></a>下标脚本选项</h2><ul>
<li>下标脚本允许任意数量的入参索引，并且每个入参类型也没有限制。</li>
<li>下标脚本的返回值也可以是任何类型。</li>
<li>下标脚本可以使用变量参数和可变参数。</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Matrix</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> rows: <span class="type">Int</span>, columns: <span class="type">Int</span></div><div class="line">    <span class="keyword">var</span> <span class="built_in">print</span>: [<span class="type">Double</span>]</div><div class="line">    <span class="keyword">init</span>(rows: <span class="type">Int</span>, columns: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.rows = rows</div><div class="line">        <span class="keyword">self</span>.columns = columns</div><div class="line">        <span class="built_in">print</span> = <span class="type">Array</span>(repeating: <span class="number">0.0</span>, <span class="built_in">count</span>: rows * columns)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">subscript</span>(row: <span class="type">Int</span>, column: <span class="type">Int</span>) -&gt; <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">print</span>[(row * columns) + column]</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            <span class="built_in">print</span>[(row * columns) + column] = newValue</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 创建了一个新的 3 行 3 列的Matrix实例</span></div><div class="line"><span class="keyword">var</span> mat = <span class="type">Matrix</span>(rows: <span class="number">3</span>, columns: <span class="number">3</span>)</div><div class="line"></div><div class="line"><span class="comment">// 通过下标脚本设置值</span></div><div class="line">mat[<span class="number">0</span>,<span class="number">0</span>] = <span class="number">1.0</span></div><div class="line">mat[<span class="number">0</span>,<span class="number">1</span>] = <span class="number">2.0</span></div><div class="line">mat[<span class="number">1</span>,<span class="number">0</span>] = <span class="number">3.0</span></div><div class="line">mat[<span class="number">1</span>,<span class="number">1</span>] = <span class="number">5.0</span></div><div class="line"></div><div class="line"><span class="comment">// 通过下标脚本获取值</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"\(mat[0,0])"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"\(mat[0,1])"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"\(mat[1,0])"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"\(mat[1,1])"</span>)</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-方法]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<h2 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h2><p>在 Swift 语言中，实例方法是属于某个特定类、结构体或者枚举类型实例的方法。<br>实例方法提供以下方法：</p>
<ul>
<li>可以访问和修改实例属性</li>
<li>提供与实例目的相关的功能</li>
</ul>
<p>实例方法要写在它所属的类型的前后大括号({})之间。<br>实例方法能够隐式访问它所属类型的所有的其他实例方法和属性。<br>实例方法只能被它所属的类的某个特定实例调用。<br>实例方法不能脱离于现存的实例而被调用。</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">0</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> += <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">incrementBy</span><span class="params">(amount: Int)</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> += amount</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">reset</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> = <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 初始计数值是0</span></div><div class="line"><span class="keyword">let</span> counter = <span class="type">Counter</span>()</div><div class="line"></div><div class="line"><span class="comment">// 计数值现在是1</span></div><div class="line">counter.increment()</div><div class="line"></div><div class="line"><span class="comment">// 计数值现在是6</span></div><div class="line">counter.incrementBy(amount: <span class="number">5</span>)</div><div class="line"><span class="built_in">print</span>(counter.<span class="built_in">count</span>)</div><div class="line"></div><div class="line"><span class="comment">// 计数值现在是0</span></div><div class="line">counter.reset()</div><div class="line"><span class="built_in">print</span>(counter.<span class="built_in">count</span>)</div></pre></td></tr></table></figure>
<h2 id="方法的局部参数名称和外部参数名称"><a href="#方法的局部参数名称和外部参数名称" class="headerlink" title="方法的局部参数名称和外部参数名称"></a>方法的局部参数名称和外部参数名称</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">multiplication</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">Int</span> = <span class="number">0</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">incrementBy</span><span class="params">(first no1: Int, no2: Int)</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> = no1 * no2</div><div class="line">        <span class="built_in">print</span>(<span class="built_in">count</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> counter = multiplication()</div><div class="line">counter.incrementBy(first: <span class="number">800</span>, no2: <span class="number">3</span>)</div><div class="line">counter.incrementBy(first: <span class="number">100</span>, no2: <span class="number">5</span>)</div><div class="line">counter.incrementBy(first: <span class="number">15000</span>, no2: <span class="number">3</span>)</div><div class="line"><span class="comment">//我们呢也可以使用下划线（_）设置第二个及后续的参数不提供一个外部名称。</span></div></pre></td></tr></table></figure>
<h2 id="self-属性"><a href="#self-属性" class="headerlink" title="self 属性"></a>self 属性</h2><p>类型的每一个实例都有一个隐含属性叫做self，self 完全等同于该实例本身。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">calculations</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> a: <span class="type">Int</span></div><div class="line">    <span class="keyword">let</span> b: <span class="type">Int</span></div><div class="line">    <span class="keyword">let</span> res: <span class="type">Int</span></div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(a: <span class="type">Int</span>, b: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.a = a</div><div class="line">        <span class="keyword">self</span>.b = b</div><div class="line">        res = a + b</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Self 内: \(res)"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tot</span><span class="params">(<span class="built_in">c</span>: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> res - <span class="built_in">c</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">result</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"结果为: \(tot(c: 20))"</span>)</div><div class="line">        <span class="built_in">print</span>(<span class="string">"结果为: \(tot(c: 50))"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> pri = calculations(a: <span class="number">600</span>, b: <span class="number">300</span>)</div><div class="line"><span class="keyword">let</span> sum = calculations(a: <span class="number">1200</span>, b: <span class="number">300</span>)</div><div class="line"></div><div class="line">pri.result()</div><div class="line">sum.result()</div><div class="line"><span class="comment">//Self 内: 900</span></div><div class="line"><span class="comment">//Self 内: 1500</span></div><div class="line"><span class="comment">//结果为: 880</span></div><div class="line"><span class="comment">//结果为: 850</span></div><div class="line"><span class="comment">//结果为: 1480</span></div><div class="line"><span class="comment">//结果为: 1450</span></div></pre></td></tr></table></figure>
<h2 id="在实例方法中修改值类型"><a href="#在实例方法中修改值类型" class="headerlink" title="在实例方法中修改值类型"></a>在实例方法中修改值类型</h2><p>Swift 语言中结构体和枚举是值类型。一般情况下，值类型的属性不能在它的实例方法中被修改。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">area</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> length = <span class="number">1</span></div><div class="line">    <span class="keyword">var</span> breadth = <span class="number">1</span></div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">area</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> length * breadth</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">//使用mutating方法可以在实例中改变值类型的属性</span></div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">scaleBy</span><span class="params">(res: Int)</span></span> &#123;</div><div class="line">        length *= res</div><div class="line">        breadth *= res</div><div class="line">        </div><div class="line">        <span class="built_in">print</span>(length)</div><div class="line">        <span class="built_in">print</span>(breadth)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> val = area(length: <span class="number">3</span>, breadth: <span class="number">5</span>)</div><div class="line">val.scaleBy(res: <span class="number">3</span>)</div><div class="line">val.scaleBy(res: <span class="number">30</span>)</div><div class="line">val.scaleBy(res: <span class="number">300</span>)</div></pre></td></tr></table></figure>
<h2 id="类型方法"><a href="#类型方法" class="headerlink" title="类型方法"></a>类型方法</h2><p>类型本身调用的方法，这种方法就叫做类型方法。</p>
<p>声明结构体和枚举的类型方法，在方法的func关键字之前加上关键字static。类可能会用关键字class来允许子类重写父类的实现方法。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">mport <span class="type">Cocoa</span></div><div class="line"></div><div class="line"><span class="comment">//类</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Math</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">//类型方法</span></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">abs</span>(<span class="title">number</span>: <span class="title">Int</span>) -&gt; <span class="title">Int</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> number &lt; <span class="number">0</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> (-number)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> number</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//结构体</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">absno</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">//类型方法</span></div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">abs</span><span class="params">(number: Int)</span></span> -&gt; <span class="type">Int</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> number &lt; <span class="number">0</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> (-number)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> number</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> no = <span class="type">Math</span>.<span class="built_in">abs</span>(number: -<span class="number">35</span>)</div><div class="line"><span class="keyword">let</span> num = absno.<span class="built_in">abs</span>(number: -<span class="number">5</span>)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(no)</div><div class="line"><span class="built_in">print</span>(num)</div><div class="line"><span class="comment">//35</span></div><div class="line"><span class="comment">//5</span></div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-属性]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E5%B1%9E%E6%80%A7/</url>
      <content type="html"><![CDATA[<h2 id="存储属性"><a href="#存储属性" class="headerlink" title="存储属性"></a>存储属性</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Number</span></span></div><div class="line">&#123;</div><div class="line">   <span class="keyword">var</span> digits: <span class="type">Int</span></div><div class="line">   <span class="keyword">let</span> pi = <span class="number">3.1415</span></div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">var</span> n = <span class="type">Number</span>(digits: <span class="number">12345</span>)</div><div class="line">n.digits = <span class="number">67</span></div><div class="line">  </div><div class="line"><span class="built_in">print</span>(<span class="string">"\(n.digits)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"\(n.pi)"</span>)</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>存储属性可以是<strong>变量存储属性</strong>（用关键字var定义），也可以是<strong>常量存储属性</strong>（用关键字let定义）。</p>
<ul>
<li>可以在定义存储属性的时候指定默认值</li>
<li>也可以在构造过程中设置或修改存储属性的值，甚至修改常量存储属性的值</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Number</span></span></div><div class="line">&#123;</div><div class="line">   <span class="keyword">var</span> digits: <span class="type">Int</span></div><div class="line">   <span class="keyword">let</span> pi = <span class="number">3.1415</span></div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">var</span> n = <span class="type">Number</span>(digits: <span class="number">12345</span>)</div><div class="line">n.digits = <span class="number">67</span></div><div class="line">  </div><div class="line"><span class="built_in">print</span>(<span class="string">"\(n.digits)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"\(n.pi)"</span>)</div><div class="line"><span class="comment">//67</span></div><div class="line"><span class="comment">//3.1415</span></div></pre></td></tr></table></figure>
<p>//构造方法给常量赋值<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Number</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">var</span> digits: <span class="type">Int</span></div><div class="line">    <span class="keyword">let</span> numbers: <span class="type">Double</span></div><div class="line">    <span class="keyword">init</span>(digits: <span class="type">Int</span>, numbers : <span class="type">Double</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.digits = digits;</div><div class="line">        <span class="keyword">self</span>.numbers = numbers;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">var</span> n = <span class="type">Number</span>(digits: <span class="number">12345</span>, numbers: <span class="number">3.14</span>)</div><div class="line">n.digits = <span class="number">67</span></div><div class="line">  </div><div class="line"><span class="built_in">print</span>(<span class="string">"\(n.digits)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"\(n.numbers)"</span>)</div><div class="line"><span class="comment">//67</span></div><div class="line"><span class="comment">//3.14</span></div></pre></td></tr></table></figure></p>
<h3 id="延迟存储属性"><a href="#延迟存储属性" class="headerlink" title="延迟存储属性"></a>延迟存储属性</h3><p>延迟存储属性是指当第一次被调用的时候才会计算其初始值的属性。</p>
<p>延迟存储属性一般用于：</p>
<ul>
<li>延迟对象的创建。</li>
<li>当属性的值依赖于其他未知类</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">sample</span> </span>&#123;</div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> no = number() <span class="comment">// `var` 关键字是必须的</span></div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">number</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name = <span class="string">"Runoob Swift 教程"</span></div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">var</span> firstsample = sample()</div><div class="line"><span class="built_in">print</span>(firstsample.no.name)</div><div class="line"><span class="comment">//Runoob Swift 教程</span></div></pre></td></tr></table></figure>
<h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><p>计算属性不直接存储值，而是提供一个 getter 来获取值，一个可选的 setter 来间接设置其他属性或变量的值。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">sample</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> no1 = <span class="number">0.0</span>, no2 = <span class="number">0.0</span></div><div class="line">    <span class="keyword">var</span> length = <span class="number">300.0</span>, breadth = <span class="number">150.0</span></div><div class="line">    </div><div class="line">    <span class="keyword">var</span> middle: (<span class="type">Double</span>, <span class="type">Double</span>) &#123;</div><div class="line">        <span class="keyword">get</span>&#123;</div><div class="line">            <span class="keyword">return</span> (length / <span class="number">2</span>, breadth / <span class="number">2</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span>(axis)&#123;</div><div class="line">            no1 = axis.<span class="number">0</span> - (length / <span class="number">2</span>)</div><div class="line">            no2 = axis.<span class="number">1</span> - (breadth / <span class="number">2</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">var</span> result = sample()</div><div class="line"><span class="built_in">print</span>(result.middle)</div><div class="line">result.middle = (<span class="number">0.0</span>, <span class="number">10.0</span>)</div><div class="line">  </div><div class="line"><span class="built_in">print</span>(result.no1)</div><div class="line"><span class="built_in">print</span>(result.no2)</div><div class="line"><span class="comment">//(150.0, 75.0)</span></div><div class="line"><span class="comment">//-150.0</span></div><div class="line"><span class="comment">//-65.0</span></div></pre></td></tr></table></figure></p>
<h3 id="只读计算属性"><a href="#只读计算属性" class="headerlink" title="只读计算属性"></a>只读计算属性</h3><p>只有 getter 没有 setter 的计算属性就是只读计算属性。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">film</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> head = <span class="string">""</span></div><div class="line">    <span class="keyword">var</span> duration = <span class="number">0.0</span></div><div class="line">    <span class="keyword">var</span> metaInfo: [<span class="type">String</span>:<span class="type">String</span>] &#123;</div><div class="line">        <span class="keyword">return</span> [</div><div class="line">            <span class="string">"head"</span>: <span class="keyword">self</span>.head,</div><div class="line">            <span class="string">"duration"</span>:<span class="string">"\(self.duration)"</span></div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">var</span> movie = film()</div><div class="line">movie.head = <span class="string">"Swift 属性"</span></div><div class="line">movie.duration = <span class="number">3.09</span></div><div class="line">  </div><div class="line"><span class="built_in">print</span>(movie.metaInfo[<span class="string">"head"</span>]!)</div><div class="line"><span class="built_in">print</span>(movie.metaInfo[<span class="string">"duration"</span>]!)</div><div class="line">  </div><div class="line"><span class="comment">//Swift 属性</span></div><div class="line"><span class="comment">//3.09</span></div></pre></td></tr></table></figure></p>
<h2 id="属性观察器"><a href="#属性观察器" class="headerlink" title="属性观察器"></a>属性观察器</h2><p>属性观察器监控和响应属性值的变化，每次属性被设置值的时候都会调用属性观察器，甚至新的值和现在的值相同的时候也不例外。</p>
<p>可以为属性添加如下的一个或全部观察器：</p>
<ul>
<li>willSet在设置新的值之前调用</li>
<li>didSet在新的值被设置之后立即调用</li>
<li>willSet和didSet观察器在属性初始化过程中不会被调用</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Samplepgm</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> counter: <span class="type">Int</span> = <span class="number">0</span>&#123;</div><div class="line">        <span class="keyword">willSet</span>(newTotal)&#123;</div><div class="line">            <span class="built_in">print</span>(<span class="string">"计数器: \(newTotal)"</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">didSet</span>&#123;</div><div class="line">            <span class="keyword">if</span> counter &gt; oldValue &#123;</div><div class="line">                <span class="built_in">print</span>(<span class="string">"新增数 \(counter - oldValue)"</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> <span class="type">NewCounter</span> = <span class="type">Samplepgm</span>()</div><div class="line"><span class="type">NewCounter</span>.counter = <span class="number">100</span></div><div class="line"><span class="type">NewCounter</span>.counter = <span class="number">800</span></div><div class="line"><span class="comment">//计数器: 100</span></div><div class="line"><span class="comment">//新增数 100</span></div><div class="line"><span class="comment">//计数器: 800</span></div><div class="line"><span class="comment">//新增数 700</span></div></pre></td></tr></table></figure>
<h2 id="类型属性"><a href="#类型属性" class="headerlink" title="类型属性"></a>类型属性</h2><p>类型属性是作为类型定义的一部分写在类型最外层的花括号（{}）内。</p>
<p>使用关键字 <strong>static</strong> 来定义值类型的类型属性，关键字 <strong>class</strong> 来为类定义类型属性。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Structname</span> </span>&#123;</div><div class="line">   <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty = <span class="string">" "</span></div><div class="line">   <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty: <span class="type">Int</span> &#123;</div><div class="line">      <span class="comment">// 这里返回一个 Int 值</span></div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Enumname</span> </span>&#123;</div><div class="line">   <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty = <span class="string">" "</span></div><div class="line">   <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty: <span class="type">Int</span> &#123;</div><div class="line">      <span class="comment">// 这里返回一个 Int 值</span></div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Classname</span> </span>&#123;</div><div class="line">   <span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">computedTypeProperty</span>: <span class="title">Int</span> </span>&#123;</div><div class="line">      <span class="comment">// 这里返回一个 Int 值</span></div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="获取和设置类型属性的值"><a href="#获取和设置类型属性的值" class="headerlink" title="获取和设置类型属性的值"></a>获取和设置类型属性的值</h3><p>类型属性是通过类型本身来获取和设置，而不是通过实例。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">StudMarks</span> </span>&#123;</div><div class="line">   <span class="keyword">static</span> <span class="keyword">let</span> markCount = <span class="number">97</span></div><div class="line">   <span class="keyword">static</span> <span class="keyword">var</span> totalCount = <span class="number">0</span></div><div class="line">   <span class="keyword">var</span> <span class="type">InternalMarks</span>: <span class="type">Int</span> = <span class="number">0</span> &#123;</div><div class="line">      <span class="keyword">didSet</span> &#123;</div><div class="line">         <span class="keyword">if</span> <span class="type">InternalMarks</span> &gt; <span class="type">StudMarks</span>.markCount &#123;</div><div class="line">            <span class="type">InternalMarks</span> = <span class="type">StudMarks</span>.markCount</div><div class="line">         &#125;</div><div class="line">         <span class="keyword">if</span> <span class="type">InternalMarks</span> &gt; <span class="type">StudMarks</span>.totalCount &#123;</div><div class="line">            <span class="comment">//类型属性赋值</span></div><div class="line">            <span class="type">StudMarks</span>.totalCount = <span class="type">InternalMarks</span></div><div class="line">         &#125;</div><div class="line">      &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">var</span> stud1Mark1 = <span class="type">StudMarks</span>()</div><div class="line"><span class="keyword">var</span> stud1Mark2 = <span class="type">StudMarks</span>()</div><div class="line">  </div><div class="line">stud1Mark1.<span class="type">InternalMarks</span> = <span class="number">98</span></div><div class="line"><span class="built_in">print</span>(stud1Mark1.<span class="type">InternalMarks</span>) </div><div class="line">  </div><div class="line">stud1Mark2.<span class="type">InternalMarks</span> = <span class="number">87</span></div><div class="line"><span class="built_in">print</span>(stud1Mark2.<span class="type">InternalMarks</span>)</div><div class="line"><span class="comment">//97</span></div><div class="line"><span class="comment">//87</span></div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-类]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%B1%BB/</url>
      <content type="html"><![CDATA[<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="类定义"><a href="#类定义" class="headerlink" title="类定义"></a>类定义</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">student</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> studname: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> mark: <span class="type">Int</span></div><div class="line">    <span class="keyword">var</span> mark2: <span class="type">Int</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="实例化类"><a href="#实例化类" class="headerlink" title="实例化类"></a>实例化类</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> studrecord = student()</div></pre></td></tr></table></figure>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MarksStruct</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> mark: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>(mark: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.mark = mark</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">studentMarks</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> mark = <span class="number">300</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> marks = studentMarks()</div><div class="line"><span class="built_in">print</span>(<span class="string">"成绩为 \(marks.mark)"</span>)</div><div class="line"><span class="comment">//成绩为 300</span></div></pre></td></tr></table></figure>
<h2 id="作为引用类型访问类属性"><a href="#作为引用类型访问类属性" class="headerlink" title="作为引用类型访问类属性"></a>作为引用类型访问类属性</h2><p>类的属性可以通过 . 来访问。格式为：实例化类名.属性名：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MarksStruct</span> </span>&#123;</div><div class="line">   <span class="keyword">var</span> mark: <span class="type">Int</span></div><div class="line">   <span class="keyword">init</span>(mark: <span class="type">Int</span>) &#123;</div><div class="line">      <span class="keyword">self</span>.mark = mark</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">studentMarks</span> </span>&#123;</div><div class="line">   <span class="keyword">var</span> mark1 = <span class="number">300</span></div><div class="line">   <span class="keyword">var</span> mark2 = <span class="number">400</span></div><div class="line">   <span class="keyword">var</span> mark3 = <span class="number">900</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> marks = studentMarks()</div><div class="line"><span class="built_in">print</span>(<span class="string">"Mark1 is \(marks.mark1)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"Mark2 is \(marks.mark2)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"Mark3 is \(marks.mark3)"</span>)</div><div class="line"><span class="comment">//Mark1 is 300</span></div><div class="line"><span class="comment">//Mark2 is 400</span></div><div class="line"><span class="comment">//Mark3 is 900</span></div></pre></td></tr></table></figure>
<h2 id="恒等运算符"><a href="#恒等运算符" class="headerlink" title="恒等运算符"></a>恒等运算符</h2><table>
<thead>
<tr>
<th style="text-align:left">恒等运算符</th>
<th style="text-align:left">不恒等运算符</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">运算符为：===</td>
<td style="text-align:left">运算符为：!==</td>
</tr>
<tr>
<td style="text-align:left">如果两个常量或者变量引用同一个类实例则返回 true</td>
<td style="text-align:left">如果两个常量或者变量引用不同一个类实例则返回 true</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleClass</span>: <span class="title">Equatable</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> myProperty: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(s: <span class="type">String</span>) &#123;</div><div class="line">        myProperty = s</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> ==<span class="params">(lhs: SampleClass, rhs: SampleClass)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">return</span> lhs.myProperty == rhs.myProperty</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> spClass1 = <span class="type">SampleClass</span>(s: <span class="string">"Hello"</span>)</div><div class="line"><span class="keyword">let</span> spClass2 = <span class="type">SampleClass</span>(s: <span class="string">"Hello"</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> spClass1 === spClass2 &#123;<span class="comment">// false</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"引用相同的类实例 \(spClass1)"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> spClass1 !== spClass2 &#123;<span class="comment">// true</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"引用不相同的类实例 \(spClass2)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">//引用不相同的类实例 SampleClass</span></div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-结构体]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E7%BB%93%E6%9E%84%E4%BD%93/</url>
      <content type="html"><![CDATA[<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">nameStruct</span> </span>&#123; </div><div class="line">   <span class="type">Definition</span> <span class="number">1</span></div><div class="line">   <span class="type">Definition</span> <span class="number">2</span></div><div class="line">   ……</div><div class="line">   <span class="type">Definition</span> <span class="type">N</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MarkStruct</span></span>&#123;</div><div class="line">   <span class="keyword">var</span> mark1: <span class="type">Int</span></div><div class="line">   <span class="keyword">var</span> mark2: <span class="type">Int</span></div><div class="line">   <span class="keyword">var</span> mark3: <span class="type">Int</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们可以通过结构体名来访问结构体成员。<br>结构体实例化使用 let 关键字：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">studentMarks</span> </span>&#123;</div><div class="line">   <span class="keyword">var</span> mark1 = <span class="number">100</span></div><div class="line">   <span class="keyword">var</span> mark2 = <span class="number">78</span></div><div class="line">   <span class="keyword">var</span> mark3 = <span class="number">98</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> marks = studentMarks()</div><div class="line"><span class="built_in">print</span>(<span class="string">"Mark1 是 \(marks.mark1)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"Mark2 是 \(marks.mark2)"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"Mark3 是 \(marks.mark3)"</span>)</div><div class="line"><span class="comment">//Mark1 是 100</span></div><div class="line"><span class="comment">//Mark2 是 78</span></div><div class="line"><span class="comment">//Mark3 是 98</span></div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MarksStruct</span> </span>&#123;</div><div class="line">   <span class="keyword">var</span> mark: <span class="type">Int</span></div><div class="line"></div><div class="line">   <span class="keyword">init</span>(mark: <span class="type">Int</span>) &#123;</div><div class="line">      <span class="keyword">self</span>.mark = mark</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> aStruct = <span class="type">MarksStruct</span>(mark: <span class="number">98</span>)</div><div class="line"><span class="keyword">var</span> bStruct = aStruct <span class="comment">// aStruct 和 bStruct 是使用相同值的结构体！</span></div><div class="line">bStruct.mark = <span class="number">97</span></div><div class="line"><span class="built_in">print</span>(aStruct.mark) <span class="comment">// 98</span></div><div class="line"><span class="built_in">print</span>(bStruct.mark) <span class="comment">// 97</span></div></pre></td></tr></table></figure>
<h2 id="结构体应用"><a href="#结构体应用" class="headerlink" title="结构体应用"></a>结构体应用</h2><p>当符合一条或多条以下条件时，请考虑构建结构体：</p>
<ul>
<li>结构体的主要目的是用来封装少量相关简单数据值。</li>
<li>有理由预计一个结构体实例在赋值或传递时，封装的数据将会被拷贝而不是被引用。</li>
<li>任何在结构体中储存的值类型属性，也将会被拷贝，而不是被引用。</li>
<li>结构体不需要去继承另一个已存在类型的属性或者行为。</li>
</ul>
<p>结构体实例是通过值传递而不是通过引用传递。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">markStruct</span></span>&#123;</div><div class="line">    <span class="keyword">var</span> mark1: <span class="type">Int</span></div><div class="line">    <span class="keyword">var</span> mark2: <span class="type">Int</span></div><div class="line">    <span class="keyword">var</span> mark3: <span class="type">Int</span></div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(mark1: <span class="type">Int</span>, mark2: <span class="type">Int</span>, mark3: <span class="type">Int</span>)&#123;</div><div class="line">        <span class="keyword">self</span>.mark1 = mark1</div><div class="line">        <span class="keyword">self</span>.mark2 = mark2</div><div class="line">        <span class="keyword">self</span>.mark3 = mark3</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"优异成绩:"</span>)</div><div class="line"><span class="keyword">var</span> marks = markStruct(mark1: <span class="number">98</span>, mark2: <span class="number">96</span>, mark3:<span class="number">100</span>)</div><div class="line"><span class="built_in">print</span>(marks.mark1)</div><div class="line"><span class="built_in">print</span>(marks.mark2)</div><div class="line"><span class="built_in">print</span>(marks.mark3)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"糟糕成绩:"</span>)</div><div class="line"><span class="keyword">var</span> fail = markStruct(mark1: <span class="number">34</span>, mark2: <span class="number">42</span>, mark3: <span class="number">13</span>)</div><div class="line"><span class="built_in">print</span>(fail.mark1)</div><div class="line"><span class="built_in">print</span>(fail.mark2)</div><div class="line"><span class="built_in">print</span>(fail.mark3)</div><div class="line"><span class="comment">//优异成绩:</span></div><div class="line"><span class="comment">//98</span></div><div class="line"><span class="comment">//96</span></div><div class="line"><span class="comment">//100</span></div><div class="line"><span class="comment">//糟糕成绩:</span></div><div class="line"><span class="comment">//34</span></div><div class="line"><span class="comment">//42</span></div><div class="line"><span class="comment">//13</span></div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-枚举]]></title>
      <url>/2017/06/06/Swift%E7%AC%94%E8%AE%B0-%E6%9E%9A%E4%B8%BE/</url>
      <content type="html"><![CDATA[<p>Swift 的枚举类似于 Objective C 和 C 的结构，枚举的功能为:</p>
<ul>
<li>它声明在类中，可以通过实例化类来访问它的值。</li>
<li>枚举也可以定义构造函数（initializers）来提供一个初始成员值；可以在原始的实现基础上扩展它们的功能。</li>
<li>可以遵守协议（protocols）来提供标准的功能。</li>
</ul>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">enumname</span> </span>&#123;</div><div class="line">   <span class="comment">// 枚举定义放在这里</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="comment">// 定义枚举</span></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">DaysofaWeek</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">Sunday</span></div><div class="line">    <span class="keyword">case</span> <span class="type">Monday</span></div><div class="line">    <span class="keyword">case</span> <span class="type">TUESDAY</span></div><div class="line">    <span class="keyword">case</span> <span class="type">WEDNESDAY</span></div><div class="line">    <span class="keyword">case</span> <span class="type">THURSDAY</span></div><div class="line">    <span class="keyword">case</span> <span class="type">FRIDAY</span></div><div class="line">    <span class="keyword">case</span> <span class="type">Saturday</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> weekDay = <span class="type">DaysofaWeek</span>.<span class="type">THURSDAY</span></div><div class="line">weekDay = .<span class="type">THURSDAY</span></div><div class="line"><span class="keyword">switch</span> weekDay</div><div class="line">&#123;</div><div class="line"><span class="keyword">case</span> .<span class="type">Sunday</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"星期天"</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">Monday</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"星期一"</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">TUESDAY</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"星期二"</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">WEDNESDAY</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"星期三"</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">THURSDAY</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"星期四"</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">FRIDAY</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"星期五"</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">Saturday</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"星期六"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">//星期四</span></div></pre></td></tr></table></figure>
<h2 id="相关值"><a href="#相关值" class="headerlink" title="相关值"></a>相关值</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Student</span></span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">Name</span>(<span class="type">String</span>)</div><div class="line">    <span class="keyword">case</span> <span class="type">Mark</span>(<span class="type">Int</span>,<span class="type">Int</span>,<span class="type">Int</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> studDetails = <span class="type">Student</span>.<span class="type">Name</span>(<span class="string">"Runoob"</span>)</div><div class="line"><span class="keyword">var</span> studMarks = <span class="type">Student</span>.<span class="type">Mark</span>(<span class="number">98</span>,<span class="number">97</span>,<span class="number">95</span>)</div><div class="line"><span class="keyword">switch</span> studMarks &#123;</div><div class="line"><span class="keyword">case</span> .<span class="type">Name</span>(<span class="keyword">let</span> studName):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"学生的名字是: \(studName)。"</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">Mark</span>(<span class="keyword">let</span> <span class="type">Mark1</span>, <span class="keyword">let</span> <span class="type">Mark2</span>, <span class="keyword">let</span> <span class="type">Mark3</span>):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"学生的成绩是: \(Mark1),\(Mark2),\(Mark3)。"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">//学生的成绩是: 98,97,95。</span></div></pre></td></tr></table></figure>
<h2 id="原始值"><a href="#原始值" class="headerlink" title="原始值"></a>原始值</h2><ul>
<li>原始值可以是字符串，字符，或者任何整型值或浮点型值。</li>
<li><p>每个原始值在它的枚举声明中必须是唯一的。</p>
</li>
<li><p>当使用整数作为原始值时，隐式赋值的值依次递增1。如果第一个值没有被赋初值，将会被自动置为0。</p>
</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Month</span>: <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">January</span> = <span class="number">1</span>, <span class="type">February</span>, <span class="type">March</span>, <span class="type">April</span>, <span class="type">May</span>, <span class="type">June</span>, <span class="type">July</span>, <span class="type">August</span>, <span class="type">September</span>, <span class="type">October</span>, <span class="type">November</span>, <span class="type">December</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> yearMonth = <span class="type">Month</span>.<span class="type">May</span>.rawValue</div><div class="line"><span class="built_in">print</span>(<span class="string">"数字月份为: \(yearMonth)。"</span>)</div><div class="line"><span class="comment">//数字月份为: 5。</span></div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-闭包]]></title>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E9%97%AD%E5%8C%85/</url>
      <content type="html"><![CDATA[<h2 id="sorted-方法"><a href="#sorted-方法" class="headerlink" title="sorted 方法"></a>sorted 方法</h2><p>排序闭包函数类型需为(String, String) -&gt; Bool。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="keyword">let</span> names = [<span class="string">"AT"</span>, <span class="string">"AE"</span>, <span class="string">"D"</span>, <span class="string">"S"</span>, <span class="string">"BE"</span>]</div><div class="line">  </div><div class="line"><span class="comment">// 使用普通函数(或内嵌函数)提供排序功能,闭包函数类型需为(String, String) -&gt; Bool。</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">backwards</span><span class="params">(s1: String, s2: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">return</span> s1 &gt; s2</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> reversed = names.sorted(by: backwards)</div><div class="line">  </div><div class="line"><span class="built_in">print</span>(reversed)</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h2 id="闭包表达式语法"><a href="#闭包表达式语法" class="headerlink" title="闭包表达式语法"></a>闭包表达式语法</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; (parameters) -&gt; returnType <span class="keyword">in</span></div><div class="line">    statements</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面的例子展示了之前backwards(<em>:</em>:)函数对应的闭包表达式版本的代码：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reverses = names.sorted(by: &#123; (s1 , s2) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> s1 &gt; s2</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h3 id="根据上下文推断类型"><a href="#根据上下文推断类型" class="headerlink" title="根据上下文推断类型"></a>根据上下文推断类型</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">reversed = names.sorted(by: &#123; s1, s2 <span class="keyword">in</span> <span class="keyword">return</span> s1 &gt; s2 &#125; )</div></pre></td></tr></table></figure>
<h3 id="单表达式闭包隐式返回"><a href="#单表达式闭包隐式返回" class="headerlink" title="单表达式闭包隐式返回"></a>单表达式闭包隐式返回</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">reversed = names.sorted(by: &#123; s1, s2 <span class="keyword">in</span> s1 &gt; s2 &#125; )</div></pre></td></tr></table></figure>
<p>在这个例子中，sort(_:)方法的第二个参数函数类型明确了闭包必须返回一个Bool类型值。因为闭包函数体只包含了一个单一表达式（s1 &gt; s2），该表达式返回Bool类型值，因此这里没有歧义，return关键字可以省略。</p>
<h3 id="参数名称缩写"><a href="#参数名称缩写" class="headerlink" title="参数名称缩写"></a>参数名称缩写</h3><p>Swift 自动为内联闭包提供了参数名称缩写功能，您可以直接通过$0，$1，$2来顺序调用闭包的参数，以此类推。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="keyword">let</span> names = [<span class="string">"AT"</span>, <span class="string">"AE"</span>, <span class="string">"D"</span>, <span class="string">"S"</span>, <span class="string">"BE"</span>]</div><div class="line">  </div><div class="line"><span class="keyword">var</span> reversed = names.sorted( by: &#123; $<span class="number">0</span> &gt; $<span class="number">1</span> &#125; )</div><div class="line"><span class="built_in">print</span>(reversed)</div></pre></td></tr></table></figure>
<p>在这个例子中，$0和$1表示闭包中第一个和第二个String类型的参数。</p>
<h3 id="运算符函数"><a href="#运算符函数" class="headerlink" title="运算符函数"></a>运算符函数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="keyword">let</span> names = [<span class="string">"AT"</span>, <span class="string">"AE"</span>, <span class="string">"D"</span>, <span class="string">"S"</span>, <span class="string">"BE"</span>]</div><div class="line">  </div><div class="line"><span class="keyword">var</span> reversed = names.sorted(by: &gt;)</div><div class="line"><span class="built_in">print</span>(reversed)</div></pre></td></tr></table></figure>
<h2 id="尾随闭包"><a href="#尾随闭包" class="headerlink" title="尾随闭包"></a>尾随闭包</h2><p>尾随闭包是一个书写在函数括号之后的闭包表达式，函数支持将其作为最后一个参数调用。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunctionThatTakesAClosure</span><span class="params">(closure: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</div><div class="line">    <span class="comment">// 函数体部分</span></div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="comment">// 以下是不使用尾随闭包进行函数调用</span></div><div class="line">someFunctionThatTakesAClosure(&#123;</div><div class="line">    <span class="comment">// 闭包主体部分</span></div><div class="line">&#125;)</div><div class="line">  </div><div class="line"><span class="comment">// 以下是使用尾随闭包进行函数调用</span></div><div class="line">someFunctionThatTakesAClosure() &#123;</div><div class="line">    <span class="comment">// 闭包主体部分</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果函数只需要闭包表达式一个参数，当您使用尾随闭包时，您甚至可以把()省略掉：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Cocoa</div><div class="line">  </div><div class="line"><span class="keyword">let</span> names = [<span class="string">"AT"</span>, <span class="string">"AE"</span>, <span class="string">"D"</span>, <span class="string">"S"</span>, <span class="string">"BE"</span>]</div><div class="line">  </div><div class="line"><span class="comment">//尾随闭包</span></div><div class="line"><span class="keyword">var</span> reversed = names.sorted() &#123; $<span class="number">0</span> &gt; $<span class="number">1</span> &#125;</div><div class="line"><span class="built_in">print</span>(reversed)</div></pre></td></tr></table></figure></p>
<p><strong>注意</strong>： 如果函数只需要闭包表达式一个参数，当您使用尾随闭包时，您甚至可以把()省略掉。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">reversed = names.sorted &#123; $<span class="number">0</span> &gt; $<span class="number">1</span> &#125;</div></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-函数]]></title>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E5%87%BD%E6%95%B0/</url>
      <content type="html"><![CDATA[<h2 id="函数的定义与调用"><a href="#函数的定义与调用" class="headerlink" title="函数的定义与调用"></a>函数的定义与调用</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHelloAgain</span><span class="params">(personName: String)</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"Hello again, "</span> + personName + <span class="string">"!"</span></div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="built_in">print</span>(sayHelloAgain(personName: <span class="string">"Anna"</span>))</div><div class="line"><span class="comment">// prints "Hello again, Anna!"</span></div></pre></td></tr></table></figure>
<h2 id="函数参数与返回值"><a href="#函数参数与返回值" class="headerlink" title="函数参数与返回值"></a>函数参数与返回值</h2><h3 id="无参函数"><a href="#无参函数" class="headerlink" title="无参函数"></a>无参函数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHelloWorld</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"hello, world"</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(sayHelloWorld())</div><div class="line"><span class="comment">// prints "hello, world"</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="多参数函数"><a href="#多参数函数" class="headerlink" title="多参数函数"></a>多参数函数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(personName: String, alreadyGreeted: Bool)</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">    <span class="keyword">if</span> alreadyGreeted &#123;</div><div class="line">        <span class="keyword">return</span> sayHelloAgain(personName: personName)</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> sayHello(personName: personName, alreadyGreeted: &lt;#<span class="type">Bool</span>#&gt;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(sayHello(personName: <span class="string">"Tim"</span>, alreadyGreeted: <span class="literal">true</span>))</div><div class="line"><span class="comment">// prints "Hello again, Tim!"</span></div></pre></td></tr></table></figure>
<h3 id="无返回值函数"><a href="#无返回值函数" class="headerlink" title="无返回值函数"></a>无返回值函数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayGoodbye</span><span class="params">(personName: String)</span></span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Goodbye, \(personName)!"</span>)</div><div class="line">&#125;</div><div class="line">sayGoodbye(personName: <span class="string">"Dave"</span>)</div><div class="line"><span class="comment">// prints "Goodbye, Dave!"</span></div></pre></td></tr></table></figure>
<h3 id="多重返回值函数"><a href="#多重返回值函数" class="headerlink" title="多重返回值函数"></a>多重返回值函数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">minMax</span><span class="params">(array: [Int])</span></span> -&gt; (<span class="built_in">min</span>: <span class="type">Int</span>, <span class="built_in">max</span>: <span class="type">Int</span>) &#123;</div><div class="line">    <span class="keyword">var</span> currentMin = array[<span class="number">0</span>]</div><div class="line">    <span class="keyword">var</span> currentMax = array[<span class="number">0</span>]</div><div class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> array[<span class="number">1</span>..&lt;array.<span class="built_in">count</span>] &#123;</div><div class="line">        <span class="keyword">if</span> value &lt; currentMin &#123;</div><div class="line">            currentMin = value</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> value &gt; currentMax &#123;</div><div class="line">            currentMax = value</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> (currentMin, currentMax)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="可选元组返回类型"><a href="#可选元组返回类型" class="headerlink" title="可选元组返回类型"></a>可选元组返回类型</h3><p>为了安全地处理这个“空数组”问题，将minMax(_:)函数改写为使用可选元组返回类型，并且当数组为空时返回nil：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">minMax</span><span class="params">(array: [Int])</span></span> -&gt; (<span class="built_in">min</span>: <span class="type">Int</span>, <span class="built_in">max</span>: <span class="type">Int</span>)? &#123;</div><div class="line">    <span class="keyword">if</span> array.isEmpty &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</div><div class="line">    <span class="keyword">var</span> currentMin = array[<span class="number">0</span>]</div><div class="line">    <span class="keyword">var</span> currentMax = array[<span class="number">0</span>]</div><div class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> array[<span class="number">1</span>..&lt;array.<span class="built_in">count</span>] &#123;</div><div class="line">        <span class="keyword">if</span> value &lt; currentMin &#123;</div><div class="line">            currentMin = value</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> value &gt; currentMax &#123;</div><div class="line">            currentMax = value</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> (currentMin, currentMax)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="函数参数名称"><a href="#函数参数名称" class="headerlink" title="函数参数名称"></a>函数参数名称</h3><p>函数参数都有一个外部参数名（external parameter name）和一个局部参数名（local parameter name）。外部参数名用于在函数调用时标注传递给函数的参数，局部参数名在函数的实现内部使用。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span><span class="params">(firstParameterName: Int, secondParameterName: Int)</span></span> &#123;</div><div class="line">    <span class="comment">// function body goes here</span></div><div class="line">    <span class="comment">// firstParameterName and secondParameterName refer to</span></div><div class="line">    <span class="comment">// the argument values for the first and second parameters</span></div><div class="line">&#125;</div><div class="line">someFunction(firstParameterName: <span class="number">1</span>, secondParameterName: <span class="number">2</span>)</div></pre></td></tr></table></figure></p>
<h3 id="指定外部参数名"><a href="#指定外部参数名" class="headerlink" title="指定外部参数名"></a>指定外部参数名</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span><span class="params">(externalParameterName localParameterName: Int)</span></span> &#123;</div><div class="line">    <span class="comment">// function body goes here, and can use localParameterName</span></div><div class="line">    <span class="comment">// to refer to the argument value for that parameter</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">(to person: String, and anotherPerson: String)</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"Hello \(person) and \(anotherPerson)!"</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(sayHello(to: <span class="string">"Bill"</span>, and: <span class="string">"Ted"</span>))</div><div class="line"><span class="comment">// prints "Hello Bill and Ted!"</span></div></pre></td></tr></table></figure>
<p>为每个参数指定外部参数名后，在你调用sayHello(to:and:)函数时两个外部参数名都必须写出来。</p>
<h3 id="忽略外部参数名"><a href="#忽略外部参数名" class="headerlink" title="忽略外部参数名"></a>忽略外部参数名</h3><p>如果你不想为第二个及后续的参数设置外部参数名，用一个下划线（_）代替一个明确的参数名。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span><span class="params">(firstParameterName: Int, <span class="number">_</span> secondParameterName: Int)</span></span> &#123;</div><div class="line">    <span class="comment">// function body goes here</span></div><div class="line">    <span class="comment">// firstParameterName and secondParameterName refer to</span></div><div class="line">    <span class="comment">// the argument values for the first and second parameters</span></div><div class="line">&#125;</div><div class="line">someFunction(<span class="number">1</span>, <span class="number">2</span>)</div></pre></td></tr></table></figure></p>
<h3 id="默认参数值"><a href="#默认参数值" class="headerlink" title="默认参数值"></a>默认参数值</h3><p>你可以在函数体中为每个参数定义默认值（Deafult Values）。当默认值被定义后，调用这个函数时可以忽略这个参数。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span><span class="params">(<span class="number">_</span> parameterWithDefault: Int = <span class="number">12</span>)</span></span> &#123;</div><div class="line">    <span class="comment">// function body goes here</span></div><div class="line">    <span class="comment">// if no arguments are passed to the function call,</span></div><div class="line">    <span class="comment">// value of parameterWithDefault is 12</span></div><div class="line">&#125;</div><div class="line">someFunction(<span class="number">6</span>) <span class="comment">// parameterWithDefault is 6</span></div><div class="line">someFunction() <span class="comment">// parameterWithDefault is 12</span></div></pre></td></tr></table></figure></p>
<h3 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">arithmeticMean</span><span class="params">(numbers: Double...)</span></span> -&gt; <span class="type">Double</span> &#123;</div><div class="line">    <span class="keyword">var</span> total: <span class="type">Double</span> = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</div><div class="line">        total += number</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> total / <span class="type">Double</span>(numbers.<span class="built_in">count</span>)</div><div class="line">&#125;</div><div class="line">arithmeticMean(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line"><span class="comment">// returns 3.0, which is the arithmetic mean of these five numbers</span></div><div class="line">arithmeticMean(<span class="number">3</span>, <span class="number">8.25</span>, <span class="number">18.75</span>)</div><div class="line"><span class="comment">// returns 10.0, which is the arithmetic mean of these three numbers</span></div></pre></td></tr></table></figure>
<p><strong>注意</strong>:一个函数最多只能有一个可变参数。</p>
<h3 id="输入输出参数"><a href="#输入输出参数" class="headerlink" title="输入输出参数"></a>输入输出参数</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">swapTwoInts</span><span class="params">(a:<span class="keyword">inout</span> Int, <span class="number">_</span> b:<span class="keyword">inout</span> Int)</span></span> &#123;</div><div class="line">    <span class="keyword">let</span> temporaryA = a</div><div class="line">    a = b</div><div class="line">    b = temporaryA</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>调用参数需要添加&amp;</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> someInt = <span class="number">3</span></div><div class="line"><span class="keyword">var</span> anotherInt = <span class="number">107</span></div><div class="line">swapTwoInts(&amp;someInt, &amp;anotherInt)</div><div class="line"><span class="built_in">print</span>(<span class="string">"someInt is now \(someInt), and anotherInt is now \(anotherInt)"</span>)</div><div class="line"><span class="comment">// prints "someInt is now 107, and anotherInt is now 3"</span></div></pre></td></tr></table></figure>
<p>从上面这个例子中，我们可以看到 someInt 和 anotherInt 的原始值在 swapTwoInts(<em>:</em>:) 函数中被修改，尽管它们的定义在函数体外。</p>
<h2 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h2><p>每个函数都有种特定的函数类型，由函数的参数类型和返回类型组成。</p>
<h2 id="嵌套函数"><a href="#嵌套函数" class="headerlink" title="嵌套函数"></a>嵌套函数</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">chooseStepFunction</span><span class="params">(backwards: Bool)</span></span> -&gt; (<span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">stepForward</span><span class="params">(input: Int)</span></span> -&gt; <span class="type">Int</span> &#123; <span class="keyword">return</span> input + <span class="number">1</span> &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">stepBackward</span><span class="params">(input: Int)</span></span> -&gt; <span class="type">Int</span> &#123; <span class="keyword">return</span> input - <span class="number">1</span> &#125;</div><div class="line">    <span class="keyword">return</span> backwards ? stepBackward : stepForward</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> currentValue = -<span class="number">4</span></div><div class="line"><span class="keyword">let</span> moveNearerToZero = chooseStepFunction(backwards: currentValue &gt; <span class="number">0</span>)</div><div class="line"><span class="comment">// moveNearerToZero now refers to the nested stepForward() function</span></div><div class="line"><span class="keyword">while</span> currentValue != <span class="number">0</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(currentValue)... "</span>)</div><div class="line">    currentValue = moveNearerToZero(currentValue)</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(<span class="string">"zero!"</span>)</div><div class="line"><span class="comment">// -4...</span></div><div class="line"><span class="comment">// -3...</span></div><div class="line"><span class="comment">// -2...</span></div><div class="line"><span class="comment">// -1...</span></div><div class="line"><span class="comment">// zero!</span></div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-控制流]]></title>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E6%8E%A7%E5%88%B6%E6%B5%81/</url>
      <content type="html"><![CDATA[<h2 id="For循环"><a href="#For循环" class="headerlink" title="For循环"></a>For循环</h2><h3 id="For-In"><a href="#For-In" class="headerlink" title="For-In"></a>For-In</h3><p>你可以使用for-in循环来遍历一个集合里面的所有元素<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="number">1</span>...<span class="number">5</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(index) times 5 is \(index * 5)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 1 times 5 is 5</span></div><div class="line"><span class="comment">// 2 times 5 is 10</span></div><div class="line"><span class="comment">// 3 times 5 is 15</span></div><div class="line"><span class="comment">// 4 times 5 is 20</span></div><div class="line"><span class="comment">// 5 times 5 is 25</span></div></pre></td></tr></table></figure></p>
<p>如果你不需要知道区间序列内每一项的值，你可以使用下划线（_）替代变量名来忽略对值的访问：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> base = <span class="number">3</span></div><div class="line"><span class="keyword">let</span> power = <span class="number">10</span></div><div class="line"><span class="keyword">var</span> answer = <span class="number">1</span></div><div class="line"><span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">1</span>...power &#123;</div><div class="line">    answer *= base</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(<span class="string">"\(base) to the power of \(power) is \(answer)"</span>)</div><div class="line"><span class="comment">// 输出 "3 to the power of 10 is 59049"</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="For"><a href="#For" class="headerlink" title="For"></a>For</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> <span class="keyword">var</span> index = <span class="number">0</span>; index &lt; <span class="number">3</span>; ++index &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"index is \(index)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// index is 0</span></div><div class="line"><span class="comment">// index is 1</span></div><div class="line"><span class="comment">// index is 2</span></div></pre></td></tr></table></figure>
<h2 id="While循环"><a href="#While循环" class="headerlink" title="While循环"></a>While循环</h2><ul>
<li>while循环，每次在循环开始时计算条件是否符合；</li>
<li>repeat-while循环，每次在循环结束时计算条件是否符合。while循环，每次在循环开始时计算条件是否符合；<br>repeat-while循环，每次在循环结束时计算条件是否符合。</li>
</ul>
<h3 id="While"><a href="#While" class="headerlink" title="While"></a>While</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> condition &#123;  </div><div class="line">    statements</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Repeat-While"><a href="#Repeat-While" class="headerlink" title="Repeat-While"></a>Repeat-While</h3><p>类似于java的do while</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">repeat</span> &#123;</div><div class="line">    statements</div><div class="line">&#125; <span class="keyword">while</span> condition</div></pre></td></tr></table></figure>
<h2 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> temperatureInFahrenheit = <span class="number">30</span></div><div class="line"><span class="keyword">if</span> temperatureInFahrenheit &lt;= <span class="number">32</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It's very cold. Consider wearing a scarf."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "It's very cold. Consider wearing a scarf."</span></div></pre></td></tr></table></figure>
<h3 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">temperatureInFahrenheit = <span class="number">40</span></div><div class="line"><span class="keyword">if</span> temperatureInFahrenheit &lt;= <span class="number">32</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It's very cold. Consider wearing a scarf."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It's not that cold. Wear a t-shirt."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "It's not that cold. Wear a t-shirt."</span></div></pre></td></tr></table></figure>
<h3 id="if-else-if-else"><a href="#if-else-if-else" class="headerlink" title="if else if else"></a>if else if else</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">temperatureInFahrenheit = <span class="number">90</span></div><div class="line"><span class="keyword">if</span> temperatureInFahrenheit &lt;= <span class="number">32</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It's very cold. Consider wearing a scarf."</span>)</div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> temperatureInFahrenheit &gt;= <span class="number">86</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It's really warm. Don't forget to wear sunscreen."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It's not that cold. Wear a t-shirt."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "It's really warm. Don't forget to wear sunscreen."</span></div></pre></td></tr></table></figure>
<h3 id="if-else-if"><a href="#if-else-if" class="headerlink" title="if else if"></a>if else if</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">temperatureInFahrenheit = <span class="number">72</span></div><div class="line"><span class="keyword">if</span> temperatureInFahrenheit &lt;= <span class="number">32</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It's very cold. Consider wearing a scarf."</span>)</div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> temperatureInFahrenheit &gt;= <span class="number">86</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It's really warm. Don't forget to wear sunscreen."</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">switch</span> some value to consider &#123;</div><div class="line"><span class="keyword">case</span> value <span class="number">1</span>:</div><div class="line">    respond to value <span class="number">1</span></div><div class="line"><span class="keyword">case</span> value <span class="number">2</span>, value <span class="number">3</span>:</div><div class="line">    respond to value <span class="number">2</span> or <span class="number">3</span></div><div class="line"><span class="keyword">default</span>:</div><div class="line">    otherwise, <span class="keyword">do</span> something <span class="keyword">else</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> someCharacter: <span class="type">Character</span> = <span class="string">"e"</span></div><div class="line"><span class="keyword">switch</span> someCharacter &#123;</div><div class="line"><span class="keyword">case</span> <span class="string">"a"</span>, <span class="string">"e"</span>, <span class="string">"i"</span>, <span class="string">"o"</span>, <span class="string">"u"</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(someCharacter) is a vowel"</span>)</div><div class="line"><span class="keyword">case</span> <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"f"</span>, <span class="string">"g"</span>, <span class="string">"h"</span>, <span class="string">"j"</span>, <span class="string">"k"</span>, <span class="string">"l"</span>, <span class="string">"m"</span>,</div><div class="line"><span class="string">"n"</span>, <span class="string">"p"</span>, <span class="string">"q"</span>, <span class="string">"r"</span>, <span class="string">"s"</span>, <span class="string">"t"</span>, <span class="string">"v"</span>, <span class="string">"w"</span>, <span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"z"</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(someCharacter) is a consonant"</span>)</div><div class="line"><span class="keyword">default</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(someCharacter) is not a vowel or a consonant"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "e is a vowel"</span></div></pre></td></tr></table></figure>
<h3 id="区间匹配"><a href="#区间匹配" class="headerlink" title="区间匹配"></a>区间匹配</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> approximateCount = <span class="number">62</span></div><div class="line"><span class="keyword">let</span> countedThings = <span class="string">"moons orbiting Saturn"</span></div><div class="line"><span class="keyword">var</span> naturalCount: <span class="type">String</span></div><div class="line"><span class="keyword">switch</span> approximateCount &#123;</div><div class="line"><span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">    naturalCount = <span class="string">"no"</span></div><div class="line"><span class="keyword">case</span> <span class="number">1</span>..&lt;<span class="number">5</span>:</div><div class="line">    naturalCount = <span class="string">"a few"</span></div><div class="line"><span class="keyword">case</span> <span class="number">5</span>..&lt;<span class="number">12</span>:</div><div class="line">    naturalCount = <span class="string">"several"</span></div><div class="line"><span class="keyword">case</span> <span class="number">12</span>..&lt;<span class="number">100</span>:</div><div class="line">    naturalCount = <span class="string">"dozens of"</span></div><div class="line"><span class="keyword">case</span> <span class="number">100</span>..&lt;<span class="number">1000</span>:</div><div class="line">    naturalCount = <span class="string">"hundreds of"</span></div><div class="line"><span class="keyword">default</span>:</div><div class="line">    naturalCount = <span class="string">"many"</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(<span class="string">"There are \(naturalCount) \(countedThings)."</span>)</div><div class="line"><span class="comment">// 输出 "There are dozens of moons orbiting Saturn."</span></div></pre></td></tr></table></figure>
<h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> somePoint = (<span class="number">1</span>, <span class="number">1</span>)</div><div class="line"><span class="keyword">switch</span> somePoint &#123;</div><div class="line"><span class="keyword">case</span> (<span class="number">0</span>, <span class="number">0</span>):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"(0, 0) is at the origin"</span>)</div><div class="line"><span class="keyword">case</span> (<span class="number">_</span>, <span class="number">0</span>):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"(\(somePoint.0), 0) is on the x-axis"</span>)</div><div class="line"><span class="keyword">case</span> (<span class="number">0</span>, <span class="number">_</span>):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"(0, \(somePoint.1)) is on the y-axis"</span>)</div><div class="line"><span class="keyword">case</span> (-<span class="number">2</span>...<span class="number">2</span>, -<span class="number">2</span>...<span class="number">2</span>):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"(\(somePoint.0), \(somePoint.1)) is inside the box"</span>)</div><div class="line"><span class="keyword">default</span>:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"(\(somePoint.0), \(somePoint.1)) is outside of the box"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "(1, 1) is inside the box"</span></div></pre></td></tr></table></figure>
<h3 id="值绑定"><a href="#值绑定" class="headerlink" title="值绑定"></a>值绑定</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> anotherPoint = (<span class="number">2</span>, <span class="number">0</span>)</div><div class="line"><span class="keyword">switch</span> anotherPoint &#123;</div><div class="line"><span class="keyword">case</span> (<span class="keyword">let</span> x, <span class="number">0</span>):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"on the x-axis with an x value of \(x)"</span>)</div><div class="line"><span class="keyword">case</span> (<span class="number">0</span>, <span class="keyword">let</span> y):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"on the y-axis with a y value of \(y)"</span>)</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"somewhere else at (\(x), \(y))"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "on the x-axis with an x value of 2"</span></div></pre></td></tr></table></figure>
<h3 id="Where"><a href="#Where" class="headerlink" title="Where"></a>Where</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> yetAnotherPoint = (<span class="number">1</span>, -<span class="number">1</span>)</div><div class="line"><span class="keyword">switch</span> yetAnotherPoint &#123;</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == y:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is on the line x == y"</span>)</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == -y:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is on the line x == -y"</span>)</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"(\(x), \(y)) is just some arbitrary point"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "(1, -1) is on the line x == -y"</span></div></pre></td></tr></table></figure>
<h2 id="控制转移语句"><a href="#控制转移语句" class="headerlink" title="控制转移语句"></a>控制转移语句</h2><p>Swift 有五种控制转移语句：</p>
<ul>
<li>continue</li>
<li>break</li>
<li>fallthrough</li>
<li>return</li>
<li>throw</li>
</ul>
<h3 id="Continue"><a href="#Continue" class="headerlink" title="Continue"></a>Continue</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> puzzleInput = <span class="string">"great minds think alike"</span></div><div class="line"><span class="keyword">var</span> puzzleOutput = <span class="string">""</span></div><div class="line"><span class="keyword">for</span> character <span class="keyword">in</span> puzzleInput.characters &#123;</div><div class="line">    <span class="keyword">switch</span> character &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">"a"</span>, <span class="string">"e"</span>, <span class="string">"i"</span>, <span class="string">"o"</span>, <span class="string">"u"</span>, <span class="string">" "</span>:</div><div class="line">        <span class="keyword">continue</span></div><div class="line">    <span class="keyword">default</span>:</div><div class="line">        puzzleOutput.append(character)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(puzzleOutput)</div><div class="line"><span class="comment">// 输出 "grtmndsthnklk"</span></div></pre></td></tr></table></figure>
<h3 id="Break"><a href="#Break" class="headerlink" title="Break"></a>Break</h3><p>break语句会立刻结束整个控制流的执行。</p>
<h4 id="循环语句中的-break"><a href="#循环语句中的-break" class="headerlink" title="循环语句中的 break"></a>循环语句中的 break</h4><p>当在一个循环体中使用break时，会立刻中断该循环体的执行，然后跳转到表示循环体结束的大括号(})后的第一行代码。</p>
<h4 id="Switch-语句中的-break"><a href="#Switch-语句中的-break" class="headerlink" title="Switch 语句中的 break"></a>Switch 语句中的 break</h4><p>当在一个switch代码块中使用break时，会立即中断该switch代码块的执行，并且跳转到表示switch代码块结束的大括号(})后的第一行代码。</p>
<h3 id="fallthrough"><a href="#fallthrough" class="headerlink" title="fallthrough"></a>fallthrough</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> integerToDescribe = <span class="number">5</span></div><div class="line"><span class="keyword">var</span> description = <span class="string">"The number \(integerToDescribe) is"</span></div><div class="line"><span class="keyword">switch</span> integerToDescribe &#123;</div><div class="line"><span class="keyword">case</span> <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">19</span>:</div><div class="line">    description += <span class="string">" a prime number, and also"</span></div><div class="line">    <span class="keyword">fallthrough</span></div><div class="line"><span class="keyword">default</span>:</div><div class="line">    description += <span class="string">" an integer."</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(description)</div><div class="line"><span class="comment">// 输出 "The number 5 is a prime number, and also an integer."</span></div></pre></td></tr></table></figure>
<h3 id="return"><a href="#return" class="headerlink" title="return"></a>return</h3><p>像if语句一样，guard的执行取决于一个表达式的布尔值。我们可以使用guard语句来要求条件必须为真时，以执行guard语句后的代码。不同于if语句，一个guard语句总是有一个else分句，如果条件不为真则执行else分句中的代码。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">greet</span><span class="params">(person: [String: String])</span></span> &#123;</div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> name = person[<span class="string">"name"</span>] <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="built_in">print</span>(<span class="string">"Hello \(name)"</span>)</div><div class="line">  </div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> location = person[<span class="string">"location"</span>] <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"I hope the weather is nice near you."</span>)</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="built_in">print</span>(<span class="string">"I hope the weather is nice in \(location)."</span>)</div><div class="line">&#125;</div><div class="line">  </div><div class="line">greet([<span class="string">"name"</span>: <span class="string">"John"</span>])</div><div class="line"><span class="comment">// prints "Hello John!"</span></div><div class="line"><span class="comment">// prints "I hope the weather is nice near you."</span></div><div class="line">greet([<span class="string">"name"</span>: <span class="string">"Jane"</span>, <span class="string">"location"</span>: <span class="string">"Cupertino"</span>])</div><div class="line"><span class="comment">// prints "Hello Jane!"</span></div><div class="line"><span class="comment">// prints "I hope the weather is nice in Cupertino."</span></div><div class="line">``` </div><div class="line">  </div><div class="line">## 检测 <span class="type">API</span> 可用性</div><div class="line">  </div><div class="line">```swift</div><div class="line"><span class="keyword">if</span> #available(iOS <span class="number">9</span>, <span class="type">OSX</span> <span class="number">10.10</span>, *) &#123;</div><div class="line">    <span class="comment">// 在 iOS 使用 iOS 9 的 API, 在 OS X 使用 OS X v10.10 的 API</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// 使用先前版本的 iOS 和 OS X 的 API</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-集合类型]]></title>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/</url>
      <content type="html"><![CDATA[<p>Swift 语言提供Arrays、Sets和Dictionaries三种基本的集合类型用来存储集合数据。</p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="创建一个空数组"><a href="#创建一个空数组" class="headerlink" title="创建一个空数组"></a>创建一个空数组</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> someInts = [<span class="type">Int</span>]()</div><div class="line"><span class="built_in">print</span>(<span class="string">"someInts is of type [Int] with \(someInts.count) items."</span>)</div><div class="line"><span class="comment">// 打印 "someInts is of type [Int] with 0 items."</span></div></pre></td></tr></table></figure>
<h3 id="创建一个带有默认值的数组"><a href="#创建一个带有默认值的数组" class="headerlink" title="创建一个带有默认值的数组"></a>创建一个带有默认值的数组</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> threeDoubles = [<span class="type">Double</span>](<span class="built_in">count</span>: <span class="number">3</span>, repeatedValue:<span class="number">0.0</span>)</div><div class="line"><span class="comment">// threeDoubles 是一种 [Double] 数组，等价于 [0.0, 0.0, 0.0]</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="通过两个数组相加创建一个数组"><a href="#通过两个数组相加创建一个数组" class="headerlink" title="通过两个数组相加创建一个数组"></a>通过两个数组相加创建一个数组</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> anotherThreeDoubles = <span class="type">Array</span>(<span class="built_in">count</span>: <span class="number">3</span>, repeatedValue: <span class="number">2.5</span>)</div><div class="line"><span class="comment">// anotherThreeDoubles 被推断为 [Double]，等价于 [2.5, 2.5, 2.5]</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> sixDoubles = threeDoubles + anotherThreeDoubles</div><div class="line"><span class="comment">// sixDoubles 被推断为 [Double]，等价于 [0.0, 0.0, 0.0, 2.5, 2.5, 2.5]</span></div></pre></td></tr></table></figure>
<h3 id="用字面量构造数组"><a href="#用字面量构造数组" class="headerlink" title="用字面量构造数组"></a>用字面量构造数组</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> shoppingList: [<span class="type">String</span>] = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</div><div class="line"><span class="comment">// shoppingList 已经被构造并且拥有两个初始项。</span></div></pre></td></tr></table></figure>
<p>或<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</div></pre></td></tr></table></figure></p>
<p>因为所有字面量中的值都是相同的类型，Swift 可以推断出[String]是shoppinglist中变量的正确类型。</p>
<h3 id="访问和修改数组"><a href="#访问和修改数组" class="headerlink" title="访问和修改数组"></a>访问和修改数组</h3><p>可以使用数组的只读属性count来获取数组中的数据项数量：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="string">"The shopping list contains \(shoppingList.count) items."</span>)</div><div class="line"><span class="comment">// 输出 "The shopping list contains 2 items."（这个数组有2个项）</span></div></pre></td></tr></table></figure></p>
<p>使用布尔值属性isEmpty作为检查count属性的值是否为 0 的捷径：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> shoppingList.isEmpty &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The shopping list is empty."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The shopping list is not empty."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印 "The shopping list is not empty."（shoppinglist 不是空的）</span></div></pre></td></tr></table></figure></p>
<p>也可以使用append(_:)方法在数组后面添加新的数据项：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">shoppingList.append(<span class="string">"Flour"</span>)</div><div class="line"><span class="comment">// shoppingList 现在有3个数据项，有人在摊煎饼</span></div></pre></td></tr></table></figure></p>
<p>使用加法赋值运算符（+=）也可以直接在数组后面添加一个或多个拥有相同类型的数据项：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">shoppingList += [<span class="string">"Baking Powder"</span>]</div><div class="line"><span class="comment">// shoppingList 现在有四项了</span></div><div class="line">shoppingList += [<span class="string">"Chocolate Spread"</span>, <span class="string">"Cheese"</span>, <span class="string">"Butter"</span>]</div><div class="line"><span class="comment">// shoppingList 现在有七项了</span></div></pre></td></tr></table></figure></p>
<p>可以直接使用下标语法来获取数组中的数据项</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> firstItem = shoppingList[<span class="number">0</span>]</div><div class="line"><span class="comment">// 第一项是 "Eggs"</span></div></pre></td></tr></table></figure>
<p>还可以利用下标来一次改变一系列数据值，即使新数据和原有数据的数量是不一样的。下面的例子把”Chocolate Spread”，”Cheese”，和”Butter”替换为”Bananas”和 “Apples”：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">shoppingList[<span class="number">4</span>...<span class="number">6</span>] = [<span class="string">"Bananas"</span>, <span class="string">"Apples"</span>]</div><div class="line"><span class="comment">// shoppingList 现在有6项</span></div></pre></td></tr></table></figure></p>
<p>调用数组的insert(_:atIndex:)方法来在某个具体索引值之前添加数据项：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">shoppingList.insert(<span class="string">"Maple Syrup"</span>, atIndex: <span class="number">0</span>)</div><div class="line"><span class="comment">// shoppingList 现在有7项</span></div><div class="line"><span class="comment">// "Maple Syrup" 现在是这个列表中的第一项</span></div></pre></td></tr></table></figure></p>
<p>类似的我们可以使用removeAtIndex(_:)方法来移除数组中的某一项。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> mapleSyrup = shoppingList.removeAtIndex(<span class="number">0</span>)</div><div class="line"><span class="comment">// 索引值为0的数据项被移除</span></div><div class="line"><span class="comment">// shoppingList 现在只有6项，而且不包括 Maple Syrup</span></div><div class="line"><span class="comment">// mapleSyrup 常量的值等于被移除数据项的值 "Maple Syrup"</span></div></pre></td></tr></table></figure></p>
<p>如果我们只想把数组中的最后一项移除，可以使用removeLast()方法<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> apples = shoppingList.removeLast()</div><div class="line"><span class="comment">// 数组的最后一项被移除了</span></div><div class="line"><span class="comment">// shoppingList 现在只有5项，不包括 cheese</span></div><div class="line"><span class="comment">// apples 常量的值现在等于 "Apples" 字符串</span></div></pre></td></tr></table></figure></p>
<h3 id="数组的遍历"><a href="#数组的遍历" class="headerlink" title="数组的遍历"></a>数组的遍历</h3><p>我们可以使用for-in循环来遍历所有数组中的数据项：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> shoppingList &#123;</div><div class="line">    <span class="built_in">print</span>(item)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Six eggs</span></div><div class="line"><span class="comment">// Milk</span></div><div class="line"><span class="comment">// Flour</span></div><div class="line"><span class="comment">// Baking Powder</span></div><div class="line"><span class="comment">// Bananas</span></div></pre></td></tr></table></figure></p>
<p>如果我们同时需要每个数据项的值和索引值，可以使用enumerate()方法来进行数组遍历。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (index, value) <span class="keyword">in</span> shoppingList.<span class="built_in">enumerate</span>() &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Item \(String(index + 1)): \(value)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Item 1: Six eggs</span></div><div class="line"><span class="comment">// Item 2: Milk</span></div><div class="line"><span class="comment">// Item 3: Flour</span></div><div class="line"><span class="comment">// Item 4: Baking Powder</span></div><div class="line"><span class="comment">// Item 5: Bananas</span></div></pre></td></tr></table></figure></p>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><h3 id="创建和构造一个空的集合"><a href="#创建和构造一个空的集合" class="headerlink" title="创建和构造一个空的集合"></a>创建和构造一个空的集合</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> letters = <span class="type">Set</span>&lt;<span class="type">Character</span>&gt;()</div><div class="line"><span class="built_in">print</span>(<span class="string">"letters is of type Set&lt;Character&gt; with \(letters.count) items."</span>)</div><div class="line"><span class="comment">// 打印 "letters is of type Set&lt;Character&gt; with 0 items."</span></div></pre></td></tr></table></figure>
<h3 id="用数组字面量创建集合"><a href="#用数组字面量创建集合" class="headerlink" title="用数组字面量创建集合"></a>用数组字面量创建集合</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> favoriteGenres: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; = [<span class="string">"Rock"</span>, <span class="string">"Classical"</span>, <span class="string">"Hip hop"</span>]</div><div class="line"><span class="comment">// favoriteGenres 被构造成含有三个初始值的集合</span></div></pre></td></tr></table></figure>
<h3 id="访问和修改一个集合"><a href="#访问和修改一个集合" class="headerlink" title="访问和修改一个集合"></a>访问和修改一个集合</h3><p>为了找出一个Set中元素的数量，可以使用其只读属性count：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="string">"I have \(favoriteGenres.count) favorite music genres."</span>)</div><div class="line"><span class="comment">// 打印 "I have 3 favorite music genres."</span></div></pre></td></tr></table></figure></p>
<p>使用布尔属性isEmpty作为一个缩写形式去检查count属性是否为0：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> favoriteGenres.isEmpty &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"As far as music goes, I'm not picky."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"I have particular music preferences."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印 "I have particular music preferences."</span></div></pre></td></tr></table></figure></p>
<p>你可以通过调用Set的insert(_:)方法来添加一个新元素：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">favoriteGenres.insert(<span class="string">"Jazz"</span>)</div><div class="line"><span class="comment">// favoriteGenres 现在包含4个元素</span></div></pre></td></tr></table></figure></p>
<p>你可以通过调用Set的remove(_:)方法去删除一个元素，如果该值是该Set的一个元素则删除该元素并且返回被删除的元素值，否则如果该Set不包含该值，则返回nil<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> removedGenre = favoriteGenres.remove(<span class="string">"Rock"</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(removedGenre)? I'm over it."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"I never much cared for that."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印 "Rock? I'm over it."</span></div></pre></td></tr></table></figure></p>
<p>使用contains(_:)方法去检查Set中是否包含一个特定的值：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> favoriteGenres.<span class="built_in">contains</span>(<span class="string">"Funk"</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"I get up on the good foot."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It's too funky in here."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印 "It's too funky in here."</span></div></pre></td></tr></table></figure></p>
<h3 id="遍历一个集合"><a href="#遍历一个集合" class="headerlink" title="遍历一个集合"></a>遍历一个集合</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> genre <span class="keyword">in</span> favoriteGenres &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(genre)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Classical</span></div><div class="line"><span class="comment">// Jazz</span></div><div class="line"><span class="comment">// Hip hop</span></div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> genre <span class="keyword">in</span> favoriteGenres.<span class="built_in">sort</span>() &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(genre)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "Classical"</span></div><div class="line"><span class="comment">// prints "Hip hop"</span></div><div class="line"><span class="comment">// prints "Jazz</span></div></pre></td></tr></table></figure>
<h3 id="基本集合操作"><a href="#基本集合操作" class="headerlink" title="基本集合操作"></a>基本集合操作</h3><p><img src="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Art/setVennDiagram_2x.png" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> oddDigits: <span class="type">Set</span> = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</div><div class="line"><span class="keyword">let</span> evenDigits: <span class="type">Set</span> = [<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</div><div class="line"><span class="keyword">let</span> singleDigitPrimeNumbers: <span class="type">Set</span> = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</div><div class="line"></div><div class="line">oddDigits.union(evenDigits).<span class="built_in">sort</span>()</div><div class="line"><span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></div><div class="line">oddDigits.intersect(evenDigits).<span class="built_in">sort</span>()</div><div class="line"><span class="comment">// []</span></div><div class="line">oddDigits.subtract(singleDigitPrimeNumbers).<span class="built_in">sort</span>()</div><div class="line"><span class="comment">// [1, 9]</span></div><div class="line">oddDigits.exclusiveOr(singleDigitPrimeNumbers).<span class="built_in">sort</span>()</div><div class="line"><span class="comment">// [1, 2, 9]</span></div></pre></td></tr></table></figure>
<h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><h3 id="创建一个空字典"><a href="#创建一个空字典" class="headerlink" title="创建一个空字典"></a>创建一个空字典</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> namesOfIntegers = [<span class="type">Int</span>: <span class="type">String</span>]()</div><div class="line"><span class="comment">// namesOfIntegers 是一个空的 [Int: String] 字典</span></div></pre></td></tr></table></figure>
<h3 id="用字典字面量创建字典"><a href="#用字典字面量创建字典" class="headerlink" title="用字典字面量创建字典"></a>用字典字面量创建字典</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var airports: [String: String] = [&quot;YYZ&quot;: &quot;Toronto Pearson&quot;, &quot;DUB&quot;: &quot;Dublin&quot;]</div></pre></td></tr></table></figure>
<h3 id="访问和修改字典"><a href="#访问和修改字典" class="headerlink" title="访问和修改字典"></a>访问和修改字典</h3><p>我们可以通过字典的只读属性count来获取某个字典的数据项数量：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="string">"The dictionary of airports contains \(airports.count) items."</span>)</div><div class="line"><span class="comment">// 打印 "The dictionary of airports contains 2 items."（这个字典有两个数据项）</span></div></pre></td></tr></table></figure></p>
<p>使用布尔属性isEmpty来快捷地检查字典的count属性是否等于0：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> airports.isEmpty &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The airports dictionary is empty."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The airports dictionary is not empty."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印 "The airports dictionary is not empty."</span></div></pre></td></tr></table></figure></p>
<p>我们还可以使用下标语法来通过给某个键的对应值赋值为nil来从字典里移除一个键值对：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">airports[<span class="string">"APL"</span>] = <span class="string">"Apple Internation"</span></div><div class="line"><span class="comment">// "Apple Internation" 不是真的 APL 机场, 删除它</span></div><div class="line">airports[<span class="string">"APL"</span>] = <span class="literal">nil</span></div><div class="line"><span class="comment">// APL 现在被移除了</span></div></pre></td></tr></table></figure></p>
<p>updateValue(_:forKey:)方法会返回对应值的类型的可选值。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> oldValue = airports.updateValue(<span class="string">"Dublin Airport"</span>, forKey: <span class="string">"DUB"</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The old value for DUB was \(oldValue)."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "The old value for DUB was Dublin."</span></div></pre></td></tr></table></figure></p>
<p>removeValueForKey(_:)方法也可以用来在字典中移除键值对。这个方法在键值对存在的情况下会移除该键值对并且返回被移除的值或者在没有值的情况下返回nil：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> removedValue = airports.removeValueForKey(<span class="string">"DUB"</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The removed airport's name is \(removedValue)."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The airports dictionary does not contain a value for DUB."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "The removed airport's name is Dublin Airport."</span></div></pre></td></tr></table></figure></p>
<h3 id="字典遍历"><a href="#字典遍历" class="headerlink" title="字典遍历"></a>字典遍历</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (airportCode, airportName) <span class="keyword">in</span> airports &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(airportCode): \(airportName)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// YYZ: Toronto Pearson</span></div><div class="line"><span class="comment">// LHR: London Heathrow</span></div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> airportCode <span class="keyword">in</span> airports.keys &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Airport code: \(airportCode)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Airport code: YYZ</span></div><div class="line"><span class="comment">// Airport code: LHR</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> airportName <span class="keyword">in</span> airports.values &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Airport name: \(airportName)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Airport name: Toronto Pearson</span></div><div class="line"><span class="comment">// Airport name: London Heathrow</span></div></pre></td></tr></table></figure>
<p>如果我们只是需要使用某个字典的键集合或者值集合来作为某个接受Array实例的 API 的参数，可以直接使用keys或者values属性构造一个新数组：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> airportCodes = [<span class="type">String</span>](airports.keys)</div><div class="line"><span class="comment">// airportCodes 是 ["YYZ", "LHR"]</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> airportNames = [<span class="type">String</span>](airports.values)</div><div class="line"><span class="comment">// airportNames 是 ["Toronto Pearson", "London Heathrow"]</span></div></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-字符串和字符]]></title>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6/</url>
      <content type="html"><![CDATA[<h2 id="初始化空字符串"><a href="#初始化空字符串" class="headerlink" title="初始化空字符串"></a>初始化空字符串</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> emptyString = <span class="string">""</span>               <span class="comment">// 空字符串字面量</span></div><div class="line"><span class="keyword">var</span> anotherEmptyString = <span class="type">String</span>()  <span class="comment">// 初始化方法</span></div><div class="line"><span class="comment">// 两个字符串均为空并等价。</span></div></pre></td></tr></table></figure>
<p>判断该字符串是否为空<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> emptyString.isEmpty &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Nothing to see here"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印输出："Nothing to see here"</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h2 id="字符串可变性"><a href="#字符串可变性" class="headerlink" title="字符串可变性"></a>字符串可变性</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> variableString = <span class="string">"Horse"</span></div><div class="line">variableString += <span class="string">" and carriage"</span></div><div class="line"><span class="comment">// variableString 现在为 "Horse and carriage"</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> constantString = <span class="string">"Highlander"</span></div><div class="line">constantString += <span class="string">" and another Highlander"</span></div><div class="line"><span class="comment">// 这会报告一个编译错误 (compile-time error) - 常量字符串不可以被修改。</span></div></pre></td></tr></table></figure>
<h2 id="使用字符"><a href="#使用字符" class="headerlink" title="使用字符"></a>使用字符</h2><h3 id="遍历字符串中的字符"><a href="#遍历字符串中的字符" class="headerlink" title="遍历字符串中的字符"></a>遍历字符串中的字符</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> character <span class="keyword">in</span> <span class="string">"Dog!🐶"</span>.characters &#123;</div><div class="line">    <span class="built_in">print</span>(character)</div><div class="line">&#125;</div><div class="line"><span class="comment">// D</span></div><div class="line"><span class="comment">// o</span></div><div class="line"><span class="comment">// g</span></div><div class="line"><span class="comment">// !</span></div><div class="line"><span class="comment">// 🐶</span></div></pre></td></tr></table></figure>
<h3 id="声明字符常量"><a href="#声明字符常量" class="headerlink" title="声明字符常量"></a>声明字符常量</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> exclamationMark: <span class="type">Character</span> = <span class="string">"!"</span></div></pre></td></tr></table></figure>
<h3 id="字符数组转字符串"><a href="#字符数组转字符串" class="headerlink" title="字符数组转字符串"></a>字符数组转字符串</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> catCharacters: [<span class="type">Character</span>] = [<span class="string">"C"</span>, <span class="string">"a"</span>, <span class="string">"t"</span>, <span class="string">"!"</span>, <span class="string">"🐱"</span>]</div><div class="line"><span class="keyword">let</span> catString = <span class="type">String</span>(catCharacters)</div><div class="line"><span class="built_in">print</span>(catString)</div><div class="line"><span class="comment">// 打印输出："Cat!🐱"</span></div></pre></td></tr></table></figure>
<h2 id="连接字符串和字符"><a href="#连接字符串和字符" class="headerlink" title="连接字符串和字符"></a>连接字符串和字符</h2><h3 id=""><a href="#" class="headerlink" title="+"></a>+</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> string1 = <span class="string">"hello"</span></div><div class="line"><span class="keyword">let</span> string2 = <span class="string">" there"</span></div><div class="line"><span class="keyword">var</span> welcome = string1 + string2</div><div class="line"><span class="comment">// welcome 现在等于 "hello there"</span></div></pre></td></tr></table></figure>
<h3 id="-1"><a href="#-1" class="headerlink" title="+="></a>+=</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> instruction = <span class="string">"look over"</span></div><div class="line">instruction += string2</div><div class="line"><span class="comment">// instruction 现在等于 "look over there"</span></div></pre></td></tr></table></figure>
<h3 id="append"><a href="#append" class="headerlink" title="append()"></a>append()</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> exclamationMark: <span class="type">Character</span> = <span class="string">"!"</span></div><div class="line">welcome.append(exclamationMark)</div><div class="line"><span class="comment">// welcome 现在等于 "hello there!"</span></div></pre></td></tr></table></figure>
<h2 id="字符串插值"><a href="#字符串插值" class="headerlink" title="字符串插值"></a>字符串插值</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> multiplier = <span class="number">3</span></div><div class="line"><span class="keyword">let</span> message = <span class="string">"\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)"</span></div><div class="line"><span class="comment">// message is "3 times 2.5 is 7.5"</span></div></pre></td></tr></table></figure>
<h2 id="计算字符数量-str-count"><a href="#计算字符数量-str-count" class="headerlink" title="计算字符数量 (str.count)"></a>计算字符数量 (str.count)</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> word = <span class="string">"cafe"</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"the number of characters in \(word) is \(word.characters.count)"</span>)</div><div class="line"><span class="comment">// 打印输出 "the number of characters in cafe is 4"</span></div></pre></td></tr></table></figure>
<h2 id="访问和修改字符串"><a href="#访问和修改字符串" class="headerlink" title="访问和修改字符串"></a>访问和修改字符串</h2><h3 id="字符串索引"><a href="#字符串索引" class="headerlink" title="字符串索引"></a>字符串索引</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> greeting = <span class="string">"Guten Tag!"</span></div><div class="line">greeting[greeting.startIndex]</div><div class="line"><span class="comment">// G</span></div><div class="line">greeting[greeting.endIndex.predecessor()]</div><div class="line"><span class="comment">// !</span></div><div class="line">greeting[greeting.startIndex.successor()]</div><div class="line"><span class="comment">// u</span></div><div class="line"><span class="keyword">let</span> index = greeting.startIndex.advancedBy(<span class="number">7</span>)</div><div class="line">greeting[index]</div><div class="line"><span class="comment">// a</span></div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> index <span class="keyword">in</span> greeting.characters.<span class="built_in">indices</span> &#123;</div><div class="line">   <span class="built_in">print</span>(<span class="string">"\(greeting[index]) "</span>, terminator: <span class="string">" "</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印输出 "G u t e n   T a g !"</span></div></pre></td></tr></table></figure>
<h3 id="插入和删除"><a href="#插入和删除" class="headerlink" title="插入和删除()"></a>插入和删除()</h3><p>调用insert(_:atIndex:)方法可以在一个字符串的指定索引插入一个字符。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> welcome = <span class="string">"hello"</span></div><div class="line">welcome.insert(<span class="string">"!"</span>, atIndex: welcome.endIndex)</div><div class="line"><span class="comment">// welcome now 现在等于 "hello!"</span></div></pre></td></tr></table></figure></p>
<p>调用insertContentsOf(_:at:)方法可以在一个字符串的指定索引插入一个字符串。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">welcome.insertContentsOf(<span class="string">" there"</span>.characters, at: welcome.endIndex.predecessor())</div><div class="line"><span class="comment">// welcome 现在等于 "hello there!"</span></div></pre></td></tr></table></figure></p>
<p>调用removeAtIndex(_:)方法可以在一个字符串的指定索引删除一个字符。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">welcome.removeAtIndex(welcome.endIndex.predecessor())</div><div class="line"><span class="comment">// welcome 现在等于 "hello there"</span></div></pre></td></tr></table></figure></p>
<p>调用removeRange(_:)方法可以在一个字符串的指定索引删除一个子字符串。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> range = welcome.endIndex.advancedBy(-<span class="number">6</span>)..&lt;welcome.endIndex</div><div class="line">welcome.removeRange(range)</div><div class="line"><span class="comment">// welcome 现在等于 "hello"</span></div></pre></td></tr></table></figure></p>
<h2 id="比较字符串"><a href="#比较字符串" class="headerlink" title="比较字符串"></a>比较字符串</h2><h3 id="字符串-字符相等-和"><a href="#字符串-字符相等-和" class="headerlink" title="字符串/字符相等 (== 和 !=)"></a>字符串/字符相等 (== 和 !=)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> quotation = <span class="string">"We're a lot alike, you and I."</span></div><div class="line"><span class="keyword">let</span> sameQuotation = <span class="string">"We're a lot alike, you and I."</span></div><div class="line"><span class="keyword">if</span> quotation == sameQuotation &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"These two strings are considered equal"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印输出 "These two strings are considered equal"</span></div></pre></td></tr></table></figure>
<h3 id="前缀-后缀相等"><a href="#前缀-后缀相等" class="headerlink" title="前缀/后缀相等"></a>前缀/后缀相等</h3><p>通过调用字符串的hasPrefix(<em>:)/hasSuffix(</em>:)方法来检查字符串是否拥有特定前缀/后缀，两个方法均接收一个String类型的参数，并返回一个布尔值。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> romeoAndJuliet = [</div><div class="line">    <span class="string">"Act 1 Scene 1: Verona, A public place"</span>,</div><div class="line">    <span class="string">"Act 1 Scene 2: Capulet's mansion"</span>,</div><div class="line">    <span class="string">"Act 1 Scene 3: A room in Capulet's mansion"</span>,</div><div class="line">    <span class="string">"Act 1 Scene 4: A street outside Capulet's mansion"</span>,</div><div class="line">    <span class="string">"Act 1 Scene 5: The Great Hall in Capulet's mansion"</span>,</div><div class="line">    <span class="string">"Act 2 Scene 1: Outside Capulet's mansion"</span>,</div><div class="line">    <span class="string">"Act 2 Scene 2: Capulet's orchard"</span>,</div><div class="line">    <span class="string">"Act 2 Scene 3: Outside Friar Lawrence's cell"</span>,</div><div class="line">    <span class="string">"Act 2 Scene 4: A street in Verona"</span>,</div><div class="line">    <span class="string">"Act 2 Scene 5: Capulet's mansion"</span>,</div><div class="line">    <span class="string">"Act 2 Scene 6: Friar Lawrence's cell"</span></div><div class="line">]</div></pre></td></tr></table></figure>
<p>前缀判断<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> act1SceneCount = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> scene <span class="keyword">in</span> romeoAndJuliet &#123;</div><div class="line">    <span class="keyword">if</span> scene.hasPrefix(<span class="string">"Act 1 "</span>) &#123;</div><div class="line">        ++act1SceneCount</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(<span class="string">"There are \(act1SceneCount) scenes in Act 1"</span>)</div><div class="line"><span class="comment">// 打印输出 "There are 5 scenes in Act 1"</span></div></pre></td></tr></table></figure></p>
<p>后缀判断<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mansionCount = <span class="number">0</span></div><div class="line"><span class="keyword">var</span> cellCount = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> scene <span class="keyword">in</span> romeoAndJuliet &#123;</div><div class="line">    <span class="keyword">if</span> scene.hasSuffix(<span class="string">"Capulet's mansion"</span>) &#123;</div><div class="line">        ++mansionCount</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> scene.hasSuffix(<span class="string">"Friar Lawrence's cell"</span>) &#123;</div><div class="line">        ++cellCount</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(<span class="string">"\(mansionCount) mansion scenes; \(cellCount) cell scenes"</span>)</div><div class="line"><span class="comment">// 打印输出 "6 mansion scenes; 2 cell scenes"</span></div></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-运算符]]></title>
      <url>/2017/06/05/Swift%E7%AC%94%E8%AE%B0-%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
      <content type="html"><![CDATA[<h2 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符 (=)"></a>赋值运算符 (=)</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> b = <span class="number">10</span></div><div class="line"><span class="keyword">var</span> a = <span class="number">5</span></div><div class="line">a = b</div><div class="line"><span class="comment">// a 现在等于 10</span></div></pre></td></tr></table></figure>
<h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><ul>
<li>加法（+）</li>
<li>减法（-）</li>
<li>乘法（*）</li>
<li>除法（/）</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> + <span class="number">2</span>       <span class="comment">// 等于 3</span></div><div class="line"><span class="number">5</span> - <span class="number">3</span>       <span class="comment">// 等于 2</span></div><div class="line"><span class="number">2</span> * <span class="number">3</span>       <span class="comment">// 等于 6</span></div><div class="line"><span class="number">10.0</span> / <span class="number">2.5</span>  <span class="comment">// 等于 4.0</span></div></pre></td></tr></table></figure>
<p>加法运算符也可用于String的拼接：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"hello, "</span> + <span class="string">"world"</span>  <span class="comment">// 等于 "hello, world"</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="求余运算符"><a href="#求余运算符" class="headerlink" title="求余运算符 (%)"></a>求余运算符 (%)</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">9</span> % <span class="number">4</span>    <span class="comment">// 等于 1</span></div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">8</span> % <span class="number">2.5</span>   <span class="comment">// 等于 0.5</span></div></pre></td></tr></table></figure>
<h2 id="自增和自减-–"><a href="#自增和自减-–" class="headerlink" title="自增和自减 (++) (–)"></a>自增和自减 (++) (–)</h2><ul>
<li>当++前置的时候，先自増再返回。</li>
<li>当++后置的时候，先返回再自增。</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">0</span></div><div class="line"><span class="keyword">let</span> b = ++a <span class="comment">// a 和 b 现在都是 1</span></div><div class="line"><span class="keyword">let</span> <span class="built_in">c</span> = a++ <span class="comment">// a 现在 2, 但 c 是 a 自增前的值 1</span></div></pre></td></tr></table></figure>
<h2 id="一元负号运算符"><a href="#一元负号运算符" class="headerlink" title="一元负号运算符"></a>一元负号运算符</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> three = <span class="number">3</span></div><div class="line"><span class="keyword">let</span> minusThree = -three       <span class="comment">// minusThree 等于 -3</span></div><div class="line"><span class="keyword">let</span> plusThree = -minusThree   <span class="comment">// plusThree 等于 3, 或 "负负3"</span></div></pre></td></tr></table></figure>
<h2 id="一元正号运算符"><a href="#一元正号运算符" class="headerlink" title="一元正号运算符"></a>一元正号运算符</h2><p>一元正号（+）不做任何改变地返回操作数的值：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> minusSix = -<span class="number">6</span></div><div class="line"><span class="keyword">let</span> alsoMinusSix = +minusSix  <span class="comment">// alsoMinusSix 等于 -6</span></div></pre></td></tr></table></figure></p>
<h2 id="组合赋值运算符"><a href="#组合赋值运算符" class="headerlink" title="组合赋值运算符"></a>组合赋值运算符</h2><p>表达式a += 2是a = a + 2的简写</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span></div><div class="line">a += <span class="number">2</span> <span class="comment">// a 现在是 3</span></div></pre></td></tr></table></figure>
<h2 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h2><ul>
<li>等于（a == b）</li>
<li>不等于（a != b）</li>
<li>大于（a &gt; b）</li>
<li>小于（a &lt; b）</li>
<li>大于等于（a &gt;= b）</li>
<li>小于等于（a &lt;= b）</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> == <span class="number">1</span>   <span class="comment">// true, 因为 1 等于 1</span></div><div class="line"><span class="number">2</span> != <span class="number">1</span>   <span class="comment">// true, 因为 2 不等于 1</span></div><div class="line"><span class="number">2</span> &gt; <span class="number">1</span>    <span class="comment">// true, 因为 2 大于 1</span></div><div class="line"><span class="number">1</span> &lt; <span class="number">2</span>    <span class="comment">// true, 因为 1 小于2</span></div><div class="line"><span class="number">1</span> &gt;= <span class="number">1</span>   <span class="comment">// true, 因为 1 大于等于 1</span></div><div class="line"><span class="number">2</span> &lt;= <span class="number">1</span>   <span class="comment">// false, 因为 2 并不小于等于 1</span></div></pre></td></tr></table></figure>
<h2 id="三目运算符-a-b-c"><a href="#三目运算符-a-b-c" class="headerlink" title="三目运算符 (a?b:c)"></a>三目运算符 (a?b:c)</h2><p>问题 ? 答案1 : 答案2</p>
<p>如果问题成立，返回答案1的结果; 如果不成立，返回答案2的结果。</p>
<h2 id="空合运算符-a-b"><a href="#空合运算符-a-b" class="headerlink" title="空合运算符 (a ?? b)"></a>空合运算符 (a ?? b)</h2><p>空合运算符(a ?? b)将对可选类型a进行空判断，如果a包含一个值就进行解封，否则就返回一个默认值b.这个运算符有两个条件:</p>
<ul>
<li>表达式a必须是Optional可选类型</li>
<li>默认值b的类型必须要和a存储值的类型保持一致</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> defaultColorName = <span class="string">"red"</span></div><div class="line"><span class="keyword">var</span> userDefinedColorName: <span class="type">String</span>?   <span class="comment">//默认值为 nil</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> colorNameToUse = userDefinedColorName ?? defaultColorName</div><div class="line"><span class="comment">// userDefinedColorName 的值为空，所以 colorNameToUse 的值为 "red"</span></div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">userDefinedColorName = <span class="string">"green"</span></div><div class="line">colorNameToUse = userDefinedColorName ?? defaultColorName</div><div class="line"><span class="comment">// userDefinedColorName 非空，因此 colorNameToUse 的值为 "green"</span></div></pre></td></tr></table></figure>
<h2 id="区间运算符"><a href="#区间运算符" class="headerlink" title="区间运算符"></a>区间运算符</h2><h3 id="闭区间运算符-（a…b）"><a href="#闭区间运算符-（a…b）" class="headerlink" title="闭区间运算符 （a…b）"></a>闭区间运算符 （a…b）</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="number">1</span>...<span class="number">5</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(index) * 5 = \(index * 5)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 1 * 5 = 5</span></div><div class="line"><span class="comment">// 2 * 5 = 10</span></div><div class="line"><span class="comment">// 3 * 5 = 15</span></div><div class="line"><span class="comment">// 4 * 5 = 20</span></div><div class="line"><span class="comment">// 5 * 5 = 25</span></div></pre></td></tr></table></figure>
<h3 id="半开区间运算符-a-lt-b"><a href="#半开区间运算符-a-lt-b" class="headerlink" title="半开区间运算符 (a..&lt;b)"></a>半开区间运算符 (a..&lt;b)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> names = [<span class="string">"Anna"</span>, <span class="string">"Alex"</span>, <span class="string">"Brian"</span>, <span class="string">"Jack"</span>]</div><div class="line"><span class="keyword">let</span> <span class="built_in">count</span> = names.<span class="built_in">count</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">count</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"第 \(i + 1) 个人叫 \(names[i])"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 第 1 个人叫 Anna</span></div><div class="line"><span class="comment">// 第 2 个人叫 Alex</span></div><div class="line"><span class="comment">// 第 3 个人叫 Brian</span></div><div class="line"><span class="comment">// 第 4 个人叫 Jack</span></div></pre></td></tr></table></figure>
<h2 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h2><h3 id="逻辑非-a"><a href="#逻辑非-a" class="headerlink" title="逻辑非 (!a)"></a>逻辑非 (!a)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> allowedEntry = <span class="literal">false</span></div><div class="line"><span class="keyword">if</span> !allowedEntry &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"ACCESS DENIED"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "ACCESS DENIED"</span></div></pre></td></tr></table></figure>
<h3 id="逻辑与-a-amp-amp-b"><a href="#逻辑与-a-amp-amp-b" class="headerlink" title="逻辑与 (a &amp;&amp; b)"></a>逻辑与 (a &amp;&amp; b)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> enteredDoorCode = <span class="literal">true</span></div><div class="line"><span class="keyword">let</span> passedRetinaScan = <span class="literal">false</span></div><div class="line"><span class="keyword">if</span> enteredDoorCode &amp;&amp; passedRetinaScan &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Welcome!"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"ACCESS DENIED"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "ACCESS DENIED"</span></div></pre></td></tr></table></figure>
<h3 id="逻辑或-a-b"><a href="#逻辑或-a-b" class="headerlink" title="逻辑或 (a || b)"></a>逻辑或 (a || b)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> hasDoorKey = <span class="literal">false</span></div><div class="line"><span class="keyword">let</span> knowsOverridePassword = <span class="literal">true</span></div><div class="line"><span class="keyword">if</span> hasDoorKey || knowsOverridePassword &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Welcome!"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"ACCESS DENIED"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "Welcome!"</span></div></pre></td></tr></table></figure>
<h3 id="使用括号来明确优先级"><a href="#使用括号来明确优先级" class="headerlink" title="使用括号来明确优先级"></a>使用括号来明确优先级</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (enteredDoorCode &amp;&amp; passedRetinaScan) || hasDoorKey || knowsOverridePassword &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Welcome!"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"ACCESS DENIED"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 输出 "Welcome!"</span></div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Swift笔记-基础部分]]></title>
      <url>/2017/06/02/Swift%E7%AC%94%E8%AE%B0-%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/</url>
      <content type="html"><![CDATA[<h2 id="常量和变量"><a href="#常量和变量" class="headerlink" title="常量和变量"></a>常量和变量</h2><ol>
<li>变量</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//变量声明</span></div><div class="line"><span class="keyword">var</span> x = <span class="number">1</span></div><div class="line"></div><div class="line"><span class="comment">//声明多个变量</span></div><div class="line"><span class="keyword">var</span> x = <span class="number">1</span>, y = <span class="number">2</span></div><div class="line"></div><div class="line"><span class="comment">//带类型声明</span></div><div class="line"><span class="keyword">var</span> msg: <span class="type">String</span></div><div class="line"><span class="comment">//变量赋值</span></div><div class="line">msg = <span class="string">"Hello"</span></div></pre></td></tr></table></figure>
<ol>
<li>常量</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//声明常量</span></div><div class="line"><span class="keyword">let</span> pi = <span class="number">3.14159</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><ol>
<li>单行注释</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">//xxx</div></pre></td></tr></table></figure>
<ol>
<li>多行注释</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line">xxx</div><div class="line">xxx</div><div class="line">*/</div></pre></td></tr></table></figure>
<h2 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型"></a>基础数据类型</h2><ol>
<li>整数 </li>
</ol>
<p>（1）Int ：有符号整数</p>
<ul>
<li>在32位平台上，Int和Int32长度相同。</li>
<li>在64位平台上，Int和Int64长度相同。</li>
</ul>
<p>（2）UInt : 无符号整数</p>
<ul>
<li>在32位平台上，UInt和UInt32长度相同。</li>
<li>在64位平台上，UInt和UInt64长度相同。</li>
</ul>
<p>推荐使用Int，提高代码的可复用性。</p>
<ol>
<li>浮点数</li>
</ol>
<p>Double ： 64位浮点数<br>Float ： 32位浮点数</p>
<p><strong>注意</strong>：Double精确度很高，至少有15位数字，而Float最少只有6位数字。选择哪个类型取决于你的代码需要处理的值的范围。</p>
<ol>
<li>布尔类型</li>
</ol>
<p>Bool</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> a = <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> b = <span class="literal">false</span></div></pre></td></tr></table></figure>
<h2 id="进制"><a href="#进制" class="headerlink" title="进制"></a>进制</h2><ul>
<li>一个十进制数，没有前缀</li>
<li>一个二进制数，前缀是0b</li>
<li>一个八进制数，前缀是0o</li>
<li>一个十六进制数，前缀是0x</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> decimalInteger = <span class="number">17</span> </div><div class="line"><span class="keyword">let</span> binaryInteger = <span class="number">0b10001</span>       <span class="comment">// 二进制的17 </span></div><div class="line"><span class="keyword">let</span> octalInteger = <span class="number">0o21</span>           <span class="comment">// 八进制的17 </span></div><div class="line"><span class="keyword">let</span> hexadecimalInteger = <span class="number">0x11</span>     <span class="comment">// 十六进制的17</span></div></pre></td></tr></table></figure>
<p>如果一个十进制数的指数为exp，那这个数相当于基数和$10^{exp}$的乘积：</p>
<p>1.25e2 表示 $1.25 × 10^{2}$，等于 125.0。<br>1.25e-2 表示 $1.25 × 10^{-2}$，等于 0.0125。</p>
<p>如果一个十六进制数的指数为exp，那这个数相当于基数和$2^{exp}$的乘积：</p>
<p>0xFp2 表示 $15 × 2^{2}$，等于 60.0。<br>0xFp-2 表示 $15 × 2^{-2}$，等于 3.75。</p>
<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><ol>
<li>整数转换</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 下划线用来增加可读性，不会影响值</span></div><div class="line"><span class="keyword">let</span> twoThousand: <span class="type">UInt16</span> = <span class="number">2_000</span> </div><div class="line"><span class="keyword">let</span> one: <span class="type">UInt8</span> = <span class="number">1</span> </div><div class="line"><span class="comment">// 将UInt8转换成UInt16再相加</span></div><div class="line"><span class="keyword">let</span> twoThousandAndOne = twoThousand + <span class="type">UInt16</span>(one)</div></pre></td></tr></table></figure>
<ol>
<li>浮点数转换</li>
</ol>
<p>（1）整数-&gt;浮点数</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> three = <span class="number">3</span></div><div class="line"><span class="keyword">let</span> t = <span class="type">Double</span>(three)</div></pre></td></tr></table></figure>
<p>（2）浮点数-&gt;整数</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> d = <span class="number">0.123</span></div><div class="line"><span class="keyword">let</span> i = <span class="type">Int</span>(d) <span class="comment">// i = 0</span></div></pre></td></tr></table></figure>
<h2 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typealias</span> <span class="type">AudioSample</span> = <span class="type">UInt16</span></div></pre></td></tr></table></figure>
<h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><p>元组（tuples）把多个值组合成一个复合值。元组内的值可以使任意类型，并不要求是相同类型。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> http404Error = (<span class="number">404</span>, <span class="string">"Not Found"</span>) </div><div class="line"><span class="comment">// http404Error 的类型是 (Int, String)，值是 (404, "Not Found")</span></div></pre></td></tr></table></figure>
<p>你可以将一个元组的内容分解（decompose）成单独的常量和变量<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> (statusCode, statusMessage) = http404Error </div><div class="line"><span class="built_in">println</span>(<span class="string">"The status code is \(statusCode)"</span>) </div><div class="line"><span class="comment">// 输出 "The status code is 404" </span></div><div class="line"><span class="built_in">println</span>(<span class="string">"The status message is \(statusMessage)"</span>) </div><div class="line"><span class="comment">// 输出 "The status message is Not Found"</span></div></pre></td></tr></table></figure></p>
<p>如果你只需要一部分元组值，分解的时候可以把要忽略的部分用下划线（_）标记<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> (justTheStatusCode, <span class="number">_</span>) = http404Error </div><div class="line"><span class="built_in">println</span>(<span class="string">"The status code is \(justTheStatusCode)"</span>) </div><div class="line"><span class="comment">// 输出 "The status code is 404"</span></div></pre></td></tr></table></figure></p>
<p>你还可以通过下标来访问元组中的单个元素，下标从零开始<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">println</span>(<span class="string">"The status code is \(http404Error.0)"</span>) </div><div class="line"><span class="comment">// 输出 "The status code is 404" </span></div><div class="line"><span class="built_in">println</span>(<span class="string">"The status message is \(http404Error.1)"</span>) </div><div class="line"><span class="comment">// 输出 "The status message is Not Found"</span></div></pre></td></tr></table></figure></p>
<p>你可以在定义元组的时候给单个元素命名<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> http200Status = (statusCode: <span class="number">200</span>, description: <span class="string">"OK"</span>) </div><div class="line"><span class="built_in">println</span>(<span class="string">"The status code is \(http200Status.statusCode)"</span>) </div><div class="line"><span class="comment">// 输出 "The status code is 200" </span></div><div class="line"><span class="built_in">println</span>(<span class="string">"The status message is \(http200Status.description)"</span>) </div><div class="line"><span class="comment">// 输出 "The status message is OK"</span></div></pre></td></tr></table></figure></p>
<h2 id="可选-（-）"><a href="#可选-（-）" class="headerlink" title="可选 （?）"></a>可选 （?）</h2><p>可选表示：</p>
<p><strong>有值，等于 x</strong>   或者   <strong>没有值</strong></p>
<p>“Int?”表示可选的Int</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> possibleNumber = <span class="string">"123"</span> </div><div class="line"><span class="keyword">let</span> convertedNumber = possibleNumber.toInt() </div><div class="line"><span class="comment">// convertedNumber 被推测为类型 "Int?"， 或者类型 "optional Int"</span></div></pre></td></tr></table></figure>
<p>判断可选是否有值<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> actualNumber = possibleNumber.toInt() &#123; </div><div class="line">    <span class="built_in">println</span>(<span class="string">"\(possibleNumber) has an integer value of \(actualNumber)"</span>) </div><div class="line">&#125; <span class="keyword">else</span> &#123; </div><div class="line">    <span class="built_in">println</span>(<span class="string">"\(possibleNumber) could not be converted to an integer"</span>) </div><div class="line">&#125; </div><div class="line"><span class="comment">// 输出 "123 has an integer value of 123"</span></div></pre></td></tr></table></figure></p>
<h3 id="隐式解析可选-（-）"><a href="#隐式解析可选-（-）" class="headerlink" title="隐式解析可选 （!）"></a>隐式解析可选 （!）</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> possibleString: <span class="type">String</span>? = <span class="string">"An optional string."</span> </div><div class="line"><span class="built_in">println</span>(possibleString!) <span class="comment">// 需要惊叹号来获取值 </span></div><div class="line"><span class="comment">// 输出 "An optional string." </span></div><div class="line"> </div><div class="line"><span class="keyword">let</span> assumedString: <span class="type">String</span>! = <span class="string">"An implicitly unwrapped optional string."</span> </div><div class="line"><span class="built_in">println</span>(assumedString)  <span class="comment">// 不需要感叹号 </span></div><div class="line"><span class="comment">// 输出 "An implicitly unwrapped optional string."</span></div></pre></td></tr></table></figure>
<p><strong>注意</strong>：如果你在隐式解析可选没有值的时候尝试取值，会触发运行时错误。和你在没有值的普通可选后面加一个惊叹号一样。</p>
<h2 id="nil"><a href="#nil" class="headerlink" title="nil"></a>nil</h2><p>可以给可选变量赋值为nil来表示它没有值</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> serverResponseCode: <span class="type">Int</span>? = <span class="number">404</span> </div><div class="line"><span class="comment">// serverResponseCode 包含一个可选的 Int 值 404 </span></div><div class="line">serverResponseCode = <span class="literal">nil</span> </div><div class="line"><span class="comment">// serverResponseCode 现在不包含值</span></div></pre></td></tr></table></figure>
<p>如果你声明一个可选常量或者变量但是没有赋值，它们会自动被设置为nil：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> surveyAnswer: <span class="type">String</span>? </div><div class="line"><span class="comment">// surveyAnswer 被自动设置为 nil</span></div></pre></td></tr></table></figure></p>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>throws 抛出异常</p>
<p>try method 抓取并执行可能抛出异常的方法</p>
<p>do {try …} catch ErrorType {…处理} 处理异常</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeASandwich</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">try</span> makeASandwich()</div><div class="line">    eatASandwich()</div><div class="line">&#125; <span class="keyword">catch</span> <span class="type">Error</span>.<span class="type">OutOfCleanDishes</span> &#123;</div><div class="line">    washDishes()</div><div class="line">&#125; <span class="keyword">catch</span> <span class="type">Error</span>.<span class="type">MissingIngredients</span>(<span class="keyword">let</span> ingredients) &#123;</div><div class="line">    buyGroceries(ingredients)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="断言-（assert）"><a href="#断言-（assert）" class="headerlink" title="断言 （assert）"></a>断言 （assert）</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> age = -<span class="number">3</span> </div><div class="line"><span class="built_in">assert</span>(age &gt;= <span class="number">0</span>, <span class="string">"A person's age cannot be less than zero"</span>) </div><div class="line"><span class="comment">// 因为 age &lt; 0，所以断言会触发</span></div></pre></td></tr></table></figure>
<p>何时使用断言<br>当条件可能为假时使用断言，但是最终一定要保证条件为真，这样你的代码才能继续运行。</p>
<p>断言的适用情景：</p>
<ul>
<li>整数的附属脚本索引被传入一个自定义附属脚本实现，但是下标索引值可能太小或者太大。</li>
<li>需要给函数传入一个值，但是非法的值可能导致函数不能正常执行。</li>
<li>一个可选值现在是nil，但是后面的代码运行需要一个非nil值。</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Swift </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Swift </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[使用hexo搭建github静态博客]]></title>
      <url>/2017/06/01/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BAgithub%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/</url>
      <content type="html"><![CDATA[<p>网上虽然不乏此类教程，但是实际操作起来还是遇到了一些问题。<br>总结如下。</p>
<p>以Windows 7系统为例：</p>
<h3 id="登陆Github，创建Reposity"><a href="#登陆Github，创建Reposity" class="headerlink" title="登陆Github，创建Reposity"></a>登陆Github，创建Reposity</h3><ol>
<li>用户名.github.io, 例如我的是zhouzhuo810.github.io</li>
<li>点击Setting-&gt;Choose Theme-&gt;随便选一个Theme-&gt;Select-&gt;默认Readme</li>
<li>访问username.github.io可以看到readme的内容即可。</li>
</ol>
<h3 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h3><p><a href="https://nodejs.org/en/" target="_blank" rel="external">https://nodejs.org/en/</a><br>选择第二个下载安装。</p>
<a id="more"></a>  
<h3 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h3><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><p>使用cmd命令行工具，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">F:</div><div class="line">npm install hexo-cli -g</div><div class="line">hexo init blog</div><div class="line">cd blog</div><div class="line">npm install</div><div class="line">hexo server</div></pre></td></tr></table></figure>
<h3 id="配置config"><a href="#配置config" class="headerlink" title="配置config"></a>配置config</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">title: 标题</div><div class="line">subtitle: 副标题</div><div class="line">description: 描述</div><div class="line">author: 作者</div><div class="line">language: zh-CN </div><div class="line">timezone: Asia/Shanghai</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">    type: git </div><div class="line">    repo: 复制github的ssh格式的路径(不要用https格式的)</div><div class="line">    branch: master</div></pre></td></tr></table></figure>
<h3 id="配置ssh-key。"><a href="#配置ssh-key。" class="headerlink" title="配置ssh key。"></a>配置ssh key。</h3><ol>
<li>打开git bash<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git config --global user.name &quot;你的github用户名&quot;</div><div class="line">$ git config --global user.email &quot;你的github验证邮箱&quot;</div><div class="line">$ ssh-keygen -t rsa -C &quot;你的github验证邮箱&quot;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>一路回车即可。</p>
<p>默认在<strong>C:\Users\xxx.ssh</strong>下</p>
<p>找到<strong>id_rsa.pub</strong>文件。</p>
<ol>
<li>记事本打开，复制所有内容。</li>
</ol>
<p>到<br><a href="https://github.com/settings/keys" target="_blank" rel="external">https://github.com/settings/keys</a><br>配置即可</p>
<p>标题随意。</p>
<ol>
<li>最后别忘了最关键的一步：</li>
</ol>
<p>验证SSH key配置是否成功：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh -T git@github.com</div></pre></td></tr></table></figure>
<p>如果弹出<br>Are you sure you want to continue connecting (yes/no)?<br>输入yes，回车</p>
<p>等待结果：<br>如果返回以下内容，说明成功了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Hi xxx! You&apos;ve successfully authenticated, but GitHub does not provide shell access.</div></pre></td></tr></table></figure></p>
<p>然后在博客目录下，执行如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
<p>不行就<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save hexo-deployer-git</div></pre></td></tr></table></figure></p>
<h3 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo g</div><div class="line"></div><div class="line">hexo d</div></pre></td></tr></table></figure>
<h3 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h3><p>不出意外的话，通过username.github.io可以访问到发布的内容了。</p>
<h3 id="切换主题"><a href="#切换主题" class="headerlink" title="切换主题"></a>切换主题</h3><p><a href="https://github.com/stkevintan/hexo-theme-material-flow" target="_blank" rel="external">https://github.com/stkevintan/hexo-theme-material-flow</a></p>
<p>1.安装插件和下载主题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># change to work dir</div><div class="line">cd /your_blog_dir/</div><div class="line"># install dependencies</div><div class="line">npm i -S hexo-generator-search hexo-generator-feed hexo-renderer-less hexo-autoprefixer hexo-generator-json-content</div><div class="line"># download source</div><div class="line">git clone https://github.com/stkevintan/hexo-theme-material-flow themes/material-flow</div></pre></td></tr></table></figure>
<p>注意事项：多个插件同时安装报错时，拆分成单个插件安装即可。</p>
<p>如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">npm i -S hexo-generator-search</div><div class="line"></div><div class="line">npm i -S hexo-generator-feed</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">...</div></pre></td></tr></table></figure>
<p>2.修改配置文件_config.yml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">avatar: /images/avatar.jpg</div><div class="line">favicon: /images/favicon.ico</div><div class="line"></div><div class="line">theme: material-flow</div><div class="line">search:</div><div class="line">  path: search.xml</div><div class="line">  field: post</div><div class="line"></div><div class="line">autoprefixer:</div><div class="line">  exclude:</div><div class="line">    - &apos;*.min.css&apos;</div><div class="line">  # remove: false # prevent autoprefixer remove page-break-inside</div><div class="line">  # browsers:</div><div class="line">  #   - &apos;last 2 versions&apos;</div><div class="line">  #   - &apos;&gt; 5%&apos;</div><div class="line"></div><div class="line"># Generator json content</div><div class="line">jsonContent:</div><div class="line">  meta: false</div><div class="line">  keywords: false</div><div class="line">  pages:</div><div class="line">    title: true</div><div class="line">    slug: false</div><div class="line">    date: false</div><div class="line">    updated: false</div><div class="line">    comments: false</div><div class="line">    path: false</div><div class="line">    link: false</div><div class="line">    permalink: true</div><div class="line">    excerpt: false</div><div class="line">    keywords: false</div><div class="line">    text: true</div><div class="line">    raw: false</div><div class="line">    content: false</div><div class="line">  posts:</div><div class="line">    title: true</div><div class="line">    slug: false</div><div class="line">    date: false</div><div class="line">    updated: false</div><div class="line">    comments: false</div><div class="line">    path: false</div><div class="line">    link: false</div><div class="line">    permalink: true</div><div class="line">    excerpt: false</div><div class="line">    keywords: false</div><div class="line">    text: true</div><div class="line">    raw: false</div><div class="line">    content: false</div><div class="line">    categories: false</div><div class="line">    tags: false</div><div class="line"></div><div class="line">feed:</div><div class="line">  type: atom</div><div class="line">  path: atom.xml</div><div class="line">  limit: 20</div><div class="line">  hub:</div><div class="line">  content:</div></pre></td></tr></table></figure>
<p>3.头像和网站图标配置</p>
<p>在sources文件夹下新建images文件夹即可。</p>
]]></content>
      
        <categories>
            
            <category> hexo </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
